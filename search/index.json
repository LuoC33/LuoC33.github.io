[{"content":"ä¸€ã€å†…å­˜å¯¹é½ï¼šæ€§èƒ½ä¸ç©ºé—´çš„æƒè¡¡\rä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½ï¼Ÿ\rå†…å­˜å¯¹é½æ˜¯ç¼–è¯‘å™¨ä¸ºäº†ä¼˜åŒ–å†…å­˜è®¿é—®é€Ÿåº¦è€Œé‡‡å–çš„ç­–ç•¥ã€‚CPUè®¿é—®å¯¹é½çš„å†…å­˜åœ°å€æ¯”è®¿é—®æœªå¯¹é½çš„åœ°å€è¦å¿«å¾—å¤šã€‚\n1struct example { 2 char a; // 1å­—èŠ‚ 3 int b; // 4å­—èŠ‚ 4 short c; // 2å­—èŠ‚ 5}; 6 7// å®é™…å†…å­˜å¸ƒå±€å¯èƒ½ï¼š 8// [a][å¡«å……][å¡«å……][å¡«å……][b][b][b][b][c][c][å¡«å……][å¡«å……] 9// æ€»å¤§å°ï¼š12å­—èŠ‚è€Œä¸æ˜¯7å­—èŠ‚ å¸¸è§å¯¹é½è§„åˆ™\rchar: 1å­—èŠ‚å¯¹é½ short: 2å­—èŠ‚å¯¹é½ int: 4å­—èŠ‚å¯¹é½ float: 4å­—èŠ‚å¯¹é½ double: 8å­—èŠ‚å¯¹é½ æ‰‹åŠ¨æ§åˆ¶å¯¹é½\r1// GCCæ‰©å±•è¯­æ³• 2struct __attribute__((packed)) tight_packed { 3 char a; 4 int b; 5 short c; 6}; // å¤§å°ï¼š1+4+2=7å­—èŠ‚ 7 8// æ ‡å‡†C11è¯­æ³• 9#pragma pack(push, 1) 10struct standard_packed { 11 char a; 12 int b; 13 short c; 14}; 15#pragma pack(pop) äºŒã€ç»“æ„ä½“æˆå‘˜æ’åºçš„è‰ºæœ¯\rç³Ÿç³•çš„æ’åºæµªè´¹å†…å­˜\r1struct bad_order { 2 char a; // 1å­—èŠ‚ 3 int b; // 4å­—èŠ‚ï¼ˆéœ€è¦3å­—èŠ‚å¡«å……ï¼‰ 4 char c; // 1å­—èŠ‚ï¼ˆéœ€è¦3å­—èŠ‚å¡«å……ï¼‰ 5 double d; // 8å­—èŠ‚ 6}; // æ€»å¤§å°ï¼š1+3+4+1+3+8=20å­—èŠ‚ ä¼˜åŒ–åçš„æ’åº\r1struct good_order { 2 double d; // 8å­—èŠ‚ 3 int b; // 4å­—èŠ‚ 4 char a; // 1å­—èŠ‚ 5 char c; // 1å­—èŠ‚ 6}; // æ€»å¤§å°ï¼š8+4+1+1=14å­—èŠ‚ï¼ˆèŠ‚çœ6å­—èŠ‚ï¼ï¼‰ æ’åºåŸåˆ™\rä»å¤§åˆ°å°æ’åˆ—æˆå‘˜ ç›¸åŒç±»å‹çš„æˆå‘˜æ”¾åœ¨ä¸€èµ· è€ƒè™‘ç¼“å­˜è¡Œå¤§å°ï¼ˆé€šå¸¸64å­—èŠ‚ï¼‰ ä¸‰ã€unionï¼šåŒä¸€å†…å­˜çš„å¤šç§è§†è§’\runionçš„åŸºæœ¬æ¦‚å¿µ\r1union data_union { 2 uint32_t raw; // 4å­—èŠ‚ 3 uint8_t bytes[4]; // 4å­—èŠ‚ 4 struct { 5 uint16_t low; // 2å­—èŠ‚ 6 uint16_t high; // 2å­—èŠ‚ 7 } words; 8}; // æ€»å¤§å°ï¼š4å­—èŠ‚ åµŒå…¥å¼ä¸­çš„å…¸å‹åº”ç”¨\r1. å¯„å­˜å™¨è®¿é—®\r1typedef union { 2 uint32_t value; 3 struct __attribute__((packed)) { 4 uint32_t enable : 1; 5 uint32_t mode : 3; 6 uint32_t frequency : 8; 7 uint32_t reserved : 20; 8 } bits; 9} control_reg_t; 10 11// ä½¿ç”¨æ–¹å¼ 12control_reg_t reg; 13reg.value = 0x12345678; 14if (reg.bits.enable) { 15 // ç¡¬ä»¶ä½¿èƒ½ 16} 2. åè®®æ•°æ®å¤„ç†\r1struct __attribute__((packed)) sensor_data { 2 uint8_t sensor_id; 3 union { 4 uint8_t raw[8]; 5 struct { float temp; float humidity; } environment; 6 struct { uint16_t light; uint16_t uv_index; } optical; 7 struct { int32_t pressure; } atmospheric; 8 } payload; 9}; 10 11// ç»Ÿä¸€å¤„ç†æ¥å£ 12void process_packet(struct sensor_data *data) { 13 switch(data-\u0026gt;sensor_id) { 14 case ENV_SENSOR: 15 printf(\u0026#34;Temp: %.1f, Humidity: %.1f\\n\u0026#34;, 16 data-\u0026gt;payload.environment.temp, 17 data-\u0026gt;payload.environment.humidity); 18 break; 19 case OPTICAL_SENSOR: 20 // å¤„ç†å…‰å­¦æ•°æ® 21 break; 22 } 23} 3. æ•°æ®ç±»å‹è½¬æ¢\r1union converter { 2 float f_value; 3 uint32_t i_value; 4 uint8_t bytes[4]; 5}; 6 7float read_temperature() { 8 union converter conv; 9 // ä»ADCè¯»å–åŸå§‹æ•°æ® 10 conv.i_value = read_adc(); 11 return conv.f_value; 12} å››ã€ä¸‰è€…çš„å®Œç¾ç»“åˆï¼šå®æˆ˜æ¡ˆä¾‹\ræ¡ˆä¾‹ï¼šé«˜æ•ˆçš„é€šä¿¡åè®®å®ç°\r1// ä¼˜åŒ–åçš„åè®®å¤´ç»“æ„ 2struct __attribute__((packed)) protocol_header { 3 uint8_t destination; // ç›®æ ‡åœ°å€ 4 uint8_t source; // æºåœ°å€ 5 uint16_t packet_id; // åŒ…ID 6 uint8_t flags; // æ§åˆ¶æ ‡å¿— 7 uint8_t payload_type; // è´Ÿè½½ç±»å‹ 8 uint16_t payload_len; // è´Ÿè½½é•¿åº¦ 9}; // å¤§å°ï¼š8å­—èŠ‚ï¼Œæ— å¡«å…… 10 11// ç»Ÿä¸€çš„æ•°æ®åŒ…ç»“æ„ 12struct __attribute__((packed)) data_packet { 13 struct protocol_header header; 14 union { 15 uint8_t raw[56]; // åŸå§‹æ•°æ® 16 struct { // ç±»å‹1ï¼šä¼ æ„Ÿå™¨æ•°æ® 17 int32_t values[8]; 18 uint16_t status; 19 uint8_t timestamp[6]; 20 } sensor_data; 21 struct { // ç±»å‹2ï¼šæ§åˆ¶å‘½ä»¤ 22 uint8_t command; 23 uint8_t parameters[16]; 24 uint32_t checksum; 25 } control_cmd; 26 struct { // ç±»å‹3ï¼šé…ç½®ä¿¡æ¯ 27 uint16_t setting_id; 28 uint8_t value[20]; 29 uint8_t reserved[10]; 30 } configuration; 31 } payload; 32}; // æ€»å¤§å°ï¼š8 + 56 = 64å­—èŠ‚ï¼ˆå®Œç¾å¯¹é½ç¼“å­˜è¡Œï¼‰ å†…å­˜æ˜ å°„ç¡¬ä»¶å¯„å­˜å™¨\r1// GPIOå¯„å­˜å™¨æ˜ å°„ 2typedef struct __attribute__((packed)) { 3 union { 4 uint32_t MODER; // æ¨¡å¼å¯„å­˜å™¨ 5 struct { 6 uint32_t MODER0 : 2; 7 uint32_t MODER1 : 2; 8 // ... å…¶ä»–å¼•è„š 9 } MODER_bits; 10 }; 11 union { 12 uint32_t ODR; // è¾“å‡ºæ•°æ®å¯„å­˜å™¨ 13 struct { 14 uint32_t ODR0 : 1; 15 uint32_t ODR1 : 1; 16 // ... å…¶ä»–å¼•è„š 17 } ODR_bits; 18 }; 19 // æ›´å¤šå¯„å­˜å™¨... 20} GPIO_TypeDef; 21 22#define GPIOA ((GPIO_TypeDef *)0x40020000) 23 24// ä½¿ç”¨ç¤ºä¾‹ 25void led_init() { 26 GPIOA-\u0026gt;MODER_bits.MODER5 = 1; // è®¾ç½®PA5ä¸ºè¾“å‡ºæ¨¡å¼ 27 GPIOA-\u0026gt;ODR_bits.ODR5 = 1; // è®¾ç½®PA5è¾“å‡ºé«˜ç”µå¹³ 28} äº”ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹\r1. å¯ç§»æ¤æ€§è€ƒè™‘\r1// ä½¿ç”¨æ ‡å‡†æ•´æ•°ç±»å‹ 2#include \u0026lt;stdint.h\u0026gt; 3#include \u0026lt;stddef.h\u0026gt; 4 5// æ£€æŸ¥ç»“æ„ä½“å¤§å°å’Œåç§» 6static_assert(sizeof(struct protocol_header) == 8, 7 \u0026#34;Header size mismatch\u0026#34;); 8static_assert(offsetof(struct protocol_header, payload_len) == 6, 9 \u0026#34;payload_len offset wrong\u0026#34;); 2. å­—èŠ‚åºå¤„ç†\r1uint32_t read_big_endian(const uint8_t *data) { 2 return (data[0] \u0026lt;\u0026lt; 24) | (data[1] \u0026lt;\u0026lt; 16) | 3 (data[2] \u0026lt;\u0026lt; 8) | data[3]; 4} 5 6void write_big_endian(uint8_t *data, uint32_t value) { 7 data[0] = (value \u0026gt;\u0026gt; 24) \u0026amp; 0xFF; 8 data[1] = (value \u0026gt;\u0026gt; 16) \u0026amp; 0xFF; 9 data[2] = (value \u0026gt;\u0026gt; 8) \u0026amp; 0xFF; 10 data[3] = value \u0026amp; 0xFF; 11} 3. è°ƒè¯•æŠ€å·§\r1// æ‰“å°ç»“æ„ä½“å†…å­˜å¸ƒå±€ 2void print_struct_layout(const void *data, size_t size) { 3 const uint8_t *bytes = (const uint8_t *)data; 4 for (size_t i = 0; i \u0026lt; size; i++) { 5 printf(\u0026#34;%02X \u0026#34;, bytes[i]); 6 if ((i + 1) % 8 == 0) printf(\u0026#34;\\n\u0026#34;); 7 } 8 printf(\u0026#34;\\n\u0026#34;); 9} å…­ã€æ€§èƒ½æµ‹è¯•å¯¹æ¯”\ræˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„æµ‹è¯•æ¥å±•ç¤ºä¼˜åŒ–æ•ˆæœï¼š\n1// æµ‹è¯•æœªä¼˜åŒ–ç»“æ„ä½“ 2struct unoptimized { 3 char a; 4 int b; 5 char c; 6 double d; 7}; 8 9// æµ‹è¯•ä¼˜åŒ–åç»“æ„ä½“ 10struct optimized { 11 double d; 12 int b; 13 char a; 14 char c; 15}; 16 17void benchmark() { 18 struct unoptimized u[1000]; 19 struct optimized o[1000]; 20 21 // å†…å­˜å ç”¨å¯¹æ¯” 22 printf(\u0026#34;Unoptimized: %zu bytes\\n\u0026#34;, sizeof(u)); // çº¦20000å­—èŠ‚ 23 printf(\u0026#34;Optimized: %zu bytes\\n\u0026#34;, sizeof(o)); // çº¦14000å­—èŠ‚ 24 25 // è®¿é—®é€Ÿåº¦æµ‹è¯• 26 // ä¼˜åŒ–åçš„ç»“æ„ä½“é€šå¸¸æœ‰æ›´å¥½çš„ç¼“å­˜å‘½ä¸­ç‡ 27} ","date":"2025-09-02T17:17:44+08:00","image":"https://tuchuang.liushuiyu.cn/img/c-jingjie-logo220250902.webp","permalink":"https://blog.liushuiyu.cn/p/c%E8%AF%AD%E8%A8%80%E8%BF%9B%E9%98%B6%E5%86%85%E5%AD%98%E4%B8%8Eunion%E7%9A%84%E5%AE%8C%E7%BE%8E%E7%BB%93%E5%90%88/","title":"Cè¯­è¨€è¿›é˜¶ï¼šå†…å­˜ä¸unionçš„å®Œç¾ç»“åˆ"},{"content":"ä¸€ã€å‰è¨€ï¼šä¸ºä»€ä¹ˆåœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­éœ€è¦å®Logï¼Ÿ\råœ¨åµŒå…¥å¼å¼€å‘ä¸­ï¼Œè°ƒè¯•æ‰‹æ®µå¾€å¾€å—é™ï¼ˆæ²¡æœ‰å±å¹•ã€æ— æ³•è½»æ˜“è¿æ¥è°ƒè¯•å™¨ï¼‰ã€‚Logè¾“å‡ºæˆä¸ºäº†æœ€å¸¸ç”¨ã€æœ€æœ‰æ•ˆçš„è°ƒè¯•æ–¹å¼ã€‚ä½†ç›´æ¥ä½¿ç”¨ printf ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š\næ€§èƒ½å¼€é”€å¤§ï¼šæ ¼å¼å¤„ç†ã€æ•°æ®ä¼ è¾“ï¼ˆå¦‚é€šè¿‡UARTï¼‰éå¸¸è€—æ—¶ï¼Œå¯èƒ½æ”¹å˜å®æ—¶ç¨‹åºçš„è¡Œä¸ºã€‚ ä»£ç è†¨èƒ€ï¼šè°ƒè¯•å®Œæˆåéœ€è¦æ‰‹åŠ¨åˆ é™¤æˆ–æ³¨é‡Šæ‰å¤§é‡æ‰“å°è¯­å¥ï¼Œè´¹æ—¶è´¹åŠ›ã€‚ ä¿¡æ¯ä¸è¶³ï¼šæ™®é€šçš„ printf(\u0026quot;Value: %d\u0026quot;, x) æ— æ³•è‡ªåŠ¨æä¾›æ–‡ä»¶åã€è¡Œå·ã€å‡½æ•°åç­‰å…³é”®ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨å®ï¼ˆMacroï¼‰æ¥æ„å»ºä¸€ä¸ªå¼ºå¤§çš„Logç³»ç»Ÿã€‚å®ƒå¯ä»¥åœ¨ç¼–è¯‘æœŸçµæ´»åœ°æ§åˆ¶Logçš„å¼€å¯/å…³é—­ã€ä¸°å¯Œä¿¡æ¯ï¼Œå¹¶ä¸”å‡ ä¹æ— è¿è¡Œæ—¶å¼€é”€ã€‚\näºŒã€åŸºç¡€å…¥é—¨ï¼šä»æœ€ç®€å•çš„å®Logå¼€å§‹\rè®©æˆ‘ä»¬ä»ä¸€ä¸ªæœ€åŸºç¡€çš„å®å¼€å§‹ï¼Œè§£å†³æ‰‹åŠ¨æ·»åŠ å‰ç¼€çš„é—®é¢˜ã€‚\n1// åŸºç¡€ç‰ˆæœ¬ - æ·»åŠ å›ºå®šå‰ç¼€ 2#define LOG(msg) printf(\u0026#34;[LOG] %s\\n\u0026#34;, msg) 3 4void main() { 5 LOG(\u0026#34;System Started\u0026#34;); // å±•å¼€ä¸º: printf(\u0026#34;[LOG] %s\\n\u0026#34;, \u0026#34;System Started\u0026#34;) 6 int error = 5; 7 LOG(\u0026#34;Error occurred!\u0026#34;); 8} è¾“å‡ºï¼š\n1[LOG] System Started 2[LOG] Error occurred! ä¼˜ç‚¹ï¼šæ— éœ€é‡å¤å†™å‰ç¼€ [LOG]ã€‚\nä¸‰ã€è¿›é˜¶æŠ€å·§ï¼šè·å–ç¼–è¯‘ç¯å¢ƒä¿¡æ¯\rCæ ‡å‡†é¢„å®šä¹‰äº†ä¸€äº›å®ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è·å–å®è´µçš„è°ƒè¯•ä¿¡æ¯ï¼š\n__FILE__ï¼š å½“å‰æºæ–‡ä»¶å __LINE__ï¼š å½“å‰è¡Œå· __func__ï¼š å½“å‰å‡½æ•°å (C99æ ‡å‡†) __DATE__, __TIME__ï¼š ç¼–è¯‘æ—¥æœŸå’Œæ—¶é—´ 1// è¿›é˜¶ç‰ˆæœ¬ - å¸¦æ–‡ä»¶åå’Œè¡Œå· 2#define LOG(msg) printf(\u0026#34;[%s, line %d] %s\\n\u0026#34;, __FILE__, __LINE__, msg) 3 4void main() { 5 LOG(\u0026#34;Sensor reading failed\u0026#34;); 6} è¾“å‡ºï¼š\n1[main.c, line 25] Sensor reading failed ç°åœ¨ä½ èƒ½ç²¾å‡†å®šä½åˆ°å“ªä¸€è¡Œä»£ç å‡ºäº†å•é¡Œï¼\nå››ã€å¯å˜å‚æ•°å®ï¼šæ‰“é€ ä¸‡èƒ½æ ¼å¼åŒ–Log\råŸºç¡€çš„å®åªèƒ½è¾“å‡ºå­—ç¬¦ä¸²ã€‚ä¸ºäº†æ”¯æŒåƒ printf ä¸€æ ·çš„æ ¼å¼åŒ–è¾“å‡ºï¼ˆå¦‚ %d, %fï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¯å˜å‚æ•°å®ï¼ˆ... å’Œ __VA_ARGS__ï¼‰ã€‚\n1// ä¸‡èƒ½ç‰ˆæœ¬ - æ”¯æŒæ ¼å¼åŒ–è¾“å‡º 2#define LOG(format, ...) printf(\u0026#34;[%s, %s, line %d] \u0026#34; format \u0026#34;\\n\u0026#34;, __FILE__, __func__, __LINE__, ##__VA_ARGS__) 3 4void main() { 5 int temperature = 25; 6 int humidity = 60; 7 const char* sensor_name = \u0026#34;DHT11\u0026#34;; 8 9 LOG(\u0026#34;System Booted\u0026#34;); 10 LOG(\u0026#34;%s - Temp: %dÂ°C, Humidity: %d%%\u0026#34;, sensor_name, temperature, humidity); 11} è¾“å‡ºï¼š\n1[main.c, main, line 35] System Booted 2[main.c, main, line 36] DHT11 - Temp: 25Â°C, Humidity: 60% ä»£ç è§£é‡Šï¼š\n...ï¼š è¡¨ç¤ºå®æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ã€‚ __VA_ARGS__ï¼š ä»£è¡¨ ... éƒ¨åˆ†çš„æ‰€æœ‰å‚æ•°ã€‚ ##__VA_ARGS__ï¼š ## çš„ä½œç”¨æ˜¯å½“å¯å˜å‚æ•°ä¸ºç©ºæ—¶ï¼Œè‡ªåŠ¨å»æ‰å‰é¢çš„é€—å· ,ï¼Œé˜²æ­¢è¯­æ³•é”™è¯¯ã€‚è¿™æ˜¯GCCçš„æ‰©å±•ï¼Œåœ¨å¤§å¤šæ•°åµŒå…¥å¼ç¼–è¯‘å™¨ä¸­éƒ½æ”¯æŒã€‚ äº”ã€æ ¸å¿ƒå®æˆ˜ï¼šåˆ†çº§Logä¸ç¼–è¯‘æ§åˆ¶\rä¸€ä¸ªä¸“ä¸šçš„Logç³»ç»Ÿå¿…é¡»æœ‰ç­‰çº§åˆ’åˆ†ï¼ˆå¦‚Error, Warning, Info, Debugï¼‰å’Œç¼–è¯‘å¼€å…³ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®æ¡ä»¶ç¼–è¯‘æ¥å®ç°ã€‚\n1. å®šä¹‰Logç­‰çº§\r1typedef enum { 2 LOG_LEVEL_ERROR, 3 LOG_LEVEL_WARNING, 4 LOG_LEVEL_INFO, 5 LOG_LEVEL_DEBUG, 6 LOG_LEVEL_NONE // ç”¨äºå…³é—­æ‰€æœ‰Log 7} log_level_t; 8 9// ç¼–è¯‘æ—¶é…ç½®ï¼šè®¾ç½®å½“å‰æ‰€éœ€çš„Logçº§åˆ« 10#define CURRENT_LOG_LEVEL LOG_LEVEL_DEBUG 2. åˆ›å»ºåˆ†çº§Logå®\r1// æ ¹æ® CURRENT_LOG_LEVEL å†³å®šæ˜¯å¦ç¼–è¯‘å¯¹åº”çš„Logå® 2#if CURRENT_LOG_LEVEL \u0026gt;= LOG_LEVEL_ERROR 3 #define LOG_ERROR(format, ...) printf(\u0026#34;[ERROR] \u0026#34; format \u0026#34;\\n\u0026#34;, ##__VA_ARGS__) 4#else 5 #define LOG_ERROR(format, ...) // å®šä¹‰ä¸ºç©ºï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥ç§»é™¤è¯¥è¡Œä»£ç  6#endif 7 8#if CURRENT_LOG_LEVEL \u0026gt;= LOG_LEVEL_WARNING 9 #define LOG_WARNING(format, ...) printf(\u0026#34;[WARN] \u0026#34; format \u0026#34;\\n\u0026#34;, ##__VA_ARGS__) 10#else 11 #define LOG_WARNING(format, ...) 12#endif 13 14#if CURRENT_LOG_LEVEL \u0026gt;= LOG_LEVEL_INFO 15 #define LOG_INFO(format, ...) printf(\u0026#34;[INFO] \u0026#34; format \u0026#34;\\n\u0026#34;, ##__VA_ARGS__) 16#else 17 #define LOG_INFO(format, ...) 18#endif 19 20#if CURRENT_LOG_LEVEL \u0026gt;= LOG_LEVEL_DEBUG 21 #define LOG_DEBUG(format, ...) printf(\u0026#34;[DEBUG] [%s, line %d] \u0026#34; format \u0026#34;\\n\u0026#34;, __FILE__, __LINE__, ##__VA_ARGS__) 22#else 23 #define LOG_DEBUG(format, ...) 24#endif 3. ä½¿ç”¨ç¤ºä¾‹\r1void read_sensor() { 2 int value = read_adc(); 3 LOG_DEBUG(\u0026#34;ADC raw value: %d\u0026#34;, value); // è¿™è¡Œåªæœ‰åœ¨DEBUGçº§åˆ«ä¸‹æ‰ä¼šè¢«ç¼–è¯‘è¿›ç¨‹åº 4 5 if (value == -1) { 6 LOG_ERROR(\u0026#34;Sensor communication failed!\u0026#34;); 7 return; 8 } 9 10 if (value \u0026gt; 900) { 11 LOG_WARNING(\u0026#34;Value is approaching maximum: %d\u0026#34;, value); 12 } 13 14 LOG_INFO(\u0026#34;Sensor read successfully: %d\u0026#34;, value); 15} æœ€ç»ˆæ•ˆæœï¼š\nåœ¨å¼€å‘é˜¶æ®µï¼Œå°† CURRENT_LOG_LEVEL è®¾ä¸º LOG_LEVEL_DEBUGï¼Œæ‰€æœ‰Logä¿¡æ¯éƒ½ä¼šè¾“å‡ºã€‚ åœ¨å‘å¸ƒé˜¶æ®µï¼Œå°†å…¶è®¾ä¸º LOG_LEVEL_ERROR æˆ– LOG_LEVEL_NONEã€‚æ‰€æœ‰ä½äºERRORçº§åˆ«çš„Logï¼ˆDEBUG, INFO, WARNINGï¼‰ä¼šåœ¨ç¼–è¯‘æ—¶è¢«å®Œå…¨ç§»é™¤ï¼Œä¸å ä»»ä½•ä»£ç ç©ºé—´ï¼Œä¹Ÿä¸äº§ç”Ÿä»»ä½•è¿è¡Œæ—¶å¼€é”€ï¼ å…­ã€é«˜çº§æŠ€å·§ï¼šè‡ªåŠ¨æ·»åŠ æ¢è¡Œä¸é¢œè‰²ï¼ˆå¯é€‰ï¼‰\r1. è‡ªåŠ¨æ¢è¡Œ\rå¯ä»¥ä¿®æ”¹å®ï¼Œè‡ªåŠ¨åœ¨æœ«å°¾æ·»åŠ æ¢è¡Œç¬¦ \\nï¼Œè®©è°ƒç”¨æ›´ç®€æ´ã€‚\n1// åœ¨æ ¼å¼å­—ç¬¦ä¸²åè‡ªåŠ¨æ·»åŠ æ¢è¡Œï¼Œç”¨æˆ·æ— éœ€å†å†™ \\n 2#define LOG_INFO(format, ...) printf(\u0026#34;[INFO] \u0026#34; format \u0026#34;\\n\u0026#34;, ##__VA_ARGS__) 3 4// ä½¿ç”¨ 5LOG_INFO(\u0026#34;Temperature is %d\u0026#34;, temp); // è¾“å‡ºåä¼šè‡ªåŠ¨æ¢è¡Œ 2. ç»ˆç«¯é¢œè‰²ï¼ˆå¦‚æœç»ˆç«¯æ”¯æŒï¼‰\ré€šè¿‡æ·»åŠ ANSIè½¬ä¹‰åºåˆ—ï¼Œè®©ä¸åŒçº§åˆ«çš„Logåœ¨æ”¯æŒé¢œè‰²çš„ç»ˆç«¯ï¼ˆå¦‚Tera Term, PuTTYï¼‰ä¸Šä»¥ä¸åŒé¢œè‰²æ˜¾ç¤ºï¼Œæ›´æ˜“é˜…è¯»ã€‚\n1// ANSI é¢œè‰²ä»£ç  2#define ANSI_COLOR_RED \u0026#34;\\x1b[31m\u0026#34; 3#define ANSI_COLOR_YELLOW \u0026#34;\\x1b[33m\u0026#34; 4#define ANSI_COLOR_GREEN \u0026#34;\\x1b[32m\u0026#34; 5#define ANSI_COLOR_BLUE \u0026#34;\\x1b[34m\u0026#34; 6#define ANSI_COLOR_RESET \u0026#34;\\x1b[0m\u0026#34; 7 8// å¸¦é¢œè‰²çš„Logå® 9#define LOG_ERROR(format, ...) printf(ANSI_COLOR_RED \u0026#34;[ERROR] \u0026#34; format ANSI_COLOR_RESET \u0026#34;\\n\u0026#34;, ##__VA_ARGS__) 10#define LOG_WARNING(format, ...) printf(ANSI_COLOR_YELLOW \u0026#34;[WARN] \u0026#34; format ANSI_COLOR_RESET \u0026#34;\\n\u0026#34;, ##__VA_ARGS__) 11#define LOG_INFO(format, ...) printf(ANSI_COLOR_GREEN \u0026#34;[INFO] \u0026#34; format ANSI_COLOR_RESET \u0026#34;\\n\u0026#34;, ##__VA_ARGS__) 12#define LOG_DEBUG(format, ...) printf(ANSI_COLOR_BLUE \u0026#34;[DEBUG] [%s, line %d] \u0026#34; format ANSI_COLOR_RESET \u0026#34;\\n\u0026#34;, __FILE__, __LINE__, ##__VA_ARGS__) ä¸ƒã€æ€»ç»“ä¸æœ€ä½³å®è·µ\rä½¿ç”¨å¯å˜å‚æ•°å®ï¼š#define LOG(format, ...) æ¥æ”¯æŒæ ¼å¼åŒ–è¾“å‡ºã€‚ åˆ©ç”¨å†…ç½®å®ï¼š__FILE__, __LINE__, __func__ æ¥è‡ªåŠ¨æ·»åŠ ä¸Šä¸‹æ–‡ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚ å®ç°åˆ†çº§ç³»ç»Ÿï¼šä½¿ç”¨ #if CURRENT_LOG_LEVEL \u0026gt;= ... æ¡ä»¶ç¼–è¯‘æ¥çµæ´»æ§åˆ¶Logçš„å¼€å¯/å…³é—­ã€‚è¿™æ˜¯æœ€é‡è¦çš„ä¼˜åŒ–ã€‚ å‘å¸ƒæ—¶å…³é—­Debug Logï¼šå°† CURRENT_LOG_LEVEL è®¾ä¸º LOG_LEVEL_ERROR æˆ– LOG_LEVEL_NONEï¼Œå¯ä»¥æå¤§å‡å°‘ä»£ç ä½“ç§¯ï¼Œé¿å…æ€§èƒ½æŸè€—ï¼Œå¹¶ä¿æŠ¤è°ƒè¯•ä¿¡æ¯ã€‚ é›†ä¸­ç®¡ç†ï¼šå°†æ‰€æœ‰çš„Logå®å®šä¹‰æ”¾åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ï¼ˆå¦‚ debug_log.hï¼‰ä¸­ï¼Œæ•´ä¸ªé¡¹ç›®éƒ½åŒ…å«å®ƒï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ã€‚ ","date":"2025-09-01T21:33:01+08:00","image":"https://tuchuang.liushuiyu.cn/img/c-jingjie-logo20250901.webp","permalink":"https://blog.liushuiyu.cn/p/c%E8%AF%AD%E8%A8%80%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%E5%AE%8F%E5%9C%A8log%E8%B0%83%E8%AF%95%E4%B8%AD%E7%9A%84%E8%89%BA%E6%9C%AF/","title":"Cè¯­è¨€è¿›é˜¶æ•™ç¨‹ï¼šå®åœ¨Logè°ƒè¯•ä¸­çš„è‰ºæœ¯"},{"content":"ä¸€ã€æ ¸å¿ƒæ¦‚å¿µï¼šä»€ä¹ˆæ˜¯ std::unique_ptrï¼Ÿ\rstd::unique_ptr æ˜¯ C++11 å¼•å…¥çš„ä¸€ç§ç‹¬å æ‰€æœ‰æƒçš„æ™ºèƒ½æŒ‡é’ˆã€‚å®ƒçš„è®¾è®¡å“²å­¦æ˜¯ï¼š\nç‹¬å æ€§ï¼šåŒä¸€æ—¶é—´å†…ï¼Œæœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ª unique_ptr æŒ‡å‘ä¸€ä¸ªç‰¹å®šçš„å¯¹è±¡ã€‚å®ƒæ— æ³•è¢«å¤åˆ¶ï¼ˆcopyï¼‰ã€‚ ç§»åŠ¨æ€§ï¼šæ‰€æœ‰æƒå¯ä»¥é€šè¿‡ std::move è½¬ç§»ç»™å¦ä¸€ä¸ª unique_ptrã€‚è½¬ç§»åï¼ŒåŸæ¥çš„æŒ‡é’ˆå˜ä¸º nullptrã€‚ è‡ªåŠ¨é‡Šæ”¾ï¼šå½“ unique_ptr ç¦»å¼€å…¶ä½œç”¨åŸŸï¼ˆè¢«é”€æ¯ï¼‰æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è°ƒç”¨ delete æˆ–æŒ‡å®šçš„åˆ é™¤å™¨æ¥é‡Šæ”¾å…¶æ‰€ç®¡ç†çš„å¯¹è±¡å†…å­˜ã€‚ åŸºæœ¬ç”¨æ³•ï¼š\n1#include \u0026lt;memory\u0026gt; 2 3class MyClass { 4public: 5 MyClass(int value) : data(value) {} 6 void doSomething() {} 7 int data; 8}; 9 10// 1. åˆ›å»ºä¸€ä¸ª unique_ptr (C++11 æ–¹å¼ - ä¸æ¨è) 11std::unique_ptr\u0026lt;MyClass\u0026gt; ptr1(new MyClass(10)); 12 13// 2. ä½¿ç”¨ make_unique (C++14 æ–¹å¼ - æ¨è) 14auto ptr2 = std::make_unique\u0026lt;MyClass\u0026gt;(20); 15 16// ä½¿ç”¨ -\u0026gt; æ“ä½œç¬¦è®¿é—®æˆå‘˜ 17ptr2-\u0026gt;doSomething(); 18// ä½¿ç”¨ * æ“ä½œç¬¦è§£å¼•ç”¨ 19(*ptr2).data = 30; 20 21// æ‰€æœ‰æƒè½¬ç§» 22std::unique_ptr\u0026lt;MyClass\u0026gt; ptr3 = std::move(ptr2); // ptr2 ç°åœ¨ä¸º nullptr 23// std::unique_ptr\u0026lt;MyClass\u0026gt; ptr4 = ptr3; // é”™è¯¯ï¼æ— æ³•å¤åˆ¶ äºŒã€std::make_unique çš„å‡ºç°\rstd::make_unique æ˜¯ C++14 æ‰åŠ å…¥æ ‡å‡†åº“çš„ï¼ˆä½†å¾ˆå®¹æ˜“åœ¨ C++11 ä¸­è‡ªå·±å®ç°ä¸€ä¸ªï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°æ¨¡æ¿ï¼Œç”¨äºåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªç®¡ç†ç€æ–°å¯¹è±¡çš„ std::unique_ptrã€‚\nå®ƒçš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ç›´æ¥ä½¿ç”¨ new æ„é€  unique_ptr æ—¶å­˜åœ¨çš„ç¼ºé™·ã€‚\nä¸‰ã€æ ¸å¿ƒåŒºåˆ«ä¸ä¸ºä»€ä¹ˆé¦–é€‰ make_unique\r1. å¼‚å¸¸å®‰å…¨æ€§ (æœ€å…³é”®çš„åŒºåˆ«ï¼)\rå±é™©åœºæ™¯ï¼š\n1void process(std::unique_ptr\u0026lt;MyClass\u0026gt; p1, std::unique_ptr\u0026lt;MyClass\u0026gt; p2); 2 3// ä½¿ç”¨ new çš„è°ƒç”¨æ–¹å¼ 4process(std::unique_ptr\u0026lt;MyClass\u0026gt;(new MyClass(100)), 5 std::unique_ptr\u0026lt;MyClass\u0026gt;(new MyClass(200))); // æ½œåœ¨å†…å­˜æ³„æ¼é£é™©ï¼ ç¼–è¯‘å™¨å¯èƒ½æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š\nnew MyClass(100) new MyClass(200) æ„é€ ç¬¬ä¸€ä¸ª unique_ptr æ„é€ ç¬¬äºŒä¸ª unique_ptr å¦‚æœåœ¨æ­¥éª¤2ä¹‹åã€æ­¥éª¤3ä¹‹å‰æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ª MyClass å¯¹è±¡å·²ç»åˆ†é…ä½†æ²¡æœ‰ä»»ä½•æ™ºèƒ½æŒ‡é’ˆç®¡ç†å®ƒï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚\nè§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ make_unique\n1process(std::make_unique\u0026lt;MyClass\u0026gt;(100), 2 std::make_unique\u0026lt;MyClass\u0026gt;(200)); // å¼‚å¸¸å®‰å…¨ï¼ make_unique å°† new å’Œ unique_ptr çš„æ„é€ å°è£…åœ¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨å†…ï¼Œæ¶ˆé™¤äº†ä¸­é—´çŠ¶æ€ï¼Œä¿è¯äº†å¼‚å¸¸å®‰å…¨ã€‚\n2. ä»£ç ç®€æ´æ€§ä¸å¯è¯»æ€§ (DRYåŸåˆ™)\rä½¿ç”¨ newï¼šè¿å DRY (Don\u0026rsquo;t Repeat Yourself) åŸåˆ™ã€‚ std::unique_ptr\u0026lt;MyClass\u0026gt; p(new MyClass(10)); // 'MyClass' å†™äº†ä¸¤æ¬¡ ä½¿ç”¨ make_uniqueï¼šåªéœ€æŒ‡å®šä¸€æ¬¡ç±»å‹ï¼Œé€šå¸¸ä¸ auto æ­é…ï¼Œéå¸¸å¹²å‡€ã€‚ auto p = std::make_unique\u0026lt;MyClass\u0026gt;(10); // æ¸…æ™°ç®€æ´ 3. æ½œåœ¨æ€§èƒ½ä¼˜åŠ¿\rä½¿ç”¨ newï¼šå¯èƒ½è¿›è¡Œä¸¤æ¬¡å†…å­˜åˆ†é…ï¼ˆä¸€æ¬¡å¯¹è±¡ï¼Œä¸€æ¬¡æ§åˆ¶å—ï¼‰ã€‚ ä½¿ç”¨ make_uniqueï¼šç¼–è¯‘å™¨æœ‰æœºä¼šå°†å¯¹è±¡å’Œæ§åˆ¶å—çš„å†…å­˜åˆ†é…åˆå¹¶ä¸ºä¸€æ¬¡æ“ä½œï¼Œå‡å°‘å†…å­˜å¼€é”€å’Œç¢ç‰‡ã€‚ å››ã€ä½¿ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹\rä¸ auto å…³é”®å­—æ­é…ä½¿ç”¨ï¼šè¿™æ˜¯æœ€åœ°é“çš„å†™æ³•ã€‚\n1auto widget = std::make_unique\u0026lt;MyWidget\u0026gt;(\u0026#34;name\u0026#34;, 123); ä¼ é€’å‚æ•°ï¼šmake_unique çš„å‚æ•°å°±æ˜¯ä¼ é€’ç»™æ„é€ å‡½æ•°å‚æ•°ã€‚\n1class Person { 2 Person(std::string name, int age); 3}; 4auto person = std::make_unique\u0026lt;Person\u0026gt;(\u0026#34;Alice\u0026#34;, 30); // ç­‰ä»·äº new Person(\u0026#34;Alice\u0026#34;, 30) ç®¡ç†æ•°ç»„ï¼šunique_ptr æ”¯æŒæ•°ç»„ï¼Œä½†è¯­æ³•ç•¥æœ‰ä¸åŒã€‚\n1// ç®¡ç†ä¸€ä¸ª int æ•°ç»„ 2auto arr = std::make_unique\u0026lt;int[]\u0026gt;(10); // åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º10çš„intæ•°ç»„ 3arr[0] = 42; 4 5// ä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼ï¼ˆéœ€è¦æŒ‡å®šåˆ é™¤å™¨ï¼‰ 6std::unique_ptr\u0026lt;int[], std::default_delete\u0026lt;int[]\u0026gt;\u0026gt; arr2(new int[10]); è‡ªå®šä¹‰åˆ é™¤å™¨ï¼šmake_unique ä¸æ”¯æŒä¼ é€’è‡ªå®šä¹‰åˆ é™¤å™¨ã€‚è¿™æ˜¯ä½ éœ€è¦ç›´æ¥ä½¿ç”¨ new æ„é€  unique_ptr çš„ä¸»è¦åœºæ™¯ã€‚\n1// ä½¿ç”¨ make_uniqueï¼Œæ— æ³•æŒ‡å®šåˆ é™¤å™¨ 2auto p1 = std::make_unique\u0026lt;MyClass\u0026gt;(); 3 4// éœ€è¦è‡ªå®šä¹‰åˆ é™¤å™¨æ—¶ï¼Œå¿…é¡»ç›´æ¥æ„é€  unique_ptr 5auto FileDeleter = [](FILE* fp) { if(fp) fclose(fp); }; 6std::unique_ptr\u0026lt;FILE, decltype(FileDeleter)\u0026gt; file_ptr(fopen(\u0026#34;data.txt\u0026#34;, \u0026#34;r\u0026#34;), FileDeleter); è·å–åŸå§‹æŒ‡é’ˆï¼šä½¿ç”¨ .get() æ–¹æ³•ã€‚æ³¨æ„ï¼šä¸è¦æ‰‹åŠ¨ delete è¿™ä¸ªæŒ‡é’ˆï¼\n1auto ptr = std::make_unique\u0026lt;MyClass\u0026gt;(); 2MyClass* raw_ptr = ptr.get(); // ç”¨äºè°ƒç”¨ä¸€äº›éœ€è¦åŸå§‹æŒ‡é’ˆçš„API 3some_legacy_api(raw_ptr); é‡ç½®ä¸é‡Šæ”¾ï¼š\n1auto ptr = std::make_unique\u0026lt;MyClass\u0026gt;(); 2ptr.reset(); // é‡Šæ”¾å½“å‰ç®¡ç†çš„å¯¹è±¡ï¼Œptrå˜ä¸ºnullptr 3ptr.reset(new MyClass); // é‡Šæ”¾æ—§å¯¹è±¡ï¼Œç®¡ç†æ–°å¯¹è±¡ 4 5MyClass* raw_ptr = ptr.release(); // é‡Šæ”¾æ‰€æœ‰æƒï¼Œè¿”å›åŸå§‹æŒ‡é’ˆï¼Œptrå˜ä¸ºnullptrã€‚ 6 // ç°åœ¨ä½ å¿…é¡»æ‰‹åŠ¨ç®¡ç† raw_ptr çš„ç”Ÿå‘½å‘¨æœŸï¼ äº”ã€å–èˆæ€»ç»“ï¼šä½•æ—¶ç”¨ make_uniqueï¼Œä½•æ—¶ç”¨ newï¼Ÿ\råœºæ™¯ æ¨èæ–¹å¼ ç†ç”± ç»å¤§å¤šæ•°æƒ…å†µ std::make_unique\u0026lt;T\u0026gt;(...) å¼‚å¸¸å®‰å…¨ã€ä»£ç ç®€æ´ã€æ€§èƒ½æ›´ä¼˜ã€‚æ˜¯ç°ä»£C++çš„æƒ¯ç”¨æ³•ã€‚ éœ€è¦è‡ªå®šä¹‰åˆ é™¤å™¨ std::unique_ptr\u0026lt;T, D\u0026gt;(new T(...), deleter) make_unique æ— æ³•ä¼ é€’è‡ªå®šä¹‰åˆ é™¤å™¨ã€‚ éœ€è¦å¤„ç†é—ç•™ä»£ç æˆ–ç‰¹æ®Šå†…å­˜ ç›´æ¥æ„é€  unique_ptr ä¾‹å¦‚ï¼Œå¯¹è±¡æ˜¯ç”±ç‰¹æ®Šçš„ malloc æˆ–ç¬¬ä¸‰æ–¹åº“å‡½æ•°åˆ†é…çš„ï¼Œéœ€è¦é…å¥—çš„è‡ªå®šä¹‰åˆ é™¤å™¨ã€‚ é»„é‡‘æ³•åˆ™ï¼šä¼˜å…ˆä½¿ç”¨ std::make_unique ã€‚åªæœ‰åœ¨å®ƒæ— æ³•æ»¡è¶³éœ€æ±‚ï¼ˆä¸»è¦æ˜¯è‡ªå®šä¹‰åˆ é™¤å™¨ï¼‰æ—¶ï¼Œæ‰é€€å›åˆ°ç›´æ¥ä½¿ç”¨ new æ¥æ„é€  std::unique_ptr ã€‚\n","date":"2025-09-01T19:17:44+08:00","image":"https://tuchuang.liushuiyu.cn/img/ptr-logo20250901.webp","permalink":"https://blog.liushuiyu.cn/p/c-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88unique_ptr%E4%B8%8Emake_unique/","title":"C++æ™ºèƒ½æŒ‡é’ˆunique_ptrâ€‹ä¸make_unique"},{"content":"æ¦‚è¿°\råœ¨C++ä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºã€å¤åˆ¶ã€ç§»åŠ¨å’Œé”€æ¯æ˜¯ç”±ä¸€ç»„ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ç®¡ç†çš„ï¼Œè¿™äº›å‡½æ•°ç»Ÿç§°ä¸º\u0026quot;æ‹·è´æ§åˆ¶æˆå‘˜\u0026quot;ã€‚ç†è§£è¿™äº›å‡½æ•°çš„å·¥ä½œåŸç†å¯¹äºç¼–å†™å®‰å…¨ã€é«˜æ•ˆçš„C++ä»£ç è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†è¯¦ç»†è®²è§£å„ç§æ„é€ å‡½æ•°å’Œæ‹·è´æ§åˆ¶æˆå‘˜çš„ä½¿ç”¨æ–¹æ³•å’ŒåŒºåˆ«ã€‚\næ„é€ å‡½æ•°å®¶æ—\r1. é»˜è®¤æ„é€ å‡½æ•° (Default Constructor)\ré»˜è®¤æ„é€ å‡½æ•°æ˜¯åœ¨æ²¡æœ‰æä¾›ä»»ä½•å‚æ•°æ—¶è°ƒç”¨çš„æ„é€ å‡½æ•°ã€‚\n1class Student { 2public: 3 // é»˜è®¤æ„é€ å‡½æ•° 4 Student() : name(\u0026#34;æœªçŸ¥\u0026#34;), age(0) { 5 cout \u0026lt;\u0026lt; \u0026#34;é»˜è®¤æ„é€ å‡½æ•°è¢«è°ƒç”¨\u0026#34; \u0026lt;\u0026lt; endl; 6 } 7 8 string name; 9 int age; 10}; 11 12// ä½¿ç”¨ç¤ºä¾‹ 13Student s1; // è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•° 14Student s2 = Student(); // æ˜¾å¼è°ƒç”¨ 2. å‚æ•°åŒ–æ„é€ å‡½æ•° (Parameterized Constructor)\ræ¥å—å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œç”¨äºåˆå§‹åŒ–å¯¹è±¡æˆå‘˜ã€‚\n1class Student { 2public: 3 // å‚æ•°åŒ–æ„é€ å‡½æ•° 4 Student(string n, int a) : name(n), age(a) { 5 cout \u0026lt;\u0026lt; \u0026#34;å‚æ•°åŒ–æ„é€ å‡½æ•°è¢«è°ƒç”¨\u0026#34; \u0026lt;\u0026lt; endl; 6 } 7 8 string name; 9 int age; 10}; 11 12// ä½¿ç”¨ç¤ºä¾‹ 13Student s1(\u0026#34;å¼ ä¸‰\u0026#34;, 20); 14Student s2 = Student(\u0026#34;æå››\u0026#34;, 21); 3. æ‹·è´æ„é€ å‡½æ•° (Copy Constructor)\rç”¨äºç”¨ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡ã€‚\n1class Student { 2public: 3 Student(string n, int a) : name(n), age(a) {} 4 5 // æ‹·è´æ„é€ å‡½æ•° 6 Student(const Student\u0026amp; other) 7 : name(other.name + \u0026#34;(å‰¯æœ¬)\u0026#34;), age(other.age) { 8 cout \u0026lt;\u0026lt; \u0026#34;æ‹·è´æ„é€ å‡½æ•°è¢«è°ƒç”¨\u0026#34; \u0026lt;\u0026lt; endl; 9 } 10 11 string name; 12 int age; 13}; 14 15// ä½¿ç”¨ç¤ºä¾‹ 16Student s1(\u0026#34;å¼ ä¸‰\u0026#34;, 20); 17Student s2 = s1; // è°ƒç”¨æ‹·è´æ„é€ å‡½æ•° 18Student s3(s1); // å¦ä¸€ç§è°ƒç”¨æ–¹å¼ 4. ç§»åŠ¨æ„é€ å‡½æ•° (Move Constructor)\rC++11å¼•å…¥ï¼Œç”¨äº\u0026quot;å·å–\u0026quot;ä¸´æ—¶å¯¹è±¡çš„èµ„æºï¼Œæé«˜æ€§èƒ½ã€‚\n1class Student { 2public: 3 // ç§»åŠ¨æ„é€ å‡½æ•° 4 Student(Student\u0026amp;\u0026amp; other) noexcept 5 : name(std::move(other.name)), age(other.age) { 6 other.age = 0; // æºå¯¹è±¡ç½®ä¸ºç©ºçŠ¶æ€ 7 cout \u0026lt;\u0026lt; \u0026#34;ç§»åŠ¨æ„é€ å‡½æ•°è¢«è°ƒç”¨\u0026#34; \u0026lt;\u0026lt; endl; 8 } 9 10 string name; 11 int age; 12}; 13 14// ä½¿ç”¨ç¤ºä¾‹ 15Student createStudent() { 16 return Student(\u0026#34;ä¸´æ—¶å­¦ç”Ÿ\u0026#34;, 19); // å¯èƒ½è§¦å‘ç§»åŠ¨æ„é€  17} 18Student s = createStudent(); // ç§»åŠ¨æ„é€  æ‹·è´æ§åˆ¶æˆå‘˜\r1. æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ (Copy Assignment Operator)\rç”¨äºä¸¤ä¸ªå·²å­˜åœ¨å¯¹è±¡ä¹‹é—´çš„èµ‹å€¼æ“ä½œã€‚\n1class Student { 2public: 3 // æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ 4 Student\u0026amp; operator=(const Student\u0026amp; other) { 5 if (this != \u0026amp;other) { // é˜²æ­¢è‡ªèµ‹å€¼ 6 name = other.name; 7 age = other.age; 8 cout \u0026lt;\u0026lt; \u0026#34;æ‹·è´èµ‹å€¼è¿ç®—ç¬¦è¢«è°ƒç”¨\u0026#34; \u0026lt;\u0026lt; endl; 9 } 10 return *this; 11 } 12 13 string name; 14 int age; 15}; 16 17// ä½¿ç”¨ç¤ºä¾‹ 18Student s1(\u0026#34;å¼ ä¸‰\u0026#34;, 20); 19Student s2(\u0026#34;æå››\u0026#34;, 21); 20s2 = s1; // è°ƒç”¨æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ 2. ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ (Move Assignment Operator)\rç”¨äºç»™å·²å­˜åœ¨å¯¹è±¡èµ‹å€¼æ—¶\u0026quot;å·å–\u0026quot;å¦ä¸€ä¸ªå¯¹è±¡çš„èµ„æºã€‚\n1class Student { 2public: 3 // ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ 4 Student\u0026amp; operator=(Student\u0026amp;\u0026amp; other) noexcept { 5 if (this != \u0026amp;other) { 6 name = std::move(other.name); 7 age = other.age; 8 other.age = 0; // æºå¯¹è±¡ç½®ç©º 9 cout \u0026lt;\u0026lt; \u0026#34;ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦è¢«è°ƒç”¨\u0026#34; \u0026lt;\u0026lt; endl; 10 } 11 return *this; 12 } 13 14 string name; 15 int age; 16}; 17 18// ä½¿ç”¨ç¤ºä¾‹ 19Student s1(\u0026#34;å¼ ä¸‰\u0026#34;, 20); 20Student s2(\u0026#34;æå››\u0026#34;, 21); 21s2 = std::move(s1); // ç§»åŠ¨èµ‹å€¼ 3. ææ„å‡½æ•° (Destructor)\råœ¨å¯¹è±¡é”€æ¯æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œç”¨äºæ¸…ç†èµ„æºã€‚\n1class Student { 2public: 3 Student() { 4 data = new int[100]; // åŠ¨æ€åˆ†é…å†…å­˜ 5 } 6 7 // ææ„å‡½æ•° 8 ~Student() { 9 delete[] data; // é‡Šæ”¾å†…å­˜ 10 cout \u0026lt;\u0026lt; \u0026#34;ææ„å‡½æ•°è¢«è°ƒç”¨\u0026#34; \u0026lt;\u0026lt; endl; 11 } 12 13 int* data; 14}; 15 16// ä½¿ç”¨ç¤ºä¾‹ 17{ 18 Student s; // æ„é€ å‡½æ•°è¢«è°ƒç”¨ 19} // ç¦»å¼€ä½œç”¨åŸŸï¼Œææ„å‡½æ•°è¢«è°ƒç”¨ å…³é”®åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯\rç§»åŠ¨æ„é€  vs ç§»åŠ¨èµ‹å€¼\rç‰¹æ€§ ç§»åŠ¨æ„é€ å‡½æ•° ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ ç”¨é€” åˆ›å»ºæ–°å¯¹è±¡ ç»™å·²æœ‰å¯¹è±¡èµ‹å€¼ å‡½æ•°ç­¾å Student(Student\u0026amp;\u0026amp;) operator=(Student\u0026amp;\u0026amp;) è¿”å›å€¼ æ—  Student\u0026amp; èµ„æºæ¸…ç† ä¸éœ€è¦ éœ€è¦å…ˆæ¸…ç†è‡ªèº«èµ„æº è‡ªèµ‹å€¼æ£€æŸ¥ ä¸éœ€è¦ éœ€è¦ è°ƒç”¨æ—¶æœº åˆ›å»ºæ–°å¯¹è±¡æ—¶ å·²æœ‰å¯¹è±¡èµ‹å€¼æ—¶ ç§»åŠ¨æ„é€ å‡½æ•°ç¤ºä¾‹ï¼š\n1// åˆ›å»ºæ–°å¯¹è±¡å¹¶\u0026#34;å·å–\u0026#34;èµ„æº 2Student s2 = std::move(s1); // ç§»åŠ¨æ„é€  ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ç¤ºä¾‹ï¼š\n1// ç»™å·²æœ‰å¯¹è±¡èµ‹å€¼å¹¶\u0026#34;å·å–\u0026#34;èµ„æº 2Student s2(\u0026#34;æå››\u0026#34;, 21); 3s2 = std::move(s1); // ç§»åŠ¨èµ‹å€¼ æ‹·è´æ„é€  vs ç§»åŠ¨æ„é€ \rç‰¹æ€§ æ‹·è´æ„é€ å‡½æ•° ç§»åŠ¨æ„é€ å‡½æ•° å‚æ•°ç±»å‹ const Student\u0026amp; Student\u0026amp;\u0026amp; èµ„æºå¤„ç† æ·±æ‹·è´èµ„æº è½¬ç§»èµ„æºæ‰€æœ‰æƒ æºå¯¹è±¡çŠ¶æ€ ä¿æŒä¸å˜ è¢«ç½®ä¸ºç©ºçŠ¶æ€ æ€§èƒ½ è¾ƒä½ï¼ˆéœ€è¦å¤åˆ¶ï¼‰ è¾ƒé«˜ï¼ˆåªéœ€è½¬ç§»ï¼‰ å®Œæ•´ç¤ºä¾‹ç±»\r1class Student { 2private: 3 string name; 4 int age; 5 int* scores; // åŠ¨æ€æ•°ç»„ 6 int size; 7 8public: 9 // é»˜è®¤æ„é€ å‡½æ•° 10 Student() : name(\u0026#34;æœªçŸ¥\u0026#34;), age(0), scores(nullptr), size(0) { 11 cout \u0026lt;\u0026lt; \u0026#34;é»˜è®¤æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; 12 } 13 14 // å‚æ•°åŒ–æ„é€ å‡½æ•° 15 Student(string n, int a, int* s, int sz) 16 : name(n), age(a), size(sz) { 17 scores = new int[size]; 18 for (int i = 0; i \u0026lt; size; i++) scores[i] = s[i]; 19 cout \u0026lt;\u0026lt; \u0026#34;å‚æ•°åŒ–æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; 20 } 21 22 // æ‹·è´æ„é€ å‡½æ•° 23 Student(const Student\u0026amp; other) 24 : name(other.name), age(other.age), size(other.size) { 25 scores = new int[size]; 26 for (int i = 0; i \u0026lt; size; i++) scores[i] = other.scores[i]; 27 cout \u0026lt;\u0026lt; \u0026#34;æ‹·è´æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; 28 } 29 30 // ç§»åŠ¨æ„é€ å‡½æ•° 31 Student(Student\u0026amp;\u0026amp; other) noexcept 32 : name(std::move(other.name)), age(other.age), 33 scores(other.scores), size(other.size) { 34 other.scores = nullptr; 35 other.size = 0; 36 cout \u0026lt;\u0026lt; \u0026#34;ç§»åŠ¨æ„é€ å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; 37 } 38 39 // æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ 40 Student\u0026amp; operator=(const Student\u0026amp; other) { 41 if (this != \u0026amp;other) { 42 delete[] scores; 43 44 name = other.name; 45 age = other.age; 46 size = other.size; 47 scores = new int[size]; 48 for (int i = 0; i \u0026lt; size; i++) scores[i] = other.scores[i]; 49 50 cout \u0026lt;\u0026lt; \u0026#34;æ‹·è´èµ‹å€¼è¿ç®—ç¬¦\u0026#34; \u0026lt;\u0026lt; endl; 51 } 52 return *this; 53 } 54 55 // ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ 56 Student\u0026amp; operator=(Student\u0026amp;\u0026amp; other) noexcept { 57 if (this != \u0026amp;other) { 58 delete[] scores; 59 60 name = std::move(other.name); 61 age = other.age; 62 scores = other.scores; 63 size = other.size; 64 65 other.scores = nullptr; 66 other.size = 0; 67 68 cout \u0026lt;\u0026lt; \u0026#34;ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦\u0026#34; \u0026lt;\u0026lt; endl; 69 } 70 return *this; 71 } 72 73 // ææ„å‡½æ•° 74 ~Student() { 75 delete[] scores; 76 cout \u0026lt;\u0026lt; \u0026#34;ææ„å‡½æ•°\u0026#34; \u0026lt;\u0026lt; endl; 77 } 78}; æœ€ä½³å®è·µå’Œå»ºè®®\rRule of Three/Fiveï¼š\nå¦‚æœä½ éœ€è¦è‡ªå®šä¹‰ææ„å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°æˆ–æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½éœ€è¦å®šä¹‰æ‰€æœ‰ä¸‰ä¸ªï¼ˆRule of Threeï¼‰ C++11åï¼Œè¿˜åº”è€ƒè™‘ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼ˆRule of Fiveï¼‰ ä½¿ç”¨ = default å’Œ = deleteï¼š\n1class Student { 2public: 3 Student() = default; // ä½¿ç”¨ç¼–è¯‘å™¨ç”Ÿæˆçš„é»˜è®¤æ„é€ å‡½æ•° 4 Student(const Student\u0026amp;) = delete; // ç¦æ­¢æ‹·è´ 5 Student(Student\u0026amp;\u0026amp;) = default; // ä½¿ç”¨ç¼–è¯‘å™¨ç”Ÿæˆçš„ç§»åŠ¨æ„é€ å‡½æ•° 6}; ä¼˜å…ˆä½¿ç”¨ç§»åŠ¨è¯­ä¹‰ï¼šå¯¹äºç®¡ç†èµ„æºçš„ç±»ï¼Œå®ç°ç§»åŠ¨æ“ä½œå¯ä»¥æ˜¾è‘—æé«˜æ€§èƒ½ã€‚\næ³¨æ„å¼‚å¸¸å®‰å…¨ï¼šç§»åŠ¨æ“ä½œé€šå¸¸åº”è¯¥æ ‡è®°ä¸ºnoexceptã€‚\næ·±æ‹·è´ vs æµ…æ‹·è´ï¼š\næµ…æ‹·è´ï¼šåªå¤åˆ¶æŒ‡é’ˆï¼Œä¸å¤åˆ¶æŒ‡å‘çš„æ•°æ® æ·±æ‹·è´ï¼šå¤åˆ¶æŒ‡é’ˆå’ŒæŒ‡å‘çš„æ•°æ®ï¼ˆéœ€è¦è‡ªå·±å®ç°ï¼‰ æ€»ç»“\ré»˜è®¤æ„é€ ï¼šåˆ›å»ºç©ºå¯¹è±¡ å‚æ•°åŒ–æ„é€ ï¼šå¸¦å‚æ•°åˆå§‹åŒ– æ‹·è´æ„é€ ï¼šç”¨æ—§å¯¹è±¡åˆ›å»ºæ–°å¯¹è±¡ ç§»åŠ¨æ„é€ ï¼šå·å–ä¸´æ—¶å¯¹è±¡èµ„æºåˆ›å»ºæ–°å¯¹è±¡ æ‹·è´èµ‹å€¼ï¼šä¸¤ä¸ªå·²å­˜åœ¨å¯¹è±¡ä¹‹é—´çš„èµ‹å€¼ ç§»åŠ¨èµ‹å€¼ï¼šå·å–ä¸´æ—¶å¯¹è±¡èµ„æºç»™å·²å­˜åœ¨å¯¹è±¡èµ‹å€¼ ææ„å‡½æ•°ï¼šæ¸…ç†èµ„æº ","date":"2025-08-31T12:34:10+08:00","image":"https://tuchuang.liushuiyu.cn/img/copy-logo20250831.webp","permalink":"https://blog.liushuiyu.cn/p/c-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%8E%E6%8B%B7%E8%B4%9D%E6%8E%A7%E5%88%B6%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/","title":"C++æ„é€ å‡½æ•°ä¸æ‹·è´æ§åˆ¶å®Œå…¨æŒ‡å—"},{"content":"è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£\r1. C++ä¿¡å· â†’ QMLæ§½å‡½æ•°\rC++éƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)\r1// loginmanager.h 2class LoginManager : public QObject 3{ 4 Q_OBJECT 5public: 6 explicit LoginManager(QObject *parent = nullptr); 7 8 Q_INVOKABLE void attemptLogin(const QString \u0026amp;username, const QString \u0026amp;password); 9 10signals: 11 void loginResult(bool success, const QString \u0026amp;message); 12}; 13 14// loginmanager.cpp å®ç°attemptLogin 15void LoginManager::attemptLogin(const QString \u0026amp;username, const QString \u0026amp;password) 16{ 17 // éªŒè¯é€»è¾‘... 18 bool success = (username == \u0026#34;admin\u0026#34; \u0026amp;\u0026amp; password == \u0026#34;password\u0026#34;); 19 QString message = success ? \u0026#34;ç™»å½•æˆåŠŸ\u0026#34; : \u0026#34;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯\u0026#34;; 20 21 // å‘å‡ºä¿¡å· 22 emit loginResult(success, message); 23} 24 25// æ³¨å†Œåˆ°QML 26qmlRegisterType\u0026lt;LoginManager\u0026gt;(\u0026#34;MyApp\u0026#34;, 1, 0, \u0026#34;LoginManager\u0026#34;); QMLéƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼\r1import QtQuick 2.15 2import MyApp 1.0 3 4Item { 5 LoginManager { 6 id: loginManager 7 8 // è¯­æ³•ç³–ï¼šç›´æ¥ä½¿ç”¨on+ä¿¡å·å 9 onLoginResult: function(success, message) { 10 if (success) { 11 statusText.text = \u0026#34;æ¬¢è¿å›æ¥!\u0026#34;; 12 statusText.color = \u0026#34;green\u0026#34;; 13 } else { 14 statusText.text = message; 15 statusText.color = \u0026#34;red\u0026#34;; 16 } 17 } 18 } 19 20 Button { 21 text: \u0026#34;ç™»å½•\u0026#34; 22 onClicked: { 23\t//è°ƒç”¨C++ æš´éœ²çš„ Q_INVOKABLE attemptLogin æ–¹æ³• 24 loginManager.attemptLogin(usernameField.text, passwordField.text); 25 } 26 } 27 28 Text { 29 id: statusText 30 text: \u0026#34;è¯·ç™»å½•\u0026#34; 31 } 32} QMLéƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼\r1import QtQuick 2.15 2import MyApp 1.0 3 4Item { 5 LoginManager { 6 id: loginManager 7 } 8 9 // å®šä¹‰å¤„ç†å‡½æ•° 10 function handleLoginResult(success, message) { 11 if (success) { 12 statusText.text = \u0026#34;æ¬¢è¿å›æ¥!\u0026#34;; 13 statusText.color = \u0026#34;green\u0026#34;; 14 } else { 15 statusText.text = message; 16 statusText.color = \u0026#34;red\u0026#34;; 17 } 18 } 19 20 // æ˜¾å¼è¿æ¥ä¿¡å·å’Œæ§½ 21 Component.onCompleted: { 22\t//å°†C++çš„ä¿¡å·ä¸qmlè‡ªå·±å®šä¹‰å¤„ç†å‡½æ•°å…³è” 23 loginManager.loginResult.connect(handleLoginResult); 24 } 25 26 Button { 27 text: \u0026#34;ç™»å½•\u0026#34; 28 onClicked: { 29 loginManager.attemptLogin(usernameField.text, passwordField.text); 30 } 31 } 32 33 Text { 34 id: statusText 35 text: \u0026#34;è¯·ç™»å½•\u0026#34; 36 } 37} 2. QMLä¿¡å· â†’ C++æ§½å‡½æ•°\rQMLéƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)\r1import QtQuick 2.15 2 3Item { 4 id: root 5 6 // å®šä¹‰QMLä¿¡å· 7 signal userAction(string action, var data) 8 9 Button { 10 text: \u0026#34;å‘é€æ•°æ®\u0026#34; 11 onClicked: { 12 // è§¦å‘ä¿¡å· 13 root.userAction(\u0026#34;submit\u0026#34;, { 14 username: usernameField.text, 15 timestamp: new Date().toISOString() 16 }); 17 } 18 } 19} C++éƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼\r1// datahandler.h 2class DataHandler : public QObject 3{ 4 Q_OBJECT 5 6public: 7 explicit DataHandler(QObject *parent = nullptr); 8 9 // è®¾ç½®QMLæ ¹å¯¹è±¡ 10 void setRootObject(QObject *root); 11 12public slots: 13 // å¤„ç†QMLä¿¡å·çš„æ§½å‡½æ•° 14 void handleUserAction(const QString \u0026amp;action, const QVariant \u0026amp;data); 15}; 16 17// datahandler.cpp 18void DataHandler::setRootObject(QObject *root) 19{ 20 if (!root) return; 21 22 // ä½¿ç”¨QObject::connectçš„è¯­æ³•ç³–å½¢å¼ 23 // è‡ªåŠ¨è¿æ¥åŒåä¿¡å·å’Œæ§½ 24 QObject::connect(root, SIGNAL(userAction(QString,QVariant)), 25 this, SLOT(handleUserAction(QString,QVariant))); 26} 27 28void DataHandler::handleUserAction(const QString \u0026amp;action, const QVariant \u0026amp;data) 29{ 30 qDebug() \u0026lt;\u0026lt; \u0026#34;æ”¶åˆ°ç”¨æˆ·æ“ä½œ:\u0026#34; \u0026lt;\u0026lt; action; 31 if (data.canConvert\u0026lt;QVariantMap\u0026gt;()) { 32 QVariantMap dataMap = data.toMap(); 33 qDebug() \u0026lt;\u0026lt; \u0026#34;ç”¨æˆ·å:\u0026#34; \u0026lt;\u0026lt; dataMap[\u0026#34;username\u0026#34;].toString(); 34 qDebug() \u0026lt;\u0026lt; \u0026#34;æ—¶é—´æˆ³:\u0026#34; \u0026lt;\u0026lt; dataMap[\u0026#34;timestamp\u0026#34;].toString(); 35 } 36} C++éƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼\r1// datahandler.h 2class DataHandler : public QObject 3{ 4 Q_OBJECT 5 6public: 7 explicit DataHandler(QObject *parent = nullptr); 8 9 // è®¾ç½®QMLæ ¹å¯¹è±¡ 10 void setRootObject(QObject *root); 11 12public slots: 13 // å¤„ç†QMLä¿¡å·çš„æ§½å‡½æ•° 14 void handleUserAction(const QString \u0026amp;action, const QVariant \u0026amp;data); 15}; 16 17// datahandler.cpp 18void DataHandler::setRootObject(QObject *root) 19{ 20 if (!root) return; 21 22 // æ˜¾å¼connectæ–¹å¼ 23 connect(root, SIGNAL(userAction(QString,QVariant)), 24 this, SLOT(handleUserAction(QString,QVariant))); 25 26 // æˆ–ä½¿ç”¨æ–°è¯­æ³•ï¼ˆéœ€è¦å‡½æ•°æŒ‡é’ˆè½¬æ¢ï¼‰ 27 /* 28 connect(root, \u0026amp;QObject::destroyed, this, [this](){ 29 qDebug() \u0026lt;\u0026lt; \u0026#34;QMLæ ¹å¯¹è±¡å·²é”€æ¯\u0026#34;; 30 }); 31 */ 32} 33 34void DataHandler::handleUserAction(const QString \u0026amp;action, const QVariant \u0026amp;data) 35{ 36 qDebug() \u0026lt;\u0026lt; \u0026#34;æ”¶åˆ°ç”¨æˆ·æ“ä½œ:\u0026#34; \u0026lt;\u0026lt; action; 37 if (data.canConvert\u0026lt;QVariantMap\u0026gt;()) { 38 QVariantMap dataMap = data.toMap(); 39 qDebug() \u0026lt;\u0026lt; \u0026#34;ç”¨æˆ·å:\u0026#34; \u0026lt;\u0026lt; dataMap[\u0026#34;username\u0026#34;].toString(); 40 qDebug() \u0026lt;\u0026lt; \u0026#34;æ—¶é—´æˆ³:\u0026#34; \u0026lt;\u0026lt; dataMap[\u0026#34;timestamp\u0026#34;].toString(); 41 } 42} å®ç°ç»†èŠ‚å¯¹æ¯”\rè¯­æ³•ç³–æ–¹å¼\rC++ä¿¡å· â†’ QMLæ§½:\nQMLå¼•æ“åœ¨è§£æQMLæ–‡ä»¶æ—¶è¯†åˆ«onXxxå±æ€§ è‡ªåŠ¨ç”ŸæˆJavaScriptå‡½æ•°ä½œä¸ºæ§½ åœ¨å¯¹è±¡åˆ›å»ºå®Œæˆåç«‹å³å»ºç«‹è¿æ¥ æ— éœ€æ‰‹åŠ¨ç¼–å†™connectä»£ç  QMLä¿¡å· â†’ C++æ§½:\nåœ¨C++ä¸­ä½¿ç”¨æ—§å¼SIGNAL/SLOTå®è¯­æ³• è‡ªåŠ¨å¤„ç†å‚æ•°ç±»å‹è½¬æ¢ æ¯”æ˜¾å¼connectæ›´ç®€æ´ï¼Œä½†ç¼–è¯‘æ—¶æ£€æŸ¥æ›´å¼± æ˜¾å¼connectæ–¹å¼\rC++ä¿¡å· â†’ QMLæ§½:\néœ€è¦å•ç‹¬å®šä¹‰å¤„ç†å‡½æ•° åœ¨Component.onCompletedä¸­æ‰‹åŠ¨è¿æ¥ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¿æ¥/æ–­å¼€ æ›´çµæ´»ï¼Œä½†ä»£ç æ›´å†—é•¿ QMLä¿¡å· â†’ C++æ§½:\nä½¿ç”¨æ ‡å‡†connectå‡½æ•° éœ€è¦æ˜ç¡®æŒ‡å®šä¿¡å·å’Œæ§½ å¯ä»¥ä½¿ç”¨æ–°å¼è¯­æ³•ï¼ˆå‡½æ•°æŒ‡é’ˆï¼‰æˆ–æ—§å¼è¯­æ³•ï¼ˆå®ï¼‰ ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥æ›´å¼ºï¼ˆæ–°å¼è¯­æ³•ï¼‰ æ€§èƒ½å’Œä½¿ç”¨åœºæ™¯åˆ†æ\rè¯­æ³•ç³–ä¼˜åŠ¿\rä»£ç æ›´ç®€æ´ç›´è§‚ QMLå¼•æ“å¯èƒ½è¿›è¡Œä¼˜åŒ–ï¼ˆå†…éƒ¨å®ç°æ›´é«˜æ•ˆï¼‰ é€‚åˆå›ºå®šçš„ã€æ°¸ä¹…çš„è¿æ¥ å‡å°‘é”™è¯¯å¯èƒ½æ€§ï¼ˆä¸ä¼šæ‹¼å†™é”™è¯¯connectå‚æ•°ï¼‰ æ˜¾å¼connectä¼˜åŠ¿\råŠ¨æ€æ§åˆ¶è¿æ¥ç”Ÿå‘½å‘¨æœŸ æ¡ä»¶æ€§è¿æ¥ï¼ˆæ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦è¿æ¥ï¼‰ å¤šä¸ªå¤„ç†å™¨ï¼ˆä¸€ä¸ªä¿¡å·å¯ä»¥è¿æ¥åˆ°å¤šä¸ªä¸åŒå‡½æ•°ï¼‰ ä¿¡å·è½¬å‘ï¼ˆå¯ä»¥è¿æ¥ä¿¡å·åˆ°ä¿¡å·ï¼‰ 1// æ˜¾å¼connectçš„çµæ´»æ€§ç¤ºä¾‹ 2Component.onCompleted: { 3 if (settings.debugMode) { 4 dataSource.dataChanged.connect(logDataChange); 5 } 6 7 if (settings.notificationsEnabled) { 8 dataSource.dataChanged.connect(showNotification); 9 } 10 11 // ä¿¡å·è½¬å‘ 12 dataSource.dataChanged.connect(root.onDataUpdated); 13} 14 15// åŠ¨æ€æ–­å¼€è¿æ¥ 16function disableLogging() { 17 dataSource.dataChanged.disconnect(logDataChange); 18} æ€»ç»“\rè¯­æ³•ç³–æœ¬è´¨ä¸Šå°±æ˜¯ç®€åŒ–ç‰ˆçš„connectï¼Œåº•å±‚å®ç°ç›¸ä¼¼ ä¸¤ç§æ–¹å¼æ€§èƒ½å·®å¼‚ä¸å¤§ï¼Œä¸»è¦åŒºåˆ«åœ¨äºçµæ´»æ€§å’Œä»£ç ç®€æ´æ€§ ç®€å•å›ºå®šè¿æ¥ç”¨è¯­æ³•ç³–ï¼Œå¤æ‚åŠ¨æ€è¿æ¥ç”¨æ˜¾å¼connect ä¸è®ºå“ªç§æ–¹å¼ï¼ŒC++å’ŒQMLçš„äº¤äº’éƒ½éœ€è¦é€šè¿‡Qtå…ƒå¯¹è±¡ç³»ç»Ÿå’ŒJSå¼•æ“æ¡¥æ¥ ","date":"2025-08-30T20:26:16+08:00","image":"https://tuchuang.liushuiyu.cn/img/c-qml-logo20250830.webp","permalink":"https://blog.liushuiyu.cn/p/%E8%AF%AD%E6%B3%95%E7%B3%96-vs-connect-%E5%AE%9E%E7%8E%B0%E5%AF%B9%E6%AF%94%E8%AF%A6%E8%A7%A3/","title":"è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£"},{"content":"gitignore çš„ä½œç”¨\rç”¨äºå‘Šè¯‰ Git å“ªäº›æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ä¸éœ€è¦çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œæ¯”å¦‚ï¼š\nä¸´æ—¶æ–‡ä»¶ï¼ˆå¦‚ *.tmpï¼‰ ç¼–è¯‘äº§ç‰©ï¼ˆå¦‚ *.exeï¼‰ IDE é…ç½®æ–‡ä»¶ï¼ˆå¦‚ .idea/ï¼‰ æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ passwords.txtï¼‰ æ–‡ä»¶æ”¾ç½®ä½ç½®\ré¡¹ç›®æ ¹ç›®å½•ï¼š/é¡¹ç›®è·¯å¾„/.gitignoreï¼ˆå¯¹å½“å‰ä»“åº“ç”Ÿæ•ˆï¼‰ å…¨å±€é…ç½®ï¼š~/.gitignore_globalï¼ˆå¯¹æ‰€æœ‰ä»“åº“ç”Ÿæ•ˆï¼Œéœ€è¿è¡Œ git config \u0026ndash;global core.excludesfile ~/.gitignore_globalï¼‰ åŸºç¡€è¯­æ³•è§„åˆ™\rå¿½ç•¥å•ä¸ªæ–‡ä»¶\r1debug.log å¿½ç•¥ç‰¹å®šæ–‡ä»¶å¤¹\r1# å¿½ç•¥æ‰€æœ‰ç›®å½•ä¸‹çš„ .idea æ–‡ä»¶å¤¹ 2**/.idea/ é€šé…ç¬¦åŒ¹é…\ré€šé…ç¬¦ ç¤ºä¾‹ ä½œç”¨ * *.tmp å¿½ç•¥æ‰€æœ‰.tmpæ–‡ä»¶ ? ?.log å¿½ç•¥å•å­—ç¬¦å‘½åçš„æ—¥å¿—ï¼ˆå¦‚a.logï¼‰ ** **/build/ é€’å½’å¿½ç•¥æ‰€æœ‰å±‚çº§çš„buildæ–‡ä»¶å¤¹ æ’é™¤ä¾‹å¤–ï¼ˆä¸å¿½ç•¥ï¼‰\r1# å¿½ç•¥æ‰€æœ‰ .txt æ–‡ä»¶ï¼Œä½†ä¸å¿½ç•¥ important.txt 2*.txt 3!important.txt é«˜çº§æŠ€å·§\rå¼ºåˆ¶æ·»åŠ è¢«å¿½ç•¥çš„æ–‡ä»¶\r1git add -f secret_file.txt # å³ä½¿è¢«å¿½ç•¥ä¹Ÿä¼šå¼ºåˆ¶æ·»åŠ  æ£€æŸ¥å¿½ç•¥è§„åˆ™æ˜¯å¦ç”Ÿæ•ˆ\r1git check-ignore -v path/to/file # æŸ¥çœ‹å…·ä½“å“ªæ¡è§„åˆ™å¿½ç•¥äº†è¯¥æ–‡ä»¶ æ¸…ç†å·²æäº¤çš„å¿½ç•¥æ–‡ä»¶\rå¦‚æœä¹‹å‰è¯¯æäº¤äº†éœ€è¦å¿½ç•¥çš„æ–‡ä»¶ï¼š\n1git rm --cached .idea/ # ä» Git ä¸­åˆ é™¤ä½†ä¿ç•™æœ¬åœ°æ–‡ä»¶ 2git commit -m \u0026#34;Remove .idea from Git\u0026#34; å¸¸è§é—®é¢˜è§£ç­”\rQ1ï¼šä¸ºä»€ä¹ˆ .gitignore ä¸ç”Ÿæ•ˆï¼Ÿ\ræ–‡ä»¶å·²æäº¤è¿‡ï¼šéœ€å…ˆè¿è¡Œ git rm \u0026ndash;cached è·¯å¾„é”™è¯¯ï¼šç¡®ä¿ .gitignore åœ¨é¡¹ç›®æ ¹ç›®å½• è¯­æ³•é”™è¯¯ï¼šé¿å…ä½¿ç”¨ä¸­æ–‡ç¬¦å·æˆ–å¤šä½™ç©ºæ ¼ Q2ï¼šå¦‚ä½•å¿½ç•¥æ‰€æœ‰æ–‡ä»¶å¤¹ä¸‹çš„ç‰¹å®šæ–‡ä»¶ï¼Ÿ\r1# å¿½ç•¥æ‰€æœ‰ç›®å½•ä¸‹çš„ .DS_Store æ–‡ä»¶ 2**/.DS_Store Q3ï¼šå¦‚ä½•å¿½ç•¥é™¤æŒ‡å®šæ–‡ä»¶å¤–çš„æ‰€æœ‰åŒç±»æ–‡ä»¶ï¼Ÿ\r1# å¿½ç•¥æ‰€æœ‰ .log æ–‡ä»¶ï¼Œä½†ä¿ç•™ error.log 2*.log 3!error.log .gitignore è§„åˆ™é€ŸæŸ¥è¡¨\réœ€æ±‚ å†™æ³• ç¤ºä¾‹ å¿½ç•¥ç‰¹å®šæ–‡ä»¶å¤¹ folder/ build/ï¼ˆå¿½ç•¥buildæ–‡ä»¶å¤¹ï¼‰ å¿½ç•¥æ‰€æœ‰ç›®å½•ä¸‹çš„åŒåæ–‡ä»¶å¤¹ **/folder/ **/tmp/ï¼ˆå¿½ç•¥æ‰€æœ‰tmpæ–‡ä»¶å¤¹ï¼‰ å¿½ç•¥ç‰¹å®šæ–‡ä»¶ file.ext config.iniï¼ˆå¿½ç•¥è¯¥æ–‡ä»¶ï¼‰ å¿½ç•¥æŸç±»æ‰©å±•åçš„æ–‡ä»¶ *.ext *.logï¼ˆå¿½ç•¥æ‰€æœ‰.logæ–‡ä»¶ï¼‰ å¿½ç•¥ä»»æ„å±‚çº§çš„æŸç±»æ–‡ä»¶ **/*.ext **/*.tmpï¼ˆå¿½ç•¥æ‰€æœ‰.tmpæ–‡ä»¶ï¼‰ å¿½ç•¥ç³»ç»Ÿæ–‡ä»¶ï¼ˆå¦‚.DS_Storeï¼‰ .DS_Store ï¼ˆMac çš„ä¸´æ—¶æ–‡ä»¶ï¼‰ ä¸å¿½ç•¥æŸä¸ªæ–‡ä»¶ï¼ˆä¾‹å¤–ï¼‰ !file.ext !important.txtï¼ˆä¸å¿½ç•¥è¯¥æ–‡ä»¶ï¼‰ å¿½ç•¥ç©ºæ–‡ä»¶å¤¹ï¼ˆå ä½ï¼‰ folder/+ æ”¾.gitkeep ï¼ˆGit é»˜è®¤ä¸è·Ÿè¸ªç©ºæ–‡ä»¶å¤¹ï¼‰ æ³¨é‡Šï¼ˆè¯´æ˜ï¼‰ # æ³¨é‡Šå†…å®¹ # å¿½ç•¥æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶ å¸¸ç”¨åœºæ™¯ç¤ºä¾‹\rå¿½ç•¥ build/ å’Œ node_modules/** 1 build/ 2 node_modules/ å¿½ç•¥æ‰€æœ‰ .log å’Œ .tmpï¼Œä½†ä¿ç•™ important.log 1 *.log 2 *.tmp 3 !important.log å¿½ç•¥æ‰€æœ‰ IDE é…ç½®æ–‡ä»¶ï¼ˆå¦‚ JetBrainsï¼‰ 1 **/.idea/ 2 **/*.iml æ³¨æ„äº‹é¡¹\râœ… è·¯å¾„é—®é¢˜\n/folder/ ä»…å¿½ç•¥æ ¹ç›®å½•ä¸‹çš„ folder folder/ å¿½ç•¥æ‰€æœ‰ folder ç›®å½• **/folder/ åŒ¹é…ä»»æ„å±‚çº§çš„ folder âŒ å¸¸è§é”™è¯¯\nè¯¯ç”¨ folderï¼ˆä¸å¸¦ /ï¼Œå¯èƒ½åŒ¹é…æ–‡ä»¶ï¼‰\nè§„åˆ™é¡ºåºé”™è¯¯ï¼ˆå¦‚ !important.txt å¿…é¡»æ”¾åœ¨ *.txt ä¹‹åï¼‰\nå·²æäº¤çš„æ–‡ä»¶éœ€å…ˆåˆ é™¤ç¼“å­˜ï¼š\n1 git rm --cached \u0026lt;file\u0026gt; è¿™æ ·å†™ .gitignore å°±æ¸…æ™°å¤šäº†ï¼ ğŸš€\n","date":"2025-06-23T15:41:25+08:00","image":"https://tuchuang.liushuiyu.cn/img/git-management20250830.webp","permalink":"https://blog.liushuiyu.cn/p/gitignore%E7%AC%94%E8%AE%B0/","title":"gitignoreç¬”è®°"},{"content":"Usarté€šä¿¡ç®€æ˜“åŸç†å›¾\rGND ä¾›åœ°æ˜¯ä¸ºäº†å¹³è¡¡ç”µå‹åŸºå‡†ï¼Œä½¿å¾—åŒæ–¹å…±ç”¨ä¸€å¥—ç”µå‹æ ‡å‡†ï¼Œç”¨äºè¯„åˆ¤é«˜ä½ç”µå‹ã€‚ Tx ï¼šå‘é€æ•°æ® Rxï¼šæ¥æ”¶æ•°æ® æ•°æ®çš„ä¸²å¹¶è½¬æ¢\rSTM32 çš„ä¸²å¹¶è½¬åŒ–å¯„å­˜å™¨\râ€‹\nå¯„å­˜å™¨ TDR å®ç°å°†å¹¶è¡Œæ•°æ®è½¬æ¢ä¸ºä¸²è¡Œæ•°æ®ã€‚ å¯„å­˜å™¨ RDR å®ç°ä¸²è¡Œæ•°æ®è½¬æ¢ä¸ºå¹¶è¡Œæ•°æ®ã€‚ ä¸²å¹¶æ•°æ®çš„è¯¦ç»†è§£é‡Š\râ€‹\nä¸²è¡Œæ•°æ®æ˜¯æŒ‡æ•°æ®ä»¥ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ–¹å¼åœ¨æ—¶é—´ä¸Šè¿ç»­ä¼ è¾“ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®ä½æ˜¯æŒ‰é¡ºåºé€ä¸ªå‘é€çš„ã€‚è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºé•¿è·ç¦»ä¼ è¾“ï¼Œå› ä¸ºå®ƒå¯ä»¥å‡å°‘æ‰€éœ€çš„çº¿ç¼†æ•°é‡ã€‚ å¹¶è¡Œæ•°æ®åˆ™æ˜¯æŒ‡æ•°æ®çš„å¤šä¸ªä½åœ¨åŒä¸€æ—¶åˆ»é€šè¿‡å¤šæ¡é€šé“åŒæ—¶ä¼ è¾“ï¼Œè¿™ç§æ–¹å¼åœ¨çŸ­è·ç¦»ä¼ è¾“ä¸­æ•ˆç‡è¾ƒé«˜ï¼Œä½†ç”±äºå—é™äºçº¿è·¯æ•°é‡å’Œä¿¡å·å¹²æ‰°ï¼Œé€šå¸¸ä¸é€‚åˆé•¿è·ç¦»é€šä¿¡ã€‚ STM32_Usart æ¨¡å—å®Œæ•´ç¤ºæ„å›¾\râ€‹\nçŠ¶æ€å¯„å­˜å™¨(SR)\rSR å¯„å­˜å™¨ç”¨äºæŒ‡ç¤º USART çš„å½“å‰çŠ¶æ€ï¼ŒåŒ…æ‹¬æ˜¯å¦æœ‰æ•°æ®å¯æ¥æ”¶ã€å‘é€ç¼“å†²åŒºæ˜¯å¦ä¸ºç©ºç­‰ã€‚\né‡è¦ä½ï¼š\nRXNEï¼ˆReceive Data Register Not Emptyï¼‰ï¼šæ¥æ”¶æ•°æ®å¯„å­˜å™¨(RDR)éç©ºï¼Œè¡¨ç¤ºæœ‰æ•°æ®æ¥æ”¶ã€‚ TXEï¼ˆTransmit Data Register Emptyï¼‰ï¼šå‘é€æ•°æ®å¯„å­˜å™¨(TDR)ä¸ºç©ºï¼Œè¡¨ç¤ºå¯ä»¥å‘é€æ•°æ®ã€‚ TCï¼ˆTransmit Completeï¼‰ï¼šå‘é€å®Œæˆ TDRç©º\u0026amp;\u0026amp;ç§»ä½å¯„å­˜å™¨ç©ºã€‚ OREï¼ˆOverrun Errorï¼‰ï¼šæ¥æ”¶æº¢å‡ºé”™è¯¯ï¼Œè¡¨ç¤ºæ¥æ”¶çš„æ•°æ®è¢«è¦†ç›–ã€‚ FEï¼ˆFraming Errorï¼‰ï¼šå¸§é”™è¯¯ï¼Œè¡¨ç¤ºæ¥æ”¶åˆ°çš„å¸§ä¸æ­£ç¡®ã€‚ PEï¼ˆParity Errorï¼‰ï¼šå¥‡å¶æ ¡éªŒé”™è¯¯æ ‡å¿—ä½ NEï¼ˆNoise Errorï¼‰ï¼šå™ªå£°é”™è¯¯æ ‡å¿—ä½ é…ç½®å¯„å­˜å™¨(CR)\råºå· åç§° æè¿° 0 UE (USART Enable) å¯ç”¨ USART å¤–è®¾ï¼Œå¿…é¡»è®¾ç½®æ­¤ä½æ‰èƒ½å¼€å§‹é€šä¿¡ã€‚ 1 TE (Transmitter Enable) å¯ç”¨å‘é€å™¨ï¼Œå…è®¸æ•°æ®å‘é€ã€‚ 2 RE (Receiver Enable) å¯ç”¨æ¥æ”¶å™¨ï¼Œå…è®¸æ•°æ®æ¥æ”¶ã€‚ 3 R/W (Receiver/Transmit) è®¾ç½®ä¸º 1 æ—¶ï¼Œé€‰æ‹©åˆ°æ¥æ”¶æ¨¡å¼ï¼Œè®¾ç½®ä¸º 0 æ—¶ï¼Œé€‰æ‹©åˆ°å‘é€æ¨¡å¼ã€‚ 4 M (Word Length) æ•°æ®ä½é•¿åº¦ï¼ˆ0=8 ä½ï¼Œ1=9 ä½ï¼‰ã€‚ 5 WAKE (Wake-up method) å”¤é†’é€‰æ‹©ï¼ˆ0=æ™®é€šæ¨¡å¼ï¼Œ1=åœ°å€æ¨¡å¼ï¼‰ã€‚ 6 PCE (Parity Control) å¥‡å¶æ ¡éªŒä½¿èƒ½ï¼ˆ0=ç¦ç”¨ï¼Œ1=å¯ç”¨ï¼‰ã€‚ 7 PS (Parity Selection) å¥‡å¶æ ¡éªŒé€‰æ‹©ï¼ˆ0=å¶æ ¡éªŒï¼Œ1=å¥‡æ ¡éªŒï¼‰ã€‚ 8 PEIE (PE Interrupt Enable) å¥‡å¶æ ¡éªŒé”™è¯¯ä¸­æ–­ä½¿èƒ½ã€‚ 9 TXEIE (TX Interrupt Enable) å‘é€æ•°æ®å¯„å­˜å™¨ç©ºä¸­æ–­ä½¿èƒ½ã€‚ 10 RXNEIE (RX Interrupt Enable) æ¥æ”¶æ•°æ®å¯„å­˜å™¨éç©ºä¸­æ–­ä½¿èƒ½ã€‚ 11 TEIE (Transmission Error Interrupt Enable) å‘é€é”™è¯¯ä¸­æ–­ä½¿èƒ½ã€‚ 12 LBDIE (LIN Break Detection Interrupt Enable) LIN ä¸­æ–­ä½¿èƒ½ã€‚ 13 CTSIE (CTS Interrupt Enable) æ¸…é™¤å‘é€ä¸­æ–­ä½¿èƒ½ã€‚ 14 CBM (Character Match) å­—ç¬¦åŒ¹é…æ¨¡å¼ï¼ˆç”¨åœ¨ LIN æ¨¡å¼ä¸‹ï¼‰ã€‚ 15 OVER8 (Oversampling) è¿‡é‡‡æ ·æ¨¡å¼é€‰æ‹©ï¼ˆ0=16 å€è¿‡é‡‡æ ·ï¼Œ1=8 å€è¿‡é‡‡æ ·ï¼‰ã€‚ â€‹\nCR å¯„å­˜å™¨ä¸»è¦ç”¨äºæ•°æ®å¸§çš„é…ç½®ï¼Œæ•°æ®å¸§é€šå¸¸ç”±èµ·å§‹ä½(1 bit)+ æ•°æ®ä½(8~9 bit)+ åœæ­¢ä½(0.5ã€1ã€1.5ã€2 bit)æ„æˆã€‚\nM - æ•°æ®ä½é•¿åº¦\nPCE - å¥‡å¶æ ¡éªŒä½¿èƒ½\nPS - å¥‡å¶é€‰æ‹©\nSTOP - åœæ­¢ä½é•¿åº¦\nSTOP: 00 ~ 1 ä½ STOP: 01 ~ 0.5 ä½ STOP: 10 ~ 2 ä½ STOP: 11 ~ 1.5 ä½ TEX - å‘é€å¼€å…³\nREX - æ¥æ”¶å¼€å…³\nUE - Usart ä½¿èƒ½\nUE: 0 Usart ç¦æ­¢ UE: 1 Usart ä½¿èƒ½ æ³¢ç‰¹ç‡å¯„å­˜å™¨(BRR)\ræ³¢ç‰¹ç‡çš„å®šä¹‰\ræ³¢ç‰¹ç‡ï¼šæ¯ç§’ä¼ è¾“ç å…ƒçš„ä¸ªæ•°\nBRR å¯„å­˜å™¨ä½æ•°è§£é‡Š\râ€‹\nåŒç¼“å†²ä¸è¿ç»­å‘é€\råŒç¼“å†²ä¸è¿ç»­å‘é€æ¦‚è¿°\råŒç¼“å†²ï¼š\nåœ¨ USART ä¸­ï¼ŒåŒç¼“å†²é€šå¸¸æŒ‡çš„æ˜¯ä½¿ç”¨ä¸¤ä¸ªç¼“å†²åŒºæ¥å­˜å‚¨å¾…å‘é€çš„æ•°æ®ã€‚è¿™æ ·ï¼Œå½“ä¸€ä¸ªç¼“å†²åŒºæ­£åœ¨å‘é€æ•°æ®æ—¶ï¼Œå¦ä¸€ä¸ªç¼“å†²åŒºå¯ä»¥å‡†å¤‡ä¸‹ä¸€ä¸ªå‘é€æ•°æ®ï¼Œç¡®ä¿æ•°æ®çš„è¿ç»­æ€§ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªç¼“å†²åŒºç”¨äºå­˜æ”¾æ­£åœ¨å‘é€çš„æ•°æ®ï¼Œå¦ä¸€ä¸ªç¼“å†²åŒºç”¨äºæ¥æ”¶æ–°çš„æ•°æ®ï¼Œé¿å…å› å‘é€å»¶è¿Ÿè€Œå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚ è¿ç»­å‘é€ï¼š\nè¿ç»­å‘é€æ˜¯æŒ‡åœ¨æ²¡æœ‰äººä¸ºçš„å¹²é¢„ä¸‹ï¼ŒUSART èƒ½å¤Ÿä¸æ–­åœ°ä»ç¼“å†²åŒºä¸­è¯»å–æ•°æ®è¿›è¡Œå‘é€ã€‚è¿™æ„å‘³ç€èƒ½å¤Ÿåœ¨çŸ­æ—¶é—´å†…å¿«é€Ÿå‘é€å¤šä¸ªæ•°æ®å­—èŠ‚ï¼Œç‰¹åˆ«é€‚åˆäºéœ€è¦å®æ—¶ä¼ è¾“å¤§é‡æ•°æ®çš„åº”ç”¨ã€‚ åœ¨ STM32F103 ä¸­ï¼Œåˆ©ç”¨ USART çš„å‘é€ä¸­æ–­å’Œ DMAï¼ˆç›´æ¥å†…å­˜è®¿é—®ï¼‰å¯ä»¥å®ç°é«˜æ•ˆçš„è¿ç»­å‘é€ã€‚ STM32F103 åŒç¼“å†²æŠ€æœ¯å®ç°\rå‘é€å’Œæ¥æ”¶è¿‡ç¨‹ä¸­éƒ½æœ‰ç€ä¸¤ä¸ªç¼“å†²åŒºï¼Œç¬¬ä¸€ç¼“å†²åŒºï¼šTDR/RDR ç¬¬äºŒç¼“å†²åŒºï¼šç§»ä½å¯„å­˜å™¨\nç¬¬ä¸€å±‚å‘é€ç¼“å†²ï¼šé€šè¿‡åˆ¤æ–­ TXE æ ‡å¿—ä½ï¼ˆTXE=1,TDR ä¸ºç©ºï¼ŒTXE=0ï¼ŒTDR ä¸ä¸ºç©ºï¼‰æ¥å†³å®šæ˜¯å¦å°†æ•°æ®å†™å…¥åˆ° TDR å¯„å­˜å™¨å½“ä¸­ã€‚ ç¬¬äºŒå±‚å‘é€ç¼“å†²ï¼šTDR å°†æ•°æ®å†™å…¥åˆ°ç§»ä½å¯„å­˜å™¨ä¸­ï¼Œç§»ä½å¯„å­˜å™¨è¿›è¡Œä¸²å¹¶è½¬æ¢ã€‚ ç¬¬ä¸€å±‚æ¥æ”¶ç¼“å†²ï¼šé€šè¿‡åˆ¤æ–­ RXEN æ ‡å¿—ä½ï¼ˆRXEN=1,RDR ä¸ä¸ºç©ºï¼ŒRXEN=0ï¼ŒRDR ä¸ä¸ºç©ºï¼‰æ¥å†³å®šæ˜¯å¦å°†æ•°æ®å†™å…¥åˆ°ç§»ä½å¯„å­˜å™¨å½“ä¸­ã€‚ ç¬¬äºŒå±‚å‘é€ç¼“å†²ï¼šç§»ä½å¯„å­˜å™¨å®ç°ä¸²å¹¶è½¬æ¢å°†æ•°æ®å†™å…¥åˆ°RDRå¯„å­˜å™¨å½“ä¸­ ã€‚ 1//åŸºäºå¯„å­˜å™¨å¼€å‘çš„ä¼ªä»£ç  2 3//æ•°æ®çš„å•ä¸ªå‘é€ 4while(TXE:= 0);//ç­‰å¾…TDRå¯„å­˜å™¨ä¸ºç©º 5TDR: data; //å°†æ•°æ®å†™å…¥TDRå¯„å­˜å™¨å½“ä¸­ 6while(TC==0);//ç­‰å¾…å…¨éƒ¨æ•°æ®å‘é€å®Œæ¯• 7//æ•°æ®çš„è¿ç»­å‘é€ 8for(int i=0;i\u0026lt;n;i++) 9{ 10\twhile(TXE:= 0); 11\tTDR: data; 12} 13while(TC==0); 14 15//æ•°æ®çš„æ¥æ”¶ 16while(RXEN:= 0);//å½“æ¥æ”¶ç§»ä½å¯„å­˜å™¨æ²¡æœ‰æ•°æ®æ—¶ï¼Œä»£è¡¨æ•°æ®å·²ç»å®Œæ•´å†™å…¥RDRä¸­ 17a: RDR; //é€šè¿‡å˜é‡è¯»å–RDRå¯„å­˜å™¨ä¸­çš„æ•°æ® 18//è¿ç»­æ¥æ”¶å¤šä¸ªæ•°æ® 19int arr[MAXSIZE]; 20for(int i=0;i\u0026lt;MAXSIZE;i++) 21{ 22\twhile(RXEN:= 0);//å½“æ¥æ”¶ç§»ä½å¯„å­˜å™¨æ²¡æœ‰æ•°æ®æ—¶ï¼Œä»£è¡¨æ•°æ®å·²ç»å®Œæ•´å†™å…¥RDRä¸­ 23\tarr[i]: RDR; //é€šè¿‡å˜é‡è¯»å–RDRå¯„å­˜å™¨ä¸­çš„æ•°æ® 24} STM32æ ‡å‡†åº“Usartçš„ç¼–ç¨‹å®ç°\råŸºç¡€5å¤§æ¥å£\r1void USART_Init(â€¦);// åˆå§‹åŒ–(å¸§æ ¼å¼ã€æ³¢ç‰¹ç‡) 2void USART_Cmd(â€¦);// æ€»å¼€å…³ 3void USART_SendData(â€¦);//å†™TDRå¯„å­˜å™¨ 4uint16_t USART_ReceiveData(â€¦);//è¯»RDRå¯„å­˜å™¨ 5FlagStatus USART_GetFlagStatus(â€¦);// è¯»æ ‡å¿—ä½ USART_Initæ¥å£\r1// @ç®€ä»‹ï¼šä¸²å£åˆå§‹åŒ– 2// @å‚æ•°ï¼šUSARTx-é€‰æ‹©è¦æ“ä½œçš„ä¸²å£ï¼Œå¯ä»¥æ˜¯USART1,USART2,USART3,UART4æˆ–USART5 3// @å‚æ•°ï¼šUSART_InitStruct-åˆå§‹åŒ–å‚æ•°ï¼ŒUSART_IinitTypeDefç»“æ„ä½“æŒ‡é’ˆç±»å‹ 4typedef struct USART_InitTypeDef 5{ 6 uint32_t USART_BaudRate; /*!\u0026lt; æ­¤æˆå‘˜é…ç½® USART é€šä¿¡çš„æ³¢ç‰¹ç‡ã€‚*/ 7 8 uint16_t USART_WordLength; /*!\u0026lt; æŒ‡å®šåœ¨å¸§ä¸­ä¼ è¾“æˆ–æ¥æ”¶çš„æ•°æ®ä½æ•°ã€‚ 9 æ­¤å‚æ•°å¯ä»¥æ˜¯ @ref USART_Word_Length çš„ä¸€ä¸ªå€¼ */ 10 11 uint16_t USART_StopBits; /*!\u0026lt; æŒ‡å®šä¼ è¾“çš„åœæ­¢ä½æ•°ã€‚ 12 æ­¤å‚æ•°å¯ä»¥æ˜¯ @ref USART_Stop_Bits çš„ä¸€ä¸ªå€¼ */ 13 14 uint16_t USART_Parity; /*!\u0026lt; æŒ‡å®šå¥‡å¶æ ¡éªŒæ¨¡å¼ã€‚ 15 æ­¤å‚æ•°å¯ä»¥æ˜¯ @ref USART_Parity çš„ä¸€ä¸ªå€¼ã€‚ 16 @note å½“å¯ç”¨å¥‡å¶æ ¡éªŒæ—¶ï¼Œè®¡ç®—å‡ºçš„å¥‡å¶æ ¡éªŒä½ä¼šæ’å…¥åˆ°ä¼ è¾“æ•°æ®çš„æœ€é«˜æœ‰æ•ˆä½ï¼ˆå½“å­—\té•¿è®¾ç½®ä¸º 9 ä½æ•°æ®æ—¶ä¸ºç¬¬ 9 ä½ï¼›å½“å­—é•¿è®¾ç½®ä¸º 8 ä½æ•°æ®æ—¶ä¸ºç¬¬ 8 ä½ï¼‰ã€‚ */ 17 18 uint16_t USART_Mode; /*!\u0026lt; æŒ‡å®šæ¥æ”¶æˆ–å‘é€æ¨¡å¼æ˜¯å¦å¯ç”¨æˆ–ç¦ç”¨ã€‚ 19 æ­¤å‚æ•°å¯ä»¥æ˜¯ @ref USART_Mode çš„ä¸€ä¸ªå€¼ */ 20 21 uint16_t USART_HardwareFlowControl; /*!\u0026lt; æŒ‡å®šç¡¬ä»¶æµæ§åˆ¶æ¨¡å¼æ˜¯å¦å¯ç”¨æˆ–ç¦ç”¨ã€‚ 22 æ­¤å‚æ•°å¯ä»¥æ˜¯ @ref USART_Hardware_Flow_Control çš„ä¸€ä¸ªå€¼ */ 23}USART_InitTypeDef; 24 25void USART_Init(USART_TypeDef* USARTx, USART_InitTypeDef* USART_InitStruct); 26 27USART_InitTypeDef USARTInitStruct;//åˆ›å»ºç»“æ„ä½“å˜é‡ 28 29//ä¸ºå˜é‡ç»“æ„ä½“æˆå‘˜èµ‹å€¼ 30USARTInitStruct.USART_WordLength= xxx; 31USARTInitStruct.USART_Parity=xxx; 32USARTInitStruct.USART_StopBits=xxx; 33USARTInitStruct.USART_Mode=xxx; 34USARTInitStruct.USART_BaudRate=xxx; /*!\u0026lt; æ­¤æˆå‘˜é…ç½® USART é€šä¿¡çš„æ³¢ç‰¹ç‡ã€‚*/ 35USARTInitStruct.USART_HardwareFlowControl=xxx; 36 37USART_Init(USARTx,\u0026amp;USARTInitStruct);//è°ƒç”¨Initæ¥å£ USART_Cmdæ¥å£\r1// @ç®€ä»‹ï¼šæ§åˆ¶USARTæ€»å¼€å…³çš„æ–­å¼€å’Œé—­åˆ 2// @å‚æ•°ï¼šUSARTx-é€‰æ‹©è¦æ“ä½œçš„ä¸²å£ï¼Œå¯ä»¥æ˜¯USART1,USART2,USART3,UART4æˆ–USART5 3// @å‚æ•°ï¼šNewState-å¼€å…³çŠ¶æ€ï¼ŒENABLE -é—­åˆï¼ŒDISABLE -æ–­å¼€ 4void USART_Cmd(USART_TypeDef* USARTx, FunctionalStateNewState); 5 6USART_Cmd(USART1, ENABLE); // é—­åˆUSART1å¼€å…³ 7USART_Cmd(USART1, DISABLE); // æ–­å¼€USART1å¼€å…³ USART_SendDataæ¥å£\r1// @ç®€ä»‹ï¼šå‘TDRå†™æ•°æ® 2// @å‚æ•°ï¼šUSARTx-é€‰æ‹©è¦æ“ä½œçš„ä¸²å£ï¼Œå¯ä»¥æ˜¯USART1,USART2,USART3,UART4æˆ–USART5 3// @å‚æ•°ï¼šData -è¦å†™å…¥çš„æ•°æ® 4void USART_SendData(USART_TypeDef* USARTx, uint16_t Data); 5 6USART_SendData(USART1, 0x5a); // å‘é€0x5a USART_ReceiveDataæ¥å£\r1// @ç®€ä»‹ï¼šä»RDRè¯»å–æ•°æ® 2// @å‚æ•°ï¼šUSARTx-é€‰æ‹©è¦æ“ä½œçš„ä¸²å£ï¼Œå¯ä»¥æ˜¯USART1,USART2,USART3,UART4æˆ–USART5 3// @è¿”å›å€¼ï¼šè¯»å–åˆ°çš„æ•°æ® 4uint16_t USART_ReceiveData(USART_TypeDef* USARTx); 5 6uint8_t a: USART_ReceiveData(USART1); USART_GetFlagStatusæ¥å£\r1// @ç®€ä»‹ï¼šå‘TDRå†™æ•°æ® 2// @å‚æ•°ï¼šUSARTx-é€‰æ‹©è¦æ“ä½œçš„ä¸²å£ï¼Œå¯ä»¥æ˜¯USART1,USART2,USART3,UART4æˆ–USART5 3// @å‚æ•°ï¼šUSART_Flag-æ ‡å¿—ä½åç§°ã€‚ 4//å¯ä»¥æ˜¯USART_FLAG_TXEï¼ŒUSART_FLAG_RXNEï¼ŒUSART_FLAG_OREï¼ŒUSART_FLAG_TCï¼ŒUSART_FLAG_PEï¼Œ 5//USART_FLAG_PEï¼ŒUSART_FLAG_FEï¼ŒUSART_FLAG_NE 6// @è¿”å›å€¼ï¼šæ ‡å¿—ä½çŠ¶æ€ï¼ŒSET -1ï¼Œ RESET -0 7FlagStatus USART_GetFlagStatus(USART_TypeDef* USARTx, uint16_t USART_Flag); 8while(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET); 9while(USART_GetFlagStatus(USART1,USART_FLAG_RXNE)==RESET); 10if(USART_GetFlagStatus(USART1,USART_FLAG_PE)==SET){} ","date":"2025-01-06T22:34:07+08:00","image":"https://tuchuang.liushuiyu.cn/img/Usart_post_cover.webp","permalink":"https://blog.liushuiyu.cn/p/%E9%82%A3%E6%97%B6%E6%88%91%E4%BB%AC%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%9B%B8%E9%81%87usart-1/","title":"é‚£æ—¶æˆ‘ä»¬ç¬¬ä¸€æ¬¡ç›¸é‡ï¼šUSART 1"},{"content":"GPIOè¾“å‡ºè¾“å…¥çš„ç®€å•åŸç†\rè¾“å‡ºï¼šé€šè¿‡å¯„å­˜å™¨å†™0æˆ–è€…æ˜¯1ï¼Œæ§åˆ¶å¼•è„šè¾“å‡ºä½ç”µå‹æˆ–è€…æ˜¯é«˜ç”µå‹ã€‚\nè¾“å…¥ï¼šé€šè¿‡è¯»å–å¼•è„šçš„å¯„å­˜å™¨æ˜¯0è¿˜æ˜¯1ï¼Œåˆ¤æ–­æ˜¯é«˜ç”µå‹è¿˜æ˜¯ä½ç”µå‹ã€‚\nGPIOçš„å››ç§è¾“å‡ºæ¨¡å¼\ræ¨æŒ½ä¸å¼€æ¼\ræ¨æŒ½è¾“å‡º\ræ¨æŒ½è¾“å‡ºæ˜¯GPIOï¼ˆé€šç”¨è¾“å…¥è¾“å‡ºï¼‰çš„ä¸€ç§è¾“å‡ºé…ç½®ï¼Œèƒ½å¤Ÿé©±åŠ¨ç”µå¹³é«˜æˆ–ä½ã€‚\nå®ç°åŸç†ï¼šSTM32ä¸­çš„æ¨æŒ½è¾“å‡ºé…ç½®ç”±ä¸€ä¸ªPMOSå’Œä¸€ä¸ªNMOSç»„æˆï¼š\nPMOSï¼šè¿æ¥åˆ°VDDï¼Œå¯¼é€šæ—¶è¾“å‡ºé«˜ç”µå¹³ã€‚\nNMOSï¼šè¿æ¥åˆ°GNDï¼Œå¯¼é€šæ—¶è¾“å‡ºä½ç”µå¹³ã€‚\nåº”ç”¨ï¼šç”¨äºéœ€è¦é©±åŠ¨ç”µæµçš„åœºåˆï¼Œå¦‚é©±åŠ¨LEDã€ç»§ç”µå™¨ç­‰ã€‚\nå¼€æ¼è¾“å‡º\rå¼€æ¼è¾“å‡ºä»…èƒ½æ‹‰ä½ç”µå¹³ï¼Œä¸èƒ½ä¸»åŠ¨æ‹‰é«˜ï¼Œéœ€è¦é€šè¿‡å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å°†ç”µå¹³æ‹‰é«˜åˆ°é€»è¾‘é«˜\nå®ç°åŸç†ï¼šå¼€æ¼é…ç½®åªæœ‰ä¸€ä¸ªNMOSè¿æ¥åˆ°GNDï¼š\nå½“NMOSå¯¼é€šæ—¶ï¼Œè¾“å‡ºä½ç”µå¹³ã€‚\néœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å°†ç”µå¹³æ‹‰é«˜ã€‚\nåº”ç”¨ï¼šé€‚åˆI2Cæ€»çº¿ç­‰éœ€è¦å¤šä¸ªè®¾å¤‡è¿æ¥çš„åœºåˆã€‚\nå¤ç”¨æ¨æŒ½ä¸å¤ç”¨å¼€æ¼\ré€šç”¨æ¨¡å¼ï¼Œæ˜¯ç”±CPUé€šè¿‡å¯„å­˜å™¨è¾“å‡ºæ§åˆ¶IOçš„é«˜ä½ç”µå‹ã€‚ä½†å®é™…å¼€å‘åŠŸèƒ½éœ€æ±‚ä¸­è®¸å¤šåŠŸèƒ½æ˜¯éœ€è¦ä¸€ä¸ªæºæºä¸æ–­çš„ä¿¡å·ä½œä¸ºé€šä¿¡ã€å·¥ä½œçš„åŸºç¡€ï¼Œé‚£ä¹ˆç›´æ¥é€šè¿‡CPUæ¨¡æ‹Ÿå·¥ä½œå°±æ˜¾å¾—ä¸è¶³ã€‚\næ•…æ­¤ï¼Œå¼•å…¥äº†å¤ç”¨æ¨¡å¼ï¼Œå¦‚å›¾æ‰€è§ï¼Œç›´æ¥å°†æ§åˆ¶æƒäº¤ç»™ç‰‡ä¸Šå¤–è®¾ï¼Œç”±ä»–ä»¬ç›´æ¥æ¥è¾“å‡ºä¿¡å·ã€‚\né‡‡ç”¨å¤ç”¨æ¨¡å¼é€šè¿‡ç¡¬ä»¶å¤–è®¾å®ç°åŠŸèƒ½ï¼Œæ•ˆç‡é«˜ï¼Œä¸å®¹æ˜“å‡ºé”™ã€‚é¿å…äº†CPUæ¨¡æ‹ŸæŒç»­ç›‘æ§å’Œæ§åˆ¶å¼•è„šçš„ç¼ºç‚¹ã€‚åœ¨æ—¶åºç²¾åº¦å’Œç¨³å®šæ€§ä¸Šè¡¨ç°çš„éƒ½æ›´åŠ çš„å‡ºè‰²ã€‚\nè€Œä¸”ç¡¬ä»¶å¤–è®¾å¯ä»¥å¤„ç†å¤æ‚åè®®ï¼Œå¦‚I2Cï¼ŒSPIï¼ŒUARTç­‰ï¼Œè€Œè½¯ä»¶æ¨¡æ‹Ÿå®ç°å¤æ‚åè®®è¾ƒä¸ºå›°éš¾ã€‚ä¸”ç¡¬ä»¶å¤–è®¾é€šå¸¸è®¾è®¡ä¸ºä½åŠŸè€—ï¼Œè€Œè½¯ä»¶æ¨¡æ‹Ÿéœ€è¦CPUæŒç»­å·¥ä½œï¼ŒåŠŸè€—æ›´é«˜ã€‚\nå¤ç”¨æ¨æŒ½\rç”µå¹³è¾“å‡ºï¼š\né«˜ç”µå¹³æ—¶ï¼šPMOSå¯¼é€šï¼Œè¾“å‡ºVDDã€‚\nä½ç”µå¹³æ—¶ï¼šNMOSå¯¼é€šï¼Œè¾“å‡ºGNDã€‚\nç‰¹æ€§ï¼š\nèƒ½æºé©±åŠ¨ï¼šå…è®¸åŒå‘ç”µæµæµåŠ¨ï¼Œé€‚åˆé«˜é©±åŠ¨åº”ç”¨ã€‚\nè¾“å‡ºé€Ÿåº¦å¿«ï¼Œé€‚åˆéœ€è¦å¿«é€Ÿåˆ‡æ¢çš„ä¿¡å·ã€‚\nå¤ç”¨å¼€æ¼\rç”µå¹³è¾“å‡ºï¼š\nä½ç”µå¹³æ—¶ï¼šNMOSå¯¼é€šï¼Œè¿æ¥GNDã€‚\né«˜ç”µå¹³æ—¶ï¼šNMOSå…³æ–­ï¼Œä¾é å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³ã€‚\nç‰¹æ€§ï¼š\nçº¿ä¸åŠŸèƒ½ï¼šå¤šä¸ªè®¾å¤‡å¯è¿æ¥åŒä¸€æ¡çº¿ä¸Šï¼Œå®ç°å¤šè®¾å¤‡é€šä¿¡ï¼ˆå¦‚I2Cï¼‰ã€‚\nå¯¹å¤–éƒ¨å¹²æ‰°æ•æ„Ÿåº¦ä½ã€‚\nGPIOçš„å››ç§è¾“å…¥æ¨¡å¼\rè¾“å…¥ä¸Šæ‹‰å’Œè¾“å…¥ä¸‹æ‹‰\rå¦‚å›¾æ‰€ç¤ºï¼Œè¾“å…¥ä¸Šæ‹‰å³Vddæ¥é€šé€šè¿‡ä¸Šæ‹‰ç”µé˜»ï¼Œå› ä¸ºæ–½å¯†ç‰¹è§¦å‘å™¨è¾“å…¥é˜»æŠ—æ— ç©·å¤§ï¼Œå¯ç­‰æ•ˆä¸ºä¸€ä¸ªæ— ç©·å¤§ç”µé˜»,è¾“å…¥ä¸Šæ‹‰å’Œè¾“å…¥ä¸‹æ‹‰æ˜¯æŒ‡å½“å¼•è„šå¤„äºæµ®ç©ºçŠ¶æ€æ—¶ï¼Œé€šè¿‡ä¸Šæ‹‰ç”µé˜»å’Œä¸‹æ‹‰ç”µé˜»æ¥ ç¡®å®šç”µå‹ï¼Œé¿å…å¤–ç•Œå™ªå£°å¹²æ‰°ã€‚\nè¾“å…¥æµ®ç©º\ré¡¾åæ€ä¹‰ï¼Œå³ä¸é‡‡ç”¨ä¸Šæ‹‰ç”µé˜»ï¼Œä¹Ÿä¸é‡‡ç”¨ä¸‹æ‹‰ç”µé˜»ï¼Œè¿™æ—¶å€™æ˜“å—åˆ°å¤–ç•Œå™ªå£°å¹²æ‰°ï¼Œäº§ç”Ÿæµ®åŠ¨ã€‚\næ¨¡æ‹Ÿè¾“å…¥\ræˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦ç”¨ADé‡‡é›†åˆ°IOå£ä¸Šé¢çš„çœŸå®ç”µå‹ã€‚è¿™å°±æœ‰äº†æˆ‘ä»¬æ‰€éœ€è¦çš„æ¨¡æ‹Ÿè¾“å…¥ã€‚ä¸ºäº†è®©å¤–éƒ¨çš„ç”µå‹çœŸå®çš„è¯»å–åˆ°å•ç‰‡æœºçš„ADæ¨¡å—ï¼Œæˆ‘ä»¬æ—¢ä¸èƒ½é—­åˆä¸Šæ‹‰å’Œä¸‹æ‹‰çš„å¼€å…³ï¼Œä¹Ÿä¸èƒ½è®©ä¿¡å·ç»è¿‡æ–½å¯†ç‰¹è§¦å‘å™¨è¿›è¡Œæ»¤æ³¢ã€‚\n","date":"2024-10-02T00:00:00Z","image":"https://tuchuang.liushuiyu.cn/img/%E5%8D%95%E7%89%87%E6%9C%BA.jpg","permalink":"https://blog.liushuiyu.cn/p/stm32-io%E8%BE%93%E5%87%BA%E4%B8%8E%E8%BE%93%E5%85%A5%E4%B8%80/","title":"STM32-IOè¾“å‡ºä¸è¾“å…¥ï¼ˆä¸€ï¼‰"},{"content":"ç¬¬ä¸€é¢—æ¨±æ¡ƒï¼šå•æ‹ ä½œè€…ï¼šå—é›ª\n17å²ï¼Œæˆ‘ä¸Šé«˜ä¸­ã€‚çˆ±ä¸Šäº†ä¸€ä¸ªç”·ç”Ÿã€‚æˆ‘æ²¡å‘Šè¯‰ä»–ã€‚é«˜è€ƒï¼Œé‚£ä¸ªç”·ç”Ÿè½äº†æ¦œï¼Œå–æ‰äº†é«˜ä¸­å‚è€ƒä¹¦ï¼Œè¦è¿œèµ°è¥¿è—ã€‚é‚£å¤©ï¼Œæˆ‘åˆ°å­¦æ ¡æ‹¿å½•å–é€šçŸ¥ä¹¦ï¼Œåœ¨æ ¡é—¨å£è§ä»–å®ˆåœ¨ä¸€å¤§å †ä¹¦å‰ï¼Œèº«è¾¹ä¸€ä¸ªç©¿è“è¡£çš„è€å¤´å„¿ï¼Œç”¨ç§¤ç§°ä¸€æ²“æ²“ä¹¦çš„é‡é‡ã€‚é‚£ä¸€å¤©ï¼Œä»–å–æ‰çš„ä¹¦ä¸­ï¼Œæœ‰ä¸€æœ¬å´­æ–°çš„ã€ä»æœªç¿»é˜…è¿‡çš„ã€Šæœ±è‡ªæ¸…æ•£æ–‡é€‰ã€‹ã€‚åœ¨è€å¤´å„¿é‚£é‡Œï¼Œæˆ‘å°†ä¹¦ä¹°äº†å›æ¥ï¼ŒèŠ±2å…ƒé’±ï¼ŒåŸä¹¦çš„ååˆ†ä¹‹ä¸€çš„ä»·é’±ã€‚å›å®¶ï¼Œç¿»åˆ°äº†ç¬¬20é¡µï¼Œé‚£å„¿å†™ç€å°å°çš„ä¸€è¡Œå­—ï¼šæˆ‘å–œæ¬¢ä½ ã€‚æ¸…æ¥šçš„å››ä¸ªå­—ï¼Œä»–æ²¡æœ‰çœ‹åˆ°ã€‚ä»–æ˜¯ä¸å–œæ¬¢æœ±è‡ªæ¸…çš„äººã€‚é‚£æœ¬ä¹¦ï¼Œæ˜¯æˆ‘é€ç»™ä»–çš„ï¼Œé‚£è¡Œå­—æ˜¯æˆ‘å†™çš„ã€‚ å¾ˆä¹…å¾ˆä¹…ä»¥åï¼Œæˆ‘çŸ¥é“ï¼Œåœ¨ä¸€ä¸ªä¸çˆ±çš„äººçœ¼ä¸­ï¼Œå•æ‹çš„ä»·æ ¼å¦‚åŒæ‰“å“ˆæ¬ æ—¶æµå‡ºçš„çœ¼æ³ªï¼Œå»‰ä»·ï¼Œåˆšå¼€å§‹æ—¶æ˜¯19å—8ï¼Œåæ¥æ˜¯2å—ã€‚\n","date":"2024-09-30T10:22:55Z","image":"https://tuchuang.liushuiyu.cn/img/%E5%8D%95%E6%81%8B.webp","permalink":"https://blog.liushuiyu.cn/p/%E7%AC%AC%E4%B8%80%E9%A2%97%E6%A8%B1%E6%A1%83%E5%8D%95%E6%81%8B/","title":"ã€Šç¬¬ä¸€é¢—æ¨±æ¡ƒï¼šå•æ‹ã€‹"},{"content":"äº†è§£å·¥å…·é“¾\ræ˜ç™½ä»€ä¹ˆæ˜¯å·¥å…·é“¾\rå·¥å…·é“¾ï¼Œå®˜æ–¹æ¥è¯´ï¼Œæ˜¯æŒ‡ç”¨äºå°†æºä»£ç è½¬æ¢ä¸ºå¯æ‰§è¡Œç¨‹åºçš„ä¸€ç³»åˆ—å·¥å…·çš„é›†åˆã€‚é€šä¿—åœ°ç†è§£ï¼Œå°±æ˜¯å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„å·¥å…·é›†åˆã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå·¥å…·é“¾ä¸»è¦æŒ‡ç‹­ä¹‰çš„éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ç¼–è¯‘å™¨ï¼ˆå¦‚GCCã€G++ï¼‰ã€æ„å»ºå·¥å…·ä»¥åŠå¼€å‘ç¯å¢ƒï¼ˆå¦‚IDEï¼šVSCodeã€CLionç­‰ï¼‰ã€‚å¼€å‘ç³»ç»Ÿï¼ˆå¦‚Windowsã€Linuxã€MacOSï¼‰ä¹Ÿå¯ä»¥è§†ä¸ºæ”¯æ’‘å·¥å…·é“¾çš„ä¸€éƒ¨åˆ†ã€‚\nè¿™ä¹ˆè¯´èƒ½ç†è§£å—ï¼Ÿå°±å¥½æ¯”ä½ è¦åƒé¥­ï¼Œå¾—å…ˆè¦ç”¨æ°´æ´—ç±³ï¼Œç„¶åè£…æ°´åå†ç”¨ç”µé¥­é”…ç…®ç±³å¯¹å§ï¼Ÿåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ ç”¨åˆ°çš„æ°´ã€ç”µã€ç”µé¥­é”…éƒ½æ˜¯å·¥å…·é“¾ä¸­çš„ä¸€ç¯ã€‚\nä¸ºä»€ä¹ˆè¦æ¥äº†è§£å·¥å…·é“¾\rå¯¹äºå…¥é—¨èœé¸Ÿæ¥è¯´ï¼Œä»–æ‰€å­¦çš„ï¼Œä»–æ‰€çœ‹åˆ°çš„ï¼Œæœªå¿…æ˜¯å…¨é¢å’Œç»å¯¹æ­£ç¡®çš„ï¼Œçºµè§‚å„å¤§æ•™ç¨‹ï¼Œå¾ˆå°‘äººä¼šçœŸæ­£çš„å»å¼•å¯¼ä¸€ä¸ªåˆšåˆšå…¥é—¨è®¡ç®—æœºã€åˆšå­¦ä¹ ç¼–ç¨‹çš„å°ç™½èœé¸Ÿã€‚\nå·¥å…·é“¾çš„ç†è§£æˆ‘è®¤ä¸ºæ˜¯æ–°æ‰‹å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚ä¸‹é¢ä»£ç ï¼š\n1//åªæœ‰Gccå·¥å…·é“¾çš„ç¼–è¯‘å™¨æ‰èƒ½æ‰§è¡Œ 2#include \u0026lt;stdio.h\u0026gt; 3 4int main() { 5 int n; 6 scanf(\u0026#34;%d\u0026#34;, \u0026amp;n); 7 8 // å¯å˜é•¿æ•°ç»„ 9 int arr[n]; 10 11 // åˆå§‹åŒ–æ•°ç»„ 12 for (int i: 0; i \u0026lt; n; i++) { 13 arr[i]: i * i; 14 } 15 16 // æ‰“å°æ•°ç»„ 17 printf(\u0026#34;Array elements are:\\n\u0026#34;); 18 for (int i: 0; i \u0026lt; n; i++) { 19 printf(\u0026#34;%d \u0026#34;, arr[i]); 20 } 21 22 printf(\u0026#34;\\n\u0026#34;); 23 24 return 0; 25} å¯ä»¥æ‹¿è¿™æ®µä»£ç å»å„ä¸ªIDEè·‘ä¸€è·‘ï¼Œä½ å°±ä¼šå‘ç°ï¼Œæœ‰çš„IDEä¼šæŠ¥é”™ï¼Œè€Œæœ‰çš„IDEå°±èƒ½è¿‡ã€‚\nè¿™å…¶å®å°±æ˜¯å·¥å…·é“¾ä¸åŒè€Œå¯¼è‡´çš„ä¸€äº›å°å·®å¼‚ï¼Œåæ­£åœ¨æˆ‘åˆå­¦Cè¯­è¨€çš„æ—¶å€™ï¼Œå°±å»ç½‘ä¸Šæ‰¾åˆ°ä¸€äº›æœ‰æ„æ€çš„ä»£ç ï¼Œå¤åˆ¶ä¸‹æ¥ç›´æ¥è·‘ï¼ˆå¦‚çƒŸèŠ±å¤§çˆ†ç‚¸ã€ ä»£ç é›¨ï¼‰ä½†æ˜¯å¾ˆå¤šæ—¶å€™éƒ½ä¼šé‡ä¸Šä¸€è·¯æŠ¥çº¢ã€‚\nè¿™å…¶å®ä¸æ˜¯ä»£ç æœ‰é—®é¢˜ï¼Œä¹Ÿä¸æ˜¯ä½ çš„ç”µè„‘æœ‰é—®é¢˜ï¼Œè€Œæ˜¯å•çº¯çš„ä½ ä»¬å¼€å‘ç¯å¢ƒä¸ä¸€è‡´å¯¼è‡´çš„ã€‚\næ›´åŠ ç¦»è°±çš„æ˜¯ä¸‹é¢çš„ ä»£ç ï¼š\n1 2#include \u0026lt;stdio.h\u0026gt; 3 4int main(void) { 5 long double arr[100]; 6 scanf(\u0026#34;%lf\u0026#34;,\u0026amp;arr); 7 printf(\u0026#34;%lf\u0026#34;,arr); 8 return 0; 9} ä½ ä¼šå‘ç°è¿™æ®µä»£ç ï¼Œåœ¨VScodeå’ŒDevC++ä¸Šè·‘å‡ºæ¥çš„ç»“æœå§‹ç»ˆä¸º0.000,å…¶å®åŸå› å°±æ˜¯å› ä¸ºä»–ä»¬ç”¨çš„å·¥å…·é“¾æ˜¯GCCï¼Œå¦‚æœä½ ç”¨çš„æ˜¯VSï¼Œé‚£å°±èƒ½è·‘å‡ºæ­£ç¡®çš„ç»“æœï¼Œå› ä¸ºVSç”¨çš„æ˜¯MSVCã€‚\nä½ å¯èƒ½åœ¨çœ‹æ•™å­¦è§†é¢‘çš„æ—¶å€™ï¼Œç”¨çš„ä¸æ˜¯å’Œåšä¸»åŒä¸€ä¸ªideæ¥å†™ä»£ç ï¼Œè¿™æ—¶å€™å¦‚æœä½ å»å¤ç°ä»–çš„ä»£ç ï¼Œå¯èƒ½å°±ä¼šå‡ºç°æˆ‘åˆšæ‰ä¸¾çš„è¿™ä¸¤ä¸ªä¾‹å­ã€‚\nä½ å¤ç°ä¸å‡ºæ¥ï¼Œä½ ä¼šç™¾æ€ä¸å¾—å…¶è§£ï¼Œå…¶å®æ˜¯ä½ ä¸€å¼€å§‹ä½ å°±å·²ç»æŠ›ç©ºäº†ä½ å­¦ä¹ çš„åœ°åŸºï¼Œä½ éƒ½ä¸çŸ¥é“Cè¯­è¨€èƒ½å¤Ÿè¢«ç¼–è¯‘æ‰§è¡Œçš„æµç¨‹å’ŒåŸç†ï¼Œä½ å°±ä¼šå­¦å¾—è¿·è¿·ç³Šç³Šï¼Œæˆ–è®¸ä½ æ˜¯ç»ƒæ­¦å¤©æ‰ï¼Œè¿™ç§å€’é€†è¡Œæ–½ä¸‹æ²¡èµ°ç«å…¥é­”ä¹Ÿå¯ä»¥è¯´æ˜¯ éŸ§æ€§ä¸é”™ã€‚\n","date":"2024-09-26T22:45:35+08:00","image":"https://tuchuang.liushuiyu.cn/img/C%E8%AF%AD%E8%A8%80%E5%B7%A5%E5%85%B7%E9%93%BE.png","permalink":"https://blog.liushuiyu.cn/p/c%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8--%E5%B7%A5%E5%85%B7%E9%93%BE/","title":"Cè¯­è¨€å…¥é—¨--å·¥å…·é“¾"},{"content":"å®ç°åŠŸèƒ½ï¼š\rèƒ½å¤Ÿå®ç°è‡ªåŠ¨è¯†åˆ«é»‘çº¿ï¼Œå®Œæˆ5è·¯å¾ªè¿¹ã€‚ èƒ½å¤Ÿé€šè¿‡è“ç‰™äº89C52ç³»åˆ—èŠ¯ç‰‡ä¸²å£é€šä¿¡æ§åˆ¶å°è½¦ èƒ½å¤Ÿè‡ªåŠ¨æ„Ÿåº”éšœç¢ç‰©å®ç°è‡ªåŠ¨åˆ¹åœã€‚ å‡†å¤‡ææ–™ï¼š\r89C52èŠ¯ç‰‡åŠæœ€å°ç³»ç»Ÿæ¿ ï¼Œ L298næ¨¡å—ï¼Œ æ¨¡æ‹Ÿé‡5è·¯å¾ªè¿¹æ¨¡å—, ç¨³å‹æ¨¡å—ï¼Œ HC-06æ¨¡å—ï¼Œ è¶…å£°æ³¢æ¨¡å—ï¼Œ äºšå·§å…‹åŠ›æ¿ï¼Œ 4ä¸ªç”µæœºï¼Œ 12vDCç”µæºï¼Œ DCè½¬æ¥æ¯å¤´ æ™®é€šå°è½¦ä½¿èƒ½å®ç°åŸç†ï¼š\råˆ©ç”¨51å•ç‰‡æœºIOå£æ§åˆ¶L298næ¨¡å—å¼•è„šä¾›ç”µå®ç°å¯¹ç”µæœºè§¦å‘ã€‚å†é€šè¿‡ENä½¿èƒ½ç«¯è¿›è¡ŒPWMè°ƒé€Ÿï¼Œå®ç°è½¬å¼¯ï¼Œæ¼‚ç§»ï¼Œè½¬åœˆç­‰ç‰¹æ®Šè½¬é€Ÿã€‚\nINä¸ºL298Næ¨¡å—æ§åˆ¶å¼•è„š\nENä¸ºL298Næ¨¡å—ä½¿èƒ½å¼•è„š\nL298Næ¨¡å—å•è¾¹INä¸º0,0æ—¶ï¼Œç”µæœºåœæ­¢è½¬åŠ¨ï¼Œä¸º1,0 ã€0,1æ—¶æ­£è½¬ã€åè½¬\n1#include \u0026lt;REGX52.H\u0026gt; 2unsigned char Duty_left,Duty_right,j=0,i=0; 3//l298n 4sbit IN11=P0^2;//å·¦å‰è½® 5sbit IN12=P0^1; 6 7sbit IN13=P0^3;//å³å‰è½® 8sbit IN14=P0^4; 9 10sbit IN21=P1^1;//å·¦åè½® 11sbit IN22=P1^2; 12 13sbit IN23=P1^4;//å³åè½® 14sbit IN24=P1^3; 15 16//ä½¿èƒ½ç«¯ 17sbit EN1A=P0^0;//å·¦å‰ 18sbit EN1B=P0^5;//å³å‰1 19sbit EN2A=P1^6;//å·¦å 20sbit EN2B=P1^7;//å³å1 21 22 //å®šæ—¶å™¨+ä¸­æ–­ 23void Timer0_Init()\t//100å¾®ç§’@11.0592MHz 24{ 25 TMOD|=0x01;//å®šæ—¶å™¨T0ï¼Œï¼Œå·¥ä½œæ–¹å¼éƒ½ä¸ºæ–¹å¼1 26 TH0=0xff;//å®šæ—¶ff9c0.1ms fe0c0.5ms 27 TL0=0x9c; 28 29 EA=1; //å¼€å¯æ€»ä¸­æ–­ 30 ET0=1;//å¼€å¯ä¸­æ–­å…è®¸ 31 TR0=1;//å¼€å¯å®šæ—¶å™¨ä¸­æ–­ 32} 33//åˆ©ç”¨ä¸­æ–­ï¼ŒPWMè°ƒé€Ÿ 34void Timer0_Routine() interrupt 1 35{ 36 TH0=0xff;//å®šæ—¶ff9c0.1ms fe0c0.5ms 37 TL0=0x9c; 38\t39 i++; 40 j++; 41 42if(i\u0026lt;=Duty_left) 43\t{ 44\tEN1A=1; 45\tEN2A=1; 46\t} 47else 48\t{ 49\tEN1A=0; 50\tEN2A=0; 51\t} 52if(j\u0026lt;=Duty_right) 53\t{ 54\tEN1B=1; 55\tEN2B=1; 56\t} 57else 58\t{ 59\tEN1B=0; 60\tEN2B=0; 61\t} 62\t63\tif(i==100) //è®¾ç½®pwmå‘¨æœŸ=0.1ms*100=10ms,è¿™æ ·å¼€å¤´å®šä¹‰çš„å˜é‡æ­£å¥½è¡¨ç¤ºå ç©ºæ¯”æ•°å€¼ 64 { 65 i=0;//åŠ åˆ°100åå˜ä¸º0ï¼Œé‡æ–°è®¡æ•° 66 } 67 if(j==100) //è®¾ç½®pwmå‘¨æœŸ=0.1ms*100=10ms,è¿™æ ·å¼€å¤´å®šä¹‰çš„å˜é‡æ­£å¥½è¡¨ç¤ºå ç©ºæ¯”æ•°å€¼ 68 { 69 j=0; 70 } 71 72} è“ç‰™å°è½¦åŸç†ï¼š\ré€šè¿‡å°†è“ç‰™æ¨¡å—çš„{% label TX %}ä¸{% label RX %}ä¸å•ç‰‡æœºäº¤å‰ç›¸æ¥è¿›è¡Œä¸²å£é€šä¿¡ï¼Œå®ç°æ”¶å‘æ•°æ®ã€‚\n1#include \u0026lt;REGX52.H\u0026gt; 2//l298n 3sbit IN11=P0^2;//å·¦å‰è½® 4sbit IN12=P0^1; 5 6sbit IN13=P0^3;//å³å‰è½® 7sbit IN14=P0^4; 8 9sbit IN21=P1^1;//å·¦åè½® 10sbit IN22=P1^2; 11 12sbit IN23=P1^4;//å³åè½® 13sbit IN24=P1^3; 14 15char i; 16unsigned char ReceiveData; //æ¥æ”¶åˆ°çš„æ•°æ®å­˜æ”¾å˜é‡ 17//å‘å·¦è½¬ 18void correct_left() 19{ 20 IN11=0; 21 IN12=0; 22\tIN21=0; 23 IN22=0; 24\t25 IN13=1; 26 IN14=0; 27\tIN23=1; 28 IN24=0; 29 30 31} 32//å‘å³è½¬ 33void correct_right() 34{ 35 IN11=1; 36 IN12=0; 37\tIN21=1; 38 IN22=0; 39\t40 IN13=0; 41 IN14=0; 42\tIN23=0; 43 IN24=0; 44 45 46} 47 48//å·¦è½¬ 49void Left_turning() 50{ 51 52 IN11=0; 53 IN12=1; 54 IN21=0; 55 IN22=1; 56\t57 IN13=1; 58 IN14=0; 59 IN23=1; 60 IN24=0; 61} 62//å³è½¬ 63void Right_turning() 64{ 65 66 IN11=1; 67 IN12=0; 68 IN21=1; 69 IN22=0; 70\t71 IN13=0; 72 IN14=1; 73 IN23=0; 74 IN24=1; 75} 76//å°è½¦ç›´èµ°å‰è¡Œï¼Œä¸æ‹å¼¯é€Ÿåº¦èµ‹å€¼ 77void forward_move() 78{ 79 80 IN11=1; 81 IN12=0; 82 IN21=1; 83 IN22=0; 84\t85 IN13=1; 86 IN14=0; 87 IN23=1; 88 IN24=0; 89} 90 91void back() 92{ 93 94 IN11=0; 95 IN12=1; 96 IN21=0; 97 IN22=1; 98\t99 IN13=0; 100 IN14=1; 101 IN23=0; 102 IN24=1; 103} 104 105void stop() 106{ 107 108 IN11=0; 109 IN12=0; 110 IN21=0; 111 IN22=0; 112\t113 IN13=0; 114 IN14=0; 115 IN23=0; 116 IN24=0; 117} 118 119 120 121void receive(unsigned char m)//æ‰§è¡Œå‡½æ•° 122{ 123\tswitch(m) 124\t{ 125\tcase \u0026#39;8\u0026#39;:forward_move();break; 126\tcase \u0026#39;5\u0026#39;:stop();break;//åœæ­¢ 127\t} 128} 129 130void Uart_Init()\t//9600bps@11.0592MHz 131{ 132\tPCON = 0x00;\t//æ³¢ç‰¹ç‡ä¸å€é€Ÿs 133\tSCON = 0x50;\t//8ä½æ•°æ®,å¯å˜æ³¢ç‰¹ç‡ 134\tTMOD = 0x20;\t//è®¾å®šå®šæ—¶å™¨1ä¸º8ä½è‡ªåŠ¨é‡è£…æ–¹å¼ 135\tTL1 = 0xFD;\t//è®¾å®šå®šæ—¶åˆå€¼ 136\tTH1 = 0xFD;\t//è®¾å®šå®šæ—¶å™¨é‡è£…å€¼ 137\tET1 = 0;\t//ç¦æ­¢å®šæ—¶å™¨1ä¸­æ–­ 138\tTR1 = 1;\t//å¯åŠ¨å®šæ—¶å™¨1 139\tEA=1; //æ€»ä¸­æ–­ 140\tES=1; //æ‰“å¼€ä¸²å£ä¸­æ–­ 141} 142 143void Uart_Routine() interrupt 4 //ä¸­æ–­ 144{ 145 stop(); 146 RI=0; //æ¸…é™¤æ¥æ”¶ä¸­æ–­æ ‡å¿—ä½ 147 ReceiveData=SBUF; //é™¤å»æ¥å—çš„æ•°æ® 148\treceive(ReceiveData); 149} 150 151void main() 152{ 153\tUart_Init(); 154\twhile(1); 155} è¶…å£°æ³¢æ€¥åœé¿éšœå°è½¦åŸç†ï¼š\r1.é‡‡ç”¨ IO å£ {% label TRIG %} è§¦å‘æµ‹è·ï¼Œç»™ä¸€ä¸ª 10us çš„é«˜ç”µå¹³ä¿¡å·ï¼›\n2.æ¨¡å—è‡ªåŠ¨å‘é€ 8 ä¸ª 40khz çš„æ–¹æ³¢ï¼Œè‡ªåŠ¨æ£€æµ‹æ˜¯å¦æœ‰ä¿¡å·è¿”å›ï¼›\n3.æœ‰ä¿¡å·è¿”å›ï¼Œé€šè¿‡ IO å£ {% label ECHO %} è¾“å‡ºä¸€ä¸ªé«˜ç”µå¹³ï¼Œé«˜ç”µå¹³æŒç»­çš„æ—¶é—´å°±æ˜¯è¶…å£°æ³¢ä»å‘å°„åˆ°è¿”å›çš„æ—¶é—´ã€‚\n4.æµ‹è¯•è·ç¦»=ï¼ˆé«˜ç”µå¹³æ—¶é—´*å£°é€Ÿï¼ˆ340M/Sï¼‰ï¼‰/2\n{% image https://img2.imgtp.com/2024/05/29/C0lSwYoH.png, alt= %}\n1#include \u0026lt;REGX52.H\u0026gt; 2#include \u0026#34;delay.h\u0026#34; 3sbit Trig=P3^3;//å®šä¹‰è¶…å£°æ³¢æ¨¡å—å¼•è„š 4sbit Echo=P3^2; 5unsigned int a,distance; 6 7int csb() 8{\t9 10\t11\tTMOD \u0026amp;= 0x0F;\t//è®¾ç½®å®šæ—¶å™¨æ¨¡å¼ 12\t13\tTL1 = 0;\t//è®¾ç½®å®šæ—¶åˆå§‹å€¼ 14\tTH1 = 0;\t//è®¾ç½®å®šæ—¶åˆå§‹å€¼ 15\t16\t17\tTrig=1;//å‘å°„20USçš„è„‰å†² 18 Delay10us(2); 19 Trig=0;//å…³é—­ 20\t21\t22 while(!Echo);//ç­‰å¾…è¿”å›è„‰å†² 23 TR1=1; 24 while(!Echo);//è¿”å›è„‰å†²ç»“æŸ 25 TR1=0; 26\t27 a=TH1*256+TL1; 28 TH1=0; 29 TL1=0; 30\t31 distance= a*1.7/100; //è®¡ç®—å…¬å¼ï¼ŒæŒ‰ç…§æ•°æ®æ‰‹å†Œä¸ºå‡†ï¼Œä¸åŒç¯å¢ƒä¸åŒè®¡ç®—æ–¹æ³•ã€‚ 32\t33\tTrig=0; 34\tEcho=0; 35\treturn distance; 36} 37 5è·¯PIDå¾ªè¿¹å°è½¦åŸç†ï¼š\r{% image https://img2.imgtp.com/2024/05/29/jT3cO80Q.png, alt= %}\nç®€å•çš„å¾ªè¿¹å°±æ˜¯é€šè¿‡å¾ªè¿¹æ¨¡å—åé¦ˆç»™å•ç‰‡æœºçš„é«˜ä½ç”µå¹³ä¿¡å·è¿›è¡Œä¸æ–­åˆ¤æ–­å’Œè¿­ä»£ï¼Œåˆ—å‡ºå…¨éƒ¨æƒ…å†µï¼Œè¿™é‡Œå°±ä¸åšèµ˜è¿°ã€‚åœ¨æ­¤åˆ†äº«å’Œå­¦ä¹ å…³äºPIDç®—æ³•å¾ªè¿¹ã€‚\n1#include \u0026lt;REGX52.H\u0026gt; 2 3// å®šä¹‰PIDæ§åˆ¶çš„å‚æ•° 4float Kp = 0.5; // æ¯”ä¾‹ç³»æ•° 5float Ki = 0.2; // ç§¯åˆ†ç³»æ•° 6float Kd = 0.1; // å¾®åˆ†ç³»æ•° 7 8int error = 0; // å½“å‰è¯¯å·® 9int lastError = 0; // ä¸Šä¸€æ¬¡çš„è¯¯å·® 10int integral = 0; // è¯¯å·®çš„ç§¯åˆ† 11int derivative = 0; // è¯¯å·®çš„å¾®åˆ† 12 13// çº¢å¤–å¾ªè¿¹ä¼ æ„Ÿå™¨å®šä¹‰... 14// L298Næ§åˆ¶å¼•è„šå®šä¹‰... 15// ä½¿èƒ½ç«¯å¼•è„šå®šä¹‰... 16// å»¶æ—¶å‡½æ•°å®šä¹‰... 17// Timer0 åˆå§‹åŒ–å‡½æ•°å®šä¹‰... 18// ç”µæœºæ§åˆ¶å‡½æ•°å®šä¹‰... 19 20void CalculatePID() { 21 // æ ¹æ®ä¼ æ„Ÿå™¨çš„è¯»æ•°è®¡ç®—è¯¯å·®ï¼Œè¿™é‡Œå‡è®¾æŒ‰ç…§ä¼ æ„Ÿå™¨æ˜¯5ä¸ªè¿ç»­çš„æ•°å€¼ 22 int sensorValues = (left1 \u0026lt;\u0026lt; 4) | (left2 \u0026lt;\u0026lt; 3) | (mid3 \u0026lt;\u0026lt; 2) | (right4 \u0026lt;\u0026lt; 1) | right5; 23 24 switch(sensorValues) { 25 case 0b00000: 26 case 0b11111: 27 // ç‰¹æ®Šæƒ…å†µå¤„ç†ï¼Œæ¯”å¦‚æ€¥è½¬å¼¯æˆ–è€…ä¸¢çº¿ 28 break; 29 case 0b00100: 30 error = 0; // å°è½¦åœ¨ä¸­å¿ƒçº¿ä¸Š 31 break; 32 //...å…¶å®ƒæƒ…å†µæ ¹æ®ä¼ æ„Ÿå™¨å€¼æ¥è®¾ç½®è¯¯å·®å€¼ 33 } 34 35 // PIDè®¡ç®— 36 integral = integral + error; 37 derivative = error - lastError; 38 int turn = (int)(Kp * error + Ki * integral + Kd * derivative); 39 lastError = error; 40 41 // æ ¹æ®turnè®¡ç®—å·¦å³ç”µæœºçš„å ç©ºæ¯” 42 Duty_left = 26 + turn; 43 Duty_right = 26 - turn; 44 45 // ç¡®ä¿å ç©ºæ¯”åœ¨0-100ä¹‹é—´ 46 Duty_left = Duty_left \u0026lt; 0 ? 0 : (Duty_left \u0026gt; 100 ? 100 : Duty_left); 47 Duty_right = Duty_right \u0026lt; 0 ? 0 : (Duty_right \u0026gt; 100 ? 100 : Duty_right); 48} 49 50// ä¸­æ–­æœåŠ¡å‡½æ•°ï¼Œç”¨äºæ›´æ–°PWMä¿¡å· 51void Timer0_Routine() interrupt 1 { 52 // æ›´æ–°å®šæ—¶å™¨... 53 // PWMæ§åˆ¶ä»£ç ... 54} 55 56void main() { 57 Timer0_Init(); // å®šæ—¶å™¨åˆå§‹åŒ– 58 while(1) { 59 CalculatePID(); // è®¡ç®—PID 60 // æ§åˆ¶ç”µæœº... 61 } 62} ","date":"2024-05-29T01:07:19Z","image":"https://tuchuang.liushuiyu.cn/img/pid51%E5%B0%8F%E8%BD%A6.png","permalink":"https://blog.liushuiyu.cn/p/51%E8%93%9D%E7%89%99pid%E5%BE%AA%E8%BF%B9%E8%B6%85%E5%A3%B0%E6%B3%A2%E6%80%A5%E5%81%9C%E9%81%BF%E9%9A%9C%E5%B0%8F%E8%BD%A6/","title":"51è“ç‰™PIDå¾ªè¿¹è¶…å£°æ³¢æ€¥åœé¿éšœå°è½¦"},{"content":"{% note info simple %}åœ¨Pythonä¸­ï¼Œå˜é‡çš„ç±»å‹æ˜¯åŠ¨æ€çš„ï¼Œè¿™æ„å‘³ç€ä½ ä¸éœ€è¦åœ¨å£°æ˜å˜é‡æ—¶æŒ‡å®šç±»å‹ï¼ŒPythonä¼šæ ¹æ®å˜é‡çš„å€¼è‡ªåŠ¨ç¡®å®šå…¶ç±»å‹ã€‚{% endnote %}\næ•°æ®ç±»å‹\ræ•´æ•°ï¼ˆintï¼‰ï¼šè¡¨ç¤ºæ•´æ•°å€¼ï¼Œä¾‹å¦‚ 1, 2, -5 ç­‰ã€‚ æµ®ç‚¹æ•°ï¼ˆfloatï¼‰ï¼šè¡¨ç¤ºå¸¦æœ‰å°æ•°ç‚¹çš„æ•°å€¼ï¼Œä¾‹å¦‚ 0.23, -4.56 ç­‰ã€‚ å­—ç¬¦ä¸²ï¼ˆstrï¼‰ï¼šè¡¨ç¤ºæ–‡æœ¬æ•°æ®ï¼Œç”¨å•å¼•å·æˆ–åŒå¼•å·æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ \u0026lsquo;hello\u0026rsquo;, \u0026ldquo;world\u0026rdquo; ç­‰ã€‚ å¸ƒå°”å€¼ï¼ˆboolï¼‰ï¼šè¡¨ç¤ºçœŸæˆ–å‡ï¼Œåªæœ‰ä¸¤ä¸ªå€¼ï¼šTrue å’Œ Falseã€‚ åˆ—è¡¨ï¼ˆlistï¼‰ï¼šè¡¨ç¤ºæœ‰åºçš„é›†åˆï¼Œå¯ä»¥åŒ…å«ä¸åŒç±»å‹çš„å…ƒç´ ï¼Œç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ [1, 2, \u0026rsquo;three\u0026rsquo;, 4.0] ã€‚ å…ƒç»„ï¼ˆtupleï¼‰ï¼šç±»ä¼¼äºåˆ—è¡¨ï¼Œä½†æ˜¯å…ƒç´ ä¸èƒ½ä¿®æ”¹ï¼Œç”¨åœ†æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ (1, 2, \u0026rsquo;three\u0026rsquo;, 4.0) ã€‚ å­—å…¸ï¼ˆdictï¼‰ï¼šè¡¨ç¤ºé”®å€¼å¯¹çš„é›†åˆï¼Œç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ {\u0026rsquo;name\u0026rsquo;: \u0026lsquo;Alice\u0026rsquo;, \u0026lsquo;age\u0026rsquo;: 30} ã€‚ é›†åˆï¼ˆsetï¼‰ï¼šè¡¨ç¤ºæ— åºä¸é‡å¤å…ƒç´ çš„é›†åˆï¼Œç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ {1, 2, 3} ã€‚ å˜é‡çš„å®šä¹‰\rå®šä¹‰å˜é‡æ—¶ï¼Œä½ åªéœ€è¦ç»™å˜é‡èµ‹ä¸€ä¸ªå€¼ï¼ŒPythonä¼šè‡ªåŠ¨ç¡®å®šå…¶ç±»å‹ï¼š 1# å®šä¹‰æ•´æ•°å˜é‡ 2x = 10 3 4# å®šä¹‰æµ®ç‚¹æ•°å˜é‡ 5y = 3.14 6 7# å®šä¹‰å­—ç¬¦ä¸²å˜é‡ 8name = \u0026#39;John\u0026#39; 9 10# å®šä¹‰å¸ƒå°”å˜é‡ 11is_true = True 12 13# å®šä¹‰åˆ—è¡¨å˜é‡ 14numbers = [1, 2, 3, 4, 5] 15 16# å®šä¹‰å…ƒç»„å˜é‡ 17point = (10, 20) 18 19# å®šä¹‰å­—å…¸å˜é‡ 20person = {\u0026#39;name\u0026#39;: \u0026#39;Alice\u0026#39;, \u0026#39;age\u0026#39;: 25} 21 22# å®šä¹‰é›†åˆå˜é‡ 23unique_numbers = {1, 2, 3, 2, 1} åœ¨Pythonä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å†…ç½®å‡½æ•°æ¥å¼ºåˆ¶è½¬æ¢å˜é‡çš„ç±»å‹ï¼š\nint(x)ï¼šå°† x è½¬æ¢ä¸ºæ•´æ•°ã€‚ float(x)ï¼šå°† x è½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚ str(x)ï¼šå°† x è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ list(x)ï¼šå°† x è½¬æ¢ä¸ºåˆ—è¡¨ï¼ˆå¦‚æœ x æ˜¯å¯è¿­ä»£çš„ï¼‰ã€‚ tuple(x)ï¼šå°† x è½¬æ¢ä¸ºå…ƒç»„ï¼ˆå¦‚æœ x æ˜¯å¯è¿­ä»£çš„ï¼‰ã€‚ dict(x)ï¼šå°† x è½¬æ¢ä¸ºå­—å…¸ï¼ˆå¦‚æœ x æ˜¯é”®å€¼å¯¹çš„è¿­ä»£ï¼‰ã€‚ set(x)ï¼šå°† x è½¬æ¢ä¸ºé›†åˆï¼ˆå¦‚æœ x æ˜¯å¯è¿­ä»£çš„ï¼‰ã€‚ ä¾‹å¦‚ï¼š\n1# å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•° 2x = 3.99 3x_int = int(x) # x_int çš„å€¼ä¸º 3 4 5# å°†æ•´æ•°è½¬æ¢ä¸ºæµ®ç‚¹æ•° 6y = 5 7y_float = float(y) # y_float çš„å€¼ä¸º 5.0 8 9# å°†æ•´æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸² 10z = 7 11z_str = str(z) # z_str çš„å€¼ä¸º \u0026#39;7\u0026#39; 12 13# å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•° 14s = \u0026#39;123\u0026#39; 15s_int = int(s) # s_int çš„å€¼ä¸º 123 16 17# å°†åˆ—è¡¨è½¬æ¢ä¸ºå…ƒç»„ 18lst = [1, 2, 3] 19lst_tuple = tuple(lst) # lst_tuple çš„å€¼ä¸º (1, 2, 3) 20 21# å°†å…ƒç»„è½¬æ¢ä¸ºåˆ—è¡¨ 22tpl = (4, 5, 6) 23tpl_list = list(tpl) # tpl_list çš„å€¼ä¸º [4, 5, 6] 24 25# å°†å­—å…¸çš„é”®è½¬æ¢ä¸ºé›†åˆ 26dct = {\u0026#39;name\u0026#39;: \u0026#39;Bob\u0026#39;, \u0026#39;age\u0026#39;: 30} 27dct_keys_set = set(dct) # dct_keys_set çš„å€¼ä¸º {\u0026#39;name\u0026#39;, \u0026#39;age\u0026#39;} åŒºåˆ«æ€»ç»“\rå¯å˜æ€§ ï¼šå…ƒç»„æ˜¯ä¸å¯å˜çš„ï¼Œåˆ—è¡¨å’Œé›†åˆæ˜¯å¯å˜çš„ã€‚ æœ‰åºæ€§ ï¼šåˆ—è¡¨å’Œå…ƒç»„æ˜¯æœ‰åºçš„ï¼Œé›†åˆæ˜¯æ— åºçš„ã€‚ é‡å¤æ€§ ï¼šåˆ—è¡¨å’Œå…ƒç»„å¯ä»¥åŒ…å«é‡å¤å…ƒç´ ï¼Œé›†åˆä¸å…è®¸é‡å¤å…ƒç´ ã€‚ æ“ä½œ ï¼šåˆ—è¡¨å’Œé›†åˆæ”¯æŒæ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹å…ƒç´ çš„æ“ä½œï¼Œå…ƒç»„ä¸æ”¯æŒè¿™äº›æ“ä½œã€‚ ç”¨é€” ï¼šå…ƒç»„å¸¸ç”¨äºè¡¨ç¤ºä¸å¯å˜çš„æ•°æ®é›†åˆï¼Œåˆ—è¡¨ç”¨äºå­˜å‚¨æœ‰åºçš„æ•°æ®é›†åˆï¼Œé›†åˆç”¨äºå­˜å‚¨æ— åºä¸”ä¸é‡å¤çš„æ•°æ®é›†åˆã€‚ æ³¨æ„ï¼Œç±»å‹è½¬æ¢å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–ä¸å‡†ç¡®ï¼Œä¾‹å¦‚å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°æ—¶ä¼šä¸¢å¤±å°æ•°éƒ¨åˆ†ï¼Œå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°æ—¶å¦‚æœå­—ç¬¦ä¸²ä¸æ˜¯æœ‰æ•ˆçš„æ•´æ•°è¡¨ç¤ºåˆ™ä¼šå¼•å‘é”™è¯¯ã€‚\n{% note info simple %}åœ¨Pythonä¸­ï¼Œç©ºæ“ä½œï¼ˆpassï¼‰æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå®ƒä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚pass è¯­å¥åœ¨è¯­æ³•ä¸Šæ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯­å¥ï¼Œä½†åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€ä¸ªç©ºæ“ä½œã€‚å®ƒçš„ä¸»è¦ç”¨é€”æ˜¯åœ¨ä½ éœ€è¦ä¸€ä¸ªè¯­å¥çš„åœ°æ–¹æä¾›ä¸€ä¸ªå ä½ç¬¦ï¼Œä½†æš‚æ—¶ä¸å®ç°ä»»ä½•åŠŸèƒ½ã€‚{% endnote %}\nç©ºæ“ä½œçš„æ„ä¹‰ï¼š\rå ä½ç¬¦ï¼šå½“ä½ åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œå¯èƒ½éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªç»“æ„ï¼ˆå¦‚å‡½æ•°ã€ç±»ã€å¾ªç¯ã€æ¡ä»¶è¯­å¥ç­‰ï¼‰ï¼Œä½†è¿˜æ²¡æœ‰å†³å®šæˆ–å®ç°å…·ä½“çš„é€»è¾‘ã€‚ä½¿ç”¨ pass å¯ä»¥é¿å…è¯­æ³•é”™è¯¯ï¼Œå› ä¸ºPythonè¦æ±‚åœ¨è¿™äº›ç»“æ„ä¸­å¿…é¡»æœ‰è¯­å¥ã€‚\nä¿æŒä»£ç ç»“æ„ï¼šåœ¨é‡æ„ä»£ç æˆ–è®¾è®¡APIæ—¶ï¼Œä½ å¯èƒ½éœ€è¦å…ˆä¿æŒä»£ç çš„ç»“æ„å®Œæ•´ï¼Œä»¥ä¾¿åç»­å¡«å……å†…å®¹ã€‚\né¿å…ç¼–è¯‘é”™è¯¯ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœä½ ä¸æä¾›ä¸€ä¸ªè¯­å¥ï¼ŒPythonè§£é‡Šå™¨ä¼šæŠ¥é”™ã€‚pass å¯ä»¥ç”¨æ¥é¿å…è¿™ç§é”™è¯¯ã€‚\nç©ºæ“ä½œçš„è¿ç”¨ï¼š\r1# åœ¨å‡½æ•°ä¸­ä½¿ç”¨ pass 2def my_function(): 3 pass # è¿™é‡Œæš‚æ—¶æ²¡æœ‰å®ç°ä»»ä½•åŠŸèƒ½ 4 5# åœ¨ç±»ä¸­ä½¿ç”¨ pass 6class MyClass: 7 pass # è¿™é‡Œæš‚æ—¶æ²¡æœ‰å®šä¹‰ä»»ä½•æ–¹æ³•æˆ–å±æ€§ 8 9# åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ pass 10if condition: 11 pass # å¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œè¿™é‡Œæš‚æ—¶æ²¡æœ‰æ‰§è¡Œä»»ä½•æ“ä½œ 12else: 13 # å…¶ä»–æ“ä½œ 14 pass 15 16# åœ¨å¾ªç¯ä¸­ä½¿ç”¨ pass 17for item in my_list: 18 pass # è¿™é‡Œæš‚æ—¶æ²¡æœ‰å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œä»»ä½•æ“ä½œ ç©ºæ“ä½œçš„è¿›é˜¶è¿ç”¨ï¼š\rå ä½ç¬¦ï¼šåœ¨ç¼–å†™å¤§å‹ç¨‹åºæ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ pass æ¥å®šä¹‰æ¡†æ¶ï¼Œç„¶åé€æ­¥å¡«å……æ¯ä¸ªéƒ¨åˆ†çš„é€»è¾‘ã€‚\næµ‹è¯•å’Œè°ƒè¯•ï¼šåœ¨è°ƒè¯•ä»£ç æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ pass æ¥ä¸´æ—¶ç¦ç”¨æŸäº›ä»£ç å—ï¼Œä»¥ä¾¿ä¸“æ³¨äºå…¶ä»–éƒ¨åˆ†çš„è°ƒè¯•ã€‚\nè®¾è®¡æ¨¡å¼ï¼šåœ¨æŸäº›è®¾è®¡æ¨¡å¼ä¸­ï¼Œå¦‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ pass æ¥å®šä¹‰æŠ½è±¡æ–¹æ³•æˆ–é’©å­æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åœ¨å­ç±»ä¸­è¢«å®ç°ã€‚\nä»£ç æ–‡æ¡£ï¼šåœ¨ç¼–å†™ä»£ç æ–‡æ¡£æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ pass æ¥è¡¨ç¤ºæŸä¸ªéƒ¨åˆ†æ˜¯â€œå¾…å®ç°â€çš„ï¼Œè¿™æœ‰åŠ©äºå…¶ä»–å¼€å‘è€…ç†è§£ä»£ç çš„å½“å‰çŠ¶æ€ã€‚\nå ä½ç¬¦å˜é‡ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ä»£ç ä¸­å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œä½†æš‚æ—¶ä¸èµ‹äºˆå®ƒä»»ä½•å€¼ã€‚è™½ç„¶è¿™ä¸æ˜¯ pass çš„ç›´æ¥ç”¨é€”ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨ pass æ¥åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ï¼Œä¾‹å¦‚ var = pass ï¼Œå°½ç®¡è¿™å¹¶ä¸å¸¸è§ï¼Œä¹Ÿä¸æ¨èã€‚\næ€»ä¹‹ï¼Œpass æ˜¯ä¸€ä¸ªç®€å•ä½†éå¸¸æœ‰ç”¨çš„è¯­å¥ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ ä¿æŒä»£ç çš„ç»“æ„å®Œæ•´æ€§ï¼ŒåŒæ—¶å…è®¸ä½ é€æ­¥å®ç°ä»£ç çš„é€»è¾‘ã€‚\n","date":"2024-05-10T23:50:02Z","image":"https://tuchuang.liushuiyu.cn/img/py1.jpg","permalink":"https://blog.liushuiyu.cn/p/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0---%E5%8F%98%E9%87%8F%E4%B8%8E%E7%A9%BA%E6%93%8D%E4%BD%9C/","title":"pythonå­¦ä¹ ç¬”è®°---å˜é‡ä¸ç©ºæ“ä½œ"},{"content":"{% note info simple %}Python æ˜¯ä¸€ç§éå¸¸æ³¨é‡ä»£ç æ ¼å¼å’Œç¼©è¿›çš„ç¼–ç¨‹è¯­è¨€ã€‚åœ¨ Python ä¸­ï¼Œç¼©è¿›ä¸ä»…ä»…æ˜¯ç¾è§‚çš„è€ƒé‡ï¼Œå®ƒå®é™…ä¸Šæ˜¯è¯­æ³•çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥å®šä¹‰ä»£ç å—çš„ç»“æ„ã€‚æ­£ç¡®çš„ç¼©è¿›å¯¹äº Python ä»£ç çš„è¿è¡Œè‡³å…³é‡è¦ã€‚{% endnote %}\nåˆ¤æ–­è¯­å¥ï¼ˆæ¡ä»¶è¯­å¥ï¼‰\rPython ä¸­çš„åˆ¤æ–­è¯­å¥ä½¿ç”¨ ***ifã€elifï¼ˆå¯é€‰ï¼‰å’Œ elseï¼ˆå¯é€‰ï¼‰***å…³é”®å­—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„åˆ¤æ–­è¯­å¥çš„ä¾‹å­ï¼š\n1# å•ä¸ª if è¯­å¥ 2if condition: 3 # å¦‚æœ condition ä¸ºçœŸï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç å— 4 pass 5 6# if-else è¯­å¥ 7if condition: 8 # å¦‚æœ condition ä¸ºçœŸï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç å— 9 pass 10else: 11 # å¦‚æœ condition ä¸ºå‡ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç å— 12 pass 13 14# if-elif-else è¯­å¥ 15if condition1: 16 # å¦‚æœ condition1 ä¸ºçœŸï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç å— 17 pass 18elif condition2: 19 # å¦‚æœ condition1 ä¸ºå‡ä¸” condition2 ä¸ºçœŸï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç å— 20 pass 21else: 22 # å¦‚æœæ‰€æœ‰æ¡ä»¶éƒ½ä¸ºå‡ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç å— 23 pass å¾ªç¯è¯­å¥\rPython ä¸­æœ‰ä¸¤ç§å¾ªç¯è¯­å¥ï¼šforå¾ªç¯å’Œwhileå¾ªç¯ã€‚\nfor å¾ªç¯\rforå¾ªç¯ç”¨äºéå†åºåˆ—ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰æˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡ã€‚\nåœ¨Pythonçš„forå¾ªç¯ä¸­ï¼Œç¡®å®æ²¡æœ‰åƒCè¯­è¨€ä¸­é‚£æ ·çš„æ˜¾å¼æ¡ä»¶åˆ¤æ–­å’Œè‡ªå¢/è‡ªå‡æ“ä½œã€‚Pythonçš„forå¾ªç¯æ˜¯ä¸“é—¨è®¾è®¡ç”¨æ¥éå†å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰çš„ï¼Œå®ƒä¼šè‡ªåŠ¨å¤„ç†è¿­ä»£è¿‡ç¨‹ï¼Œä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®åˆå§‹æ¡ä»¶ã€å¾ªç¯æ¡ä»¶å’Œæ›´æ–°è¡¨è¾¾å¼ã€‚\n1for å˜é‡ in å¯è¿­ä»£å¯¹è±¡: 2 # å¾ªç¯ä½“ åœ¨Pythonçš„forå¾ªç¯ä¸­ï¼Œä½ ä¸éœ€è¦æŒ‡å®šä»»ä½•æ¡ä»¶æ¥æ§åˆ¶å¾ªç¯çš„æ¬¡æ•°ï¼Œå› ä¸ºå¾ªç¯æ¬¡æ•°æ˜¯ç”±å¯è¿­ä»£å¯¹è±¡çš„é•¿åº¦å†³å®šçš„ã€‚Pythonä¼šè‡ªåŠ¨éå†å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶å°†å½“å‰å…ƒç´ èµ‹å€¼ç»™å¾ªç¯å˜é‡ï¼Œç„¶åæ‰§è¡Œå¾ªç¯ä½“ã€‚\nä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³éå†ä¸€ä¸ªåˆ—è¡¨å¹¶æ‰“å°æ¯ä¸ªå…ƒç´ ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š\n1numbers = [1, 2, 3, 4, 5] 2for number in numbers: 3 print(number) åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œfor number in numbers: ä¼šè‡ªåŠ¨éå†åˆ—è¡¨ numbersä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶å°†å½“å‰å…ƒç´ èµ‹å€¼ç»™å˜é‡ numberã€‚å¾ªç¯ä½“ä¸­çš„ä»£ç ï¼ˆå³ print(number) ï¼‰ä¼šé’ˆå¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡ã€‚\nwhile å¾ªç¯\rwhileå¾ªç¯åœ¨æ¡ä»¶ä¸ºçœŸæ—¶é‡å¤æ‰§è¡Œä»£ç å—ã€‚\n1while condition: 2 # åªè¦ condition ä¸ºçœŸï¼Œå°±æ‰§è¡Œè¿™é‡Œçš„ä»£ç å— 3 pass ç¤ºä¾‹\rä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ if å’Œ for å¾ªç¯çš„ç®€å•ç¤ºä¾‹ï¼š\n1# éå†åˆ—è¡¨å¹¶æ‰“å°æ¯ä¸ªå…ƒç´  2numbers = [1, 2, 3, 4, 5] 3for number in numbers: 4 if number % 2 == 0: 5 print(f\u0026#34;{number} æ˜¯å¶æ•°\u0026#34;) 6 else: 7 print(f\u0026#34;{number} æ˜¯å¥‡æ•°\u0026#34;) ","date":"2024-05-10T13:38:46Z","image":"https://tuchuang.liushuiyu.cn/img/py2.jpg","permalink":"https://blog.liushuiyu.cn/p/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0---%E5%88%A4%E6%96%AD%E5%BE%AA%E7%8E%AF%E8%AF%AD%E6%B3%95/","title":"pythonå­¦ä¹ ç¬”è®°---åˆ¤æ–­å¾ªç¯è¯­æ³•"},{"content":" {% p blue, å®‰è£…è™šæ‹Ÿæœºçš„ç›®çš„ %}\rè™šæ‹Ÿæœºæ˜¯ç”¨ä¸»æœºçš„å†…å­˜å’ŒCPUå¼€è¾Ÿå‡ºçš„ä¸€ä¸ªç‹¬ç«‹ä¸å¹²æ‰°çš„ç‹¬ç«‹ç©ºé—´ è¿™é‡Œå°±æ˜¯ä¸€ä¸ªå°ä¸–ç•Œï¼Œå¯ä»¥æ˜¯Windosï¼Œlinuxï¼Œmacçš„ä¸–ç•Œï¼Œä¹Ÿå¯ä»¥æ˜¯ä½ è‡ªå·±çš„ä¸–ç•Œã€‚ åœ¨è¿™ï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•å±é™©çš„è½¯ä»¶ï¼Œå¯ä»¥ç»•è¿‡è¯¸å¤šæ£€æŸ¥æƒé™çš„è½¯ä»¶ï¼Œä¸ç”¨æ‹…å¿ƒè¢«ç—…æ¯’æ„ŸæŸ“ï¼Œä¹Ÿä¸\tç”¨æ‹…å¿ƒä¸€äº›è½¯ä»¶æƒé™è¿‡å¤§å¨èƒåˆ°ä¸»æœºï¼Œå› ä¸ºè™šæ‹Ÿæœºå’Œä¸»æœºæ˜¯å®Œå…¨éš”ç¦»å¼€çš„ï¼Œè™šæ‹Ÿæœºä¹Ÿæ— æ³•è¯»å–å’Œè°ƒç”¨ä¸»æœºçš„æƒé™ä¸åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹è™šæ‹Ÿæœºè¿›è¡Œåˆ é™¤é•œåƒï¼Œå°±èƒ½åˆä¸€åˆ‡çš„æ¢å¤å¦‚åˆã€‚\n{% p blue, è™šæ‹Ÿæœºå®‰è£… %}\rå®‰è£…VMware è½¯ä»¶ä»‹ç»ï¼š\nVMwareæ˜¯åŠŸèƒ½æœ€å¼ºå¤§çš„è™šæ‹Ÿæœºè½¯ä»¶ï¼Œç”¨æˆ·å¯ä»¥åœ¨è™šæ‹ŸæœºåŒæ—¶è¿è¡Œå„ç§æ“ä½œç³»ç»Ÿï¼Œè¿›è¡Œå¼€å‘ã€æµ‹è¯•ã€æ¼”ç¤ºå’Œéƒ¨ç½²è½¯ä»¶ï¼Œè™šæ‹Ÿæœºä¸­å¤åˆ¶æœåŠ¡å™¨ã€å°å¼æœºå’Œå¹³æ¿ç¯å¢ƒï¼Œæ¯ä¸ªè™šæ‹Ÿæœºå¯åˆ†é…å¤šä¸ªå¤„ç†å™¨æ ¸å¿ƒã€ä¸»å†…å­˜å’Œæ˜¾å­˜ã€‚\nå…·ä½“å®‰è£…æ•™ç¨‹\nå¯†é’¥ï¼š\nVMware Workstation Pro 16 è®¸å¯è¯å¯†é’¥ï¼Œæ‰¹é‡æ°¸ä¹…æ¿€æ´» 1ZF3R0-FHED2-M80TY-8QYGC-NPKYF 2YF390-0HF8P-M81RQ-2DXQE-M2UT6 3ZF71R-DMX85-08DQY-8YMNC-PPHV8 {% label æ³¨æ„ä¸åŒç‰ˆæœ¬çš„VMwareéœ€è¦çš„å¯†é’¥ä¹Ÿä¸åŒ %}ï¼Œä¸è¿‡è¿™äº›éƒ½æ˜¯å¯ä»¥èƒ½ç™¾åº¦å¾—åˆ°çš„å¯†é’¥ï¼Œæ— éœ€èŠ±é’±ã€‚\n{% p blue, é•œåƒ vmxçš„å¯¼å…¥ %}\rå®‰è£…å¥½ååªéœ€è¦{% span red, å¯¼å…¥ä½ è¦å®‰è£…çš„ç³»ç»Ÿé•œåƒå³å¯ %}ï¼Œä¾‹å¦‚w11ï¼Œw10ï¼Œlinuxçš„é•œåƒã€‚\nå½“ç„¶ä¹Ÿå¯ä»¥ç”¨å·²ç»åšå¥½çš„vmxã€‚ è¿™é‡Œå°±ä¸èµ˜è¯‰äº†ï¼Œç™¾åº¦ä¸€å †æ•™ç¨‹ã€‚\né‚£vmxåˆæ˜¯ä»€ä¹ˆï¼Ÿ\næˆ‘ä»¬éƒ½çŸ¥é“ï¼Œisoæ˜¯ç³»ç»Ÿçš„é•œåƒæ–‡ä»¶ï¼Œè€Œvmxæ˜¯VMwareè™šæ‹Ÿæœºé…ç½®ï¼Œå®ƒæ˜¯è™šæ‹Ÿæœºç³»ç»Ÿæ–‡ä»¶ï¼Œé€šå¸¸é€šè¿‡æ‰“å¼€è¿™ä¸ªè™šæ‹Ÿæœºæ–‡ä»¶ä»¥å¯åŠ¨ç³»ç»Ÿã€‚åŒæ ·ï¼Œæˆ‘ä»¬é€šè¿‡ç¼–è¾‘å®ƒè¿˜å¯ä»¥å®ç°æŸç§é…ç½®éœ€æ±‚ï¼Œå¯ä»¥ç”¨æ–‡æœ¬æ–‡æ¡£çš„æ–¹å¼å°†å…¶æ‰“å¼€ã€‚\nè¿™é‡Œåˆ†äº«ä¸€äº›vmx\nw7ç²¾ç®€ç‰ˆé˜¿é‡Œäº‘ç›˜\nw7ç®€ç²¾ç‰ˆå¤©ç¿¼ç½‘ç›˜\nw7ç®€ç²¾ç‰ˆç™¾åº¦ç½‘ç›˜ æå–ç ï¼šgoxv\nw10ç®€ç²¾ç‰ˆ æå–ç :0537\nä»¥ä¸Šèµ„æºï¼Œçš†æ¥äºç½‘ç»œæ— è¥åˆ©æ€§åˆ†äº«ã€‚\n","date":"2024-05-09T15:33:49Z","image":"https://tuchuang.liushuiyu.cn/img/è™šæ‹Ÿæœºå®‰è£….jpg","permalink":"https://blog.liushuiyu.cn/p/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85w7/w10%E4%BC%98%E5%8C%96%E7%B2%BE%E7%AE%80%E7%89%88/","title":"è™šæ‹Ÿæœºå®‰è£…W7/W10ä¼˜åŒ–ç²¾ç®€ç‰ˆ"},{"content":"å‰è¨€\rä¹‹å‰å†™è¿‡ä¸€ç¯‡åŸºç¡€æ•™ç¨‹ï¼Œä½†æ˜¯ä¸å¤Ÿç›´ç™½å’Œè¿ç»­ï¼Œç° 2024/12/31 å¯¹è¯¥æ–‡ç« é‡æ„ã€‚\nç›®çš„ï¼š å®ç°å­¦ä¹ é€šç­‰ç½‘è¯¾å¹³å°è‡ªåŠ¨æŒ‚è§†é¢‘å’Œç­”é¢˜\nå¯¹ç½‘è¯¾è§†é¢‘ä¸­çš„å¼¹çª—é¢˜ç›®ä½œç­”\nå¯¹è¯¾åä¹ é¢˜è‡ªåŠ¨ä½œç­”ï¼Œå¹¶è®¾ç½®æ­£ç¡®ç‡ä¸ºç•Œé™æäº¤\nè‡ªåŠ¨å¤ä¹ ï¼Œè‡ªåŠ¨ç¿»ppt\nå¯å®šä¹‰å€é€Ÿï¼Œ1å€æ•°ã€2å€æ•°ã€3å€æ•°ç­‰\nåŸç†ï¼š é€šè¿‡æµè§ˆå™¨åŠ è½½æ‰©å±•ç¨‹åºï¼Œç”¨ä»¥å¯åŠ¨jsè„šæœ¬ã€‚\næµè§ˆå™¨ï¼šEdgæµè§ˆå™¨ã€ç«ç‹ã€è°·æ­Œ (ä¸‰é€‰ä¸€)\næ‰©å±•ç¨‹åºï¼šæ²¹çŒ´ã€è„šæœ¬çŒ«ï¼ˆäºŒé€‰ä¸€ï¼‰\nå¼€å§‹\rä¸‹è½½æ‰©å±•\rè¿›å…¥æ²¹çŒ´å®˜ç½‘ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå…ˆé€‰æ‹©ä½ çš„æµè§ˆå™¨,è¿™é‡Œæˆ‘ä»¥Chromeï¼ˆè°·æ­Œä¸ºä¾‹ï¼‰\nç„¶åä¸‹æ‹‰ï¼Œæ‰¾åˆ°ä¸‹è½½è¿™é‡Œï¼Œ è¿™é‡Œæœ‰ä¸¤ç§å®‰è£…æ–¹æ¡ˆï¼Œå…·ä½“å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€ç§æ–¹æ³•ç®€å•å¿«æ·ï¼Œå°±æ­£å¸¸ä¸‹è½½ç„¶åå®‰è£…å°±è¡Œï¼Œä½†æ˜¯å¯¹äºç½‘ç»œæœ‰ç‰¹æ®Šè¦æ±‚ï¼Œä¸€èˆ¬æ— æ³•ç›´è¿ï¼Œéœ€è¦æ¢¯å­ã€‚ æ•…æ­¤æˆ‘ä»¬åˆ†ç±»è®²è¿°ã€‚\nç¬¬ä¸€ç§æ–¹æ¡ˆ\rç‚¹å‡»å»å•†åº—ä¼šè·³è½¬åˆ°chromeå•†åº—ï¼ˆå› ä¸ºæˆ‘æ˜¯è°·æ­Œæµè§ˆå™¨ï¼Œå¦‚æœä½ æ˜¯edgæµè§ˆå™¨ï¼Œå°±é€‰æ‹©edgçš„ï¼Œæ­¤æ—¶ç‚¹å‡»å»å•†åº—å°±ä¼šè·³è½¬åˆ°å¯¹åº”çš„æµè§ˆå™¨å•†åº—ï¼‰\nè¿™æ—¶å€™å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å®‰è£…æˆåŠŸäº†æ²¹çŒ´\nç¬¬äºŒç§æ–¹æ¡ˆ\ræˆ‘ä»¬å…ˆä¸‹è½½å¥½æ‰©å±•ç¨‹åºï¼Œç„¶åäººä¸ºå¯¼å…¥åˆ°æµè§ˆå™¨çš„æ‰©å±•é‡Œé¢ã€‚æ‰€ä»¥ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å…ˆç›´æ¥ä¸‹è½½è¿™ä¸ªæ‰©å±•ç¨‹åºï¼Œä¸‹è½½å¥½åè¦è®°ä½ä½ ä¸‹è½½çš„ä½ç½®åœ¨å“ªã€‚\næ¥ç€æ‰“å¼€æµè§ˆå™¨çš„è®¾ç½®ï¼Œåœ¨è®¾ç½®é‡Œé¢æ‰¾åˆ°æ‰©å±•è¿™ä¸€é€‰é¡¹\nç„¶åè®°å¾—æ‰“å¼€ å¼€å‘è€…æ¨¡å¼ï¼Œå¼€å‘è€…æ¨¡å¼ä¸æ‰“å¼€çš„è¯æ˜¯æ— æ³•å¯¼å…¥æ‰©å±•çš„ã€‚\næ¥ç€å°±å°†æˆ‘ä»¬åˆšåˆšä¸‹è½½å¥½çš„æ‰©å±• ç›´æ¥æ‹–åˆ°è¿™é‡Œã€‚\nç„¶åä¼šå‡ºç°æç¤ºæ¡†è¯¢é—®ä½ æ˜¯å¦æ·»åŠ è¯¥æ‰©å±•ï¼Œé€‰æ‹©æ·»åŠ æ‰©å±•ç¨‹åº\næœ€å æˆ‘ä»¬å°±æˆåŠŸå®‰è£…å¥½äº†æ‰©å±•äº†ã€‚\nå®‰è£…ç½‘è¯¾è„šæœ¬\rç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…å¥½äº†æ‰©å±•ï¼Œåªéœ€è¦å†å®‰è£…å¯¹åº”çš„è„šæœ¬å°±è¡Œäº†ã€‚æˆ‘è¿™é‡Œæ¨èä½¿ç”¨OSCç½‘è¯¾åŠ©æ‰‹ã€‚\né¦–å…ˆæˆ‘ä»¬å…ˆè¿›å…¥è„šæœ¬ç½‘ç«™æœç´¢æˆ‘ä»¬è¦çš„OCSç½‘è¯¾åŠ©æ‰‹ã€‚\nç„¶åå®‰è£…è¯¥è„šæœ¬ è¿™æ—¶å€™ä¼šè·³è½¬åˆ°æ²¹çŒ´è¿™é‡Œï¼Œæˆ‘ä»¬åªéœ€è¦å†æ¬¡ç‚¹å‡»å®‰è£…å°±è¡Œã€‚\rå½“ä½ ç‚¹å‡»å®‰è£…ï¼Œå®‰è£…å®Œæˆåä¼šè‡ªåŠ¨å…³é—­è¯¥ç•Œé¢ï¼Œå¹¶ä¸”é€Ÿåº¦å¾ˆå¿«ï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å»åˆ°æ²¹çŒ´ç®¡ç†ç•Œé¢çœ‹çœ‹æˆ‘ä»¬çš„è„šæœ¬æ˜¯å¦å®‰è£…æˆåŠŸã€‚ç‚¹å‡»æ²¹çŒ´ï¼Œæ‰¾åˆ°ç®¡ç†é¢æ¿ï¼Œè¿›å…¥å…¶ä¸­ã€‚\rå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ˜¯å·²ç»æˆåŠŸå®‰è£…å¥½äº†è¯¥ç½‘è¯¾è„šæœ¬ã€‚\rå½“ç„¶ï¼Œå½“ä½ å®‰è£…å¥½äº†è¯¥ç½‘è¯¾è„šæœ¬ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥è¿›å…¥å­¦ä¹ é€šï¼Œè¿™æ—¶å€™ä¼šæœ‰å¯¹åº”è„šæœ¬çš„å‡ºç°ã€‚\né…ç½®é¢˜åº“\ré…ç½®é¢˜åº“æ•™ç¨‹å‚è€ƒè¨€æºªé¢˜åº“å®˜æ–¹æ•™ç¨‹ æˆ‘åœ¨æ­¤é˜è¿°ä¸€ä¸‹æ²¹çŒ´æ‰©å±•ã€OCSç½‘è¯¾åŠ©æ‰‹ã€è¨€æºªé¢˜åº“ä¹‹é—´çš„å…³ç³»åŠå…¶å„ä½œç”¨ã€‚\næ²¹çŒ´æ‰©å±•ç¨‹åºï¼šä½œä¸ºæµè§ˆå™¨çš„æ‰©å±•ç¨‹åºï¼Œå¯ä»¥è¿è¡Œå„ç§è„šæœ¬å®ç°ä¸åŒåŠŸèƒ½ï¼Œå¦‚æœåˆ·ç½‘è¯¾ï¼Œå±è”½å¹¿å‘Šç­‰ç­‰\nOCSç½‘è¯¾åŠ©æ‰‹ï¼šè„šæœ¬æ–‡ä»¶ï¼Œè¦æƒ³è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šé¢éœ€è¦ç”¨åˆ°æ‰©å±•ç¨‹åºå¦‚æ²¹çŒ´ã€è„šæœ¬çŒ«ï¼Œè¯¥åŠ©æ‰‹å…¨éƒ¨åŠŸèƒ½å…è´¹ï¼Œå¯ä»¥è‡ªåŠ¨åˆ·ç½‘è¯¾ï¼Œä½†æ˜¯æ— æ³•ç­”é¢˜ï¼Œå› ä¸ºç­”é¢˜éœ€è¦å‘é¢˜åº“æŸ¥è¯¢å¯¹åº”é¢˜ç›®ï¼Œå¦‚æœä½ æ²¡é¢˜åº“ï¼Œå°±éœ€è¦ç”¨åˆ«äººçš„é¢˜åº“ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¼šæåˆ°è¨€æºªé¢˜åº“ã€‚\nè¨€æºªé¢˜åº“ï¼šå°±æ˜¯é¢˜åº“ï¼Œé‡Œé¢æœ‰å¾ˆå¤šçš„é¢˜ç›®ã€‚å…·ä½“å¯ä»¥å»å®˜æ–¹è¯¦æƒ…é‡Œçœ‹ã€‚\nç»“è¯­\rå¦‚æœä½ åªæ˜¯æƒ³åˆ·å®Œè¯¾ç¨‹æ—¶é—´ï¼Œè€Œä¸æƒ³ç­”é¢˜ï¼Œé‚£ä¹ˆé¢˜åº“æ˜¯å¯ä»¥ä¸ç”¨é…ç½®çš„ã€‚\nè¿™ç¯‡æ•™ç¨‹ç®—æ˜¯å®Œç»“äº†ï¼Œç®—æ˜¯æ¯”ä¸Šæ¬¡å†™çš„æ›´é€šä¿—ä¸€ç‚¹ã€‚\n","date":"2024-05-05T20:18:12Z","image":"https://tuchuang.liushuiyu.cn/img/ç½‘è¯¾.jpg","permalink":"https://blog.liushuiyu.cn/p/ocs%E7%BD%91%E8%AF%BE%E5%8A%A9%E6%89%8B%E5%AE%9E%E7%8E%B0%E7%BD%91%E8%AF%BE%E8%87%AA%E5%8A%A8%E5%88%B7%E8%AF%BE/","title":"OCSç½‘è¯¾åŠ©æ‰‹å®ç°ç½‘è¯¾è‡ªåŠ¨åˆ·è¯¾"}]