<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Usart通信简易原理图\rGND 供地是为了平衡电压基准，使得双方共用一套电压标准，用于评判高低电压。 Tx ：发送数据 Rx：接收数据 数据的串并转换\rSTM32 的串并转化寄存器\r\u200b\n寄存器 TDR 实现将并行数据转换为串行数据。 寄存器 RDR 实现串行数据转换为并行数据。 串并数据的详细解释\r\u200b\n串行数据是指数据以一个接一个的方式在时间上连续传输，也就是说，数据位是按顺序逐个发送的。这种方式通常用于长距离传输，因为它可以减少所需的线缆数量。 并行数据则是指数据的多个位在同一时刻通过多条通道同时传输，这种方式在短距离传输中效率较高，但由于受限于线路数量和信号干扰，通常不适合长距离通信。 STM32_Usart 模块完整示意图\r\u200b\n状态寄存器(SR)\rSR 寄存器用于指示 USART 的当前状态，包括是否有数据可接收、发送缓冲区是否为空等。\n重要位：\nRXNE（Receive Data Register Not Empty）：接收数据寄存器(RDR)非空，表示有数据接收。 TXE（Transmit Data Register Empty）：发送数据寄存器(TDR)为空，表示可以发送数据。 TC（Transmit Complete）：发送完成 TDR空&&移位寄存器空。 ORE（Overrun Error）：接收溢出错误，表示接收的数据被覆盖。 FE（Framing Error）：帧错误，表示接收到的帧不正确。 PE（Parity Error）：奇偶校验错误标志位 NE（Noise Error）：噪声错误标志位 配置寄存器(CR)\r序号 名称 描述 0 UE (USART Enable) 启用 USART 外设，必须设置此位才能开始通信。 1 TE (Transmitter Enable) 启用发送器，允许数据发送。 2 RE (Receiver Enable) 启用接收器，允许数据接收。 3 R/W (Receiver/Transmit) 设置为 1 时，选择到接收模式，设置为 0 时，选择到发送模式。 4 M (Word Length) 数据位长度（0=8 位，1=9 位）。 5 WAKE (Wake-up method) 唤醒选择（0=普通模式，1=地址模式）。 6 PCE (Parity Control) 奇偶校验使能（0=禁用，1=启用）。 7 PS (Parity Selection) 奇偶校验选择（0=偶校验，1=奇校验）。 8 PEIE (PE Interrupt Enable) 奇偶校验错误中断使能。 9 TXEIE (TX Interrupt Enable) 发送数据寄存器空中断使能。 10 RXNEIE (RX Interrupt Enable) 接收数据寄存器非空中断使能。 11 TEIE (Transmission Error Interrupt Enable) 发送错误中断使能。 12 LBDIE (LIN Break Detection Interrupt Enable) LIN 中断使能。 13 CTSIE (CTS Interrupt Enable) 清除发送中断使能。 14 CBM (Character Match) 字符匹配模式（用在 LIN 模式下）。 15 OVER8 (Oversampling) 过采样模式选择（0=16 倍过采样，1=8 倍过采样）。 \u200b\n"><title>那时我们第一次相遇：USART 1</title><link rel=canonical href=https://blog.liushuiyu.cn/p/%E9%82%A3%E6%97%B6%E6%88%91%E4%BB%AC%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%9B%B8%E9%81%87usart-1/><link rel=stylesheet href=/scss/style.min.b02e013540706ea0ff149f1143b35d312d96477c63776c6e56b4b44cfb7e6e8d.css><meta property='og:title' content="那时我们第一次相遇：USART 1"><meta property='og:description' content="Usart通信简易原理图\rGND 供地是为了平衡电压基准，使得双方共用一套电压标准，用于评判高低电压。 Tx ：发送数据 Rx：接收数据 数据的串并转换\rSTM32 的串并转化寄存器\r\u200b\n寄存器 TDR 实现将并行数据转换为串行数据。 寄存器 RDR 实现串行数据转换为并行数据。 串并数据的详细解释\r\u200b\n串行数据是指数据以一个接一个的方式在时间上连续传输，也就是说，数据位是按顺序逐个发送的。这种方式通常用于长距离传输，因为它可以减少所需的线缆数量。 并行数据则是指数据的多个位在同一时刻通过多条通道同时传输，这种方式在短距离传输中效率较高，但由于受限于线路数量和信号干扰，通常不适合长距离通信。 STM32_Usart 模块完整示意图\r\u200b\n状态寄存器(SR)\rSR 寄存器用于指示 USART 的当前状态，包括是否有数据可接收、发送缓冲区是否为空等。\n重要位：\nRXNE（Receive Data Register Not Empty）：接收数据寄存器(RDR)非空，表示有数据接收。 TXE（Transmit Data Register Empty）：发送数据寄存器(TDR)为空，表示可以发送数据。 TC（Transmit Complete）：发送完成 TDR空&&移位寄存器空。 ORE（Overrun Error）：接收溢出错误，表示接收的数据被覆盖。 FE（Framing Error）：帧错误，表示接收到的帧不正确。 PE（Parity Error）：奇偶校验错误标志位 NE（Noise Error）：噪声错误标志位 配置寄存器(CR)\r序号 名称 描述 0 UE (USART Enable) 启用 USART 外设，必须设置此位才能开始通信。 1 TE (Transmitter Enable) 启用发送器，允许数据发送。 2 RE (Receiver Enable) 启用接收器，允许数据接收。 3 R/W (Receiver/Transmit) 设置为 1 时，选择到接收模式，设置为 0 时，选择到发送模式。 4 M (Word Length) 数据位长度（0=8 位，1=9 位）。 5 WAKE (Wake-up method) 唤醒选择（0=普通模式，1=地址模式）。 6 PCE (Parity Control) 奇偶校验使能（0=禁用，1=启用）。 7 PS (Parity Selection) 奇偶校验选择（0=偶校验，1=奇校验）。 8 PEIE (PE Interrupt Enable) 奇偶校验错误中断使能。 9 TXEIE (TX Interrupt Enable) 发送数据寄存器空中断使能。 10 RXNEIE (RX Interrupt Enable) 接收数据寄存器非空中断使能。 11 TEIE (Transmission Error Interrupt Enable) 发送错误中断使能。 12 LBDIE (LIN Break Detection Interrupt Enable) LIN 中断使能。 13 CTSIE (CTS Interrupt Enable) 清除发送中断使能。 14 CBM (Character Match) 字符匹配模式（用在 LIN 模式下）。 15 OVER8 (Oversampling) 过采样模式选择（0=16 倍过采样，1=8 倍过采样）。 \u200b\n"><meta property='og:url' content='https://blog.liushuiyu.cn/p/%E9%82%A3%E6%97%B6%E6%88%91%E4%BB%AC%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%9B%B8%E9%81%87usart-1/'><meta property='og:site_name' content='liushuiyuのBlog'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='单片机'><meta property='article:tag' content='STM32'><meta property='article:published_time' content='2025-01-06T22:34:07+08:00'><meta property='article:modified_time' content='2025-01-06T22:34:07+08:00'><meta property='og:image' content='https://tuchuang.liushuiyu.cn/img/Usart_post_cover.webp'><meta name=twitter:title content="那时我们第一次相遇：USART 1"><meta name=twitter:description content="Usart通信简易原理图\rGND 供地是为了平衡电压基准，使得双方共用一套电压标准，用于评判高低电压。 Tx ：发送数据 Rx：接收数据 数据的串并转换\rSTM32 的串并转化寄存器\r\u200b\n寄存器 TDR 实现将并行数据转换为串行数据。 寄存器 RDR 实现串行数据转换为并行数据。 串并数据的详细解释\r\u200b\n串行数据是指数据以一个接一个的方式在时间上连续传输，也就是说，数据位是按顺序逐个发送的。这种方式通常用于长距离传输，因为它可以减少所需的线缆数量。 并行数据则是指数据的多个位在同一时刻通过多条通道同时传输，这种方式在短距离传输中效率较高，但由于受限于线路数量和信号干扰，通常不适合长距离通信。 STM32_Usart 模块完整示意图\r\u200b\n状态寄存器(SR)\rSR 寄存器用于指示 USART 的当前状态，包括是否有数据可接收、发送缓冲区是否为空等。\n重要位：\nRXNE（Receive Data Register Not Empty）：接收数据寄存器(RDR)非空，表示有数据接收。 TXE（Transmit Data Register Empty）：发送数据寄存器(TDR)为空，表示可以发送数据。 TC（Transmit Complete）：发送完成 TDR空&&移位寄存器空。 ORE（Overrun Error）：接收溢出错误，表示接收的数据被覆盖。 FE（Framing Error）：帧错误，表示接收到的帧不正确。 PE（Parity Error）：奇偶校验错误标志位 NE（Noise Error）：噪声错误标志位 配置寄存器(CR)\r序号 名称 描述 0 UE (USART Enable) 启用 USART 外设，必须设置此位才能开始通信。 1 TE (Transmitter Enable) 启用发送器，允许数据发送。 2 RE (Receiver Enable) 启用接收器，允许数据接收。 3 R/W (Receiver/Transmit) 设置为 1 时，选择到接收模式，设置为 0 时，选择到发送模式。 4 M (Word Length) 数据位长度（0=8 位，1=9 位）。 5 WAKE (Wake-up method) 唤醒选择（0=普通模式，1=地址模式）。 6 PCE (Parity Control) 奇偶校验使能（0=禁用，1=启用）。 7 PS (Parity Selection) 奇偶校验选择（0=偶校验，1=奇校验）。 8 PEIE (PE Interrupt Enable) 奇偶校验错误中断使能。 9 TXEIE (TX Interrupt Enable) 发送数据寄存器空中断使能。 10 RXNEIE (RX Interrupt Enable) 接收数据寄存器非空中断使能。 11 TEIE (Transmission Error Interrupt Enable) 发送错误中断使能。 12 LBDIE (LIN Break Detection Interrupt Enable) LIN 中断使能。 13 CTSIE (CTS Interrupt Enable) 清除发送中断使能。 14 CBM (Character Match) 字符匹配模式（用在 LIN 模式下）。 15 OVER8 (Oversampling) 过采样模式选择（0=16 倍过采样，1=8 倍过采样）。 \u200b\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://tuchuang.liushuiyu.cn/img/Usart_post_cover.webp'></head><body class=article-page style=display:flex;flex-direction:column><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><l1 class=site-name><a href=/>liushuiyuのBlog</a></l1></header><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li></ol><ol class=right-menu><a href=https://inde.lsyblog.live/ target=_blank class=travelling-button><li id=travelling><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-train"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11 5c6.634.0 10.853 3.11 10.996 7.754L22 13a3 3 0 01-3 3H3a1 1 0 01-1-1V6a1 1 0 011-1zM7 7H4v3h3zm4 0H9v3h3V7.026A19 19 0 0011 7m3.001.257L14 10h5.04c-.979-1.337-2.689-2.306-5.039-2.743M21 18a1 1 0 010 2H3a1 1 0 010-2z"/></svg></li></a><li id=dark-mode-toggle><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-moon"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 1.992a10 10 0 109.236 13.838c.341-.82-.476-1.644-1.298-1.31A6.5 6.5.0 0113.074 3.733l.077-.08c.551-.63.113-1.653-.758-1.653h-.266l-.068-.006-.06-.002z"/></svg></li></ol></aside><div class="container main-container flex on-phone--column extended"><aside class=right-sidebar><div class=sticky-container><div class=author-sticky><div class=widget><div class=author><figure class=site-avatar><a href=/about/><img src=/img/avatar.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🍥</span></figure><div class=site-meta><h1 class=about-site-name><a href=/about/>liushuiyu</a></h1><h2 class=about-site-description>那年分开的太仓促<br>我欠你一句话</h2><ol class=menu-social><li><img src=https://tuchuang.liushuiyu.cn/img/Wechatlogo.png alt=GitHub style=width:24px;height:24px></li><li><img src=https://tuchuang.liushuiyu.cn/img/QQlogo.png alt=GitHub style=width:24px;height:24px></li></ol></div></div></div><style>.author{background:var(--author-background)}.author{display:flex;justify-content:center;align-content:center;padding:0;border:none;height:300px}.author{border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);transition:.3s;position:relative;overflow:hidden;padding:1rem;display:flex;gap:8px;flex-direction:column;align-items:center}</style><style>.site-avatar{position:relative;margin:0;width:80px;height:80px;flex-shrink:0;margin-inline:auto;user-select:none}.site-avatar img{border-radius:50%;position:relative;width:80px;height:80px;user-select:none}.site-avatar .emoji{position:absolute;width:25px;height:25px;line-height:25px;border-radius:100%;bottom:0;right:0;text-align:center;font-size:15px;background-color:var(--card-background);box-shadow:30px}.site-meta{display:flex;flex-direction:column;gap:10px;justify-content:center;margin-inline:auto;align-items:center;user-select:none}.about-site-name{color:#ecf0f1 !important;margin:0;font-size:1.8rem;margin-top:10px;user-select:none}.about-site-name a{color:#ecf0f1 !important}.about-site-description{margin-left:15px;color:rgba(255,255,255,.7);font-weight:400;margin-top:0;font-size:1.6rem;user-select:none;text-align:center}.menu-social svg{stroke:rgba(255,255,255,.7)}</style></div><div class=toc-sticky><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#usart通信简易原理图>Usart通信简易原理图</a></li><li><a href=#数据的串并转换>数据的串并转换</a><ol><li><a href=#stm32-的串并转化寄存器>STM32 的串并转化寄存器</a></li><li><a href=#串并数据的详细解释>串并数据的详细解释</a></li></ol></li><li><a href=#stm32_usart-模块完整示意图>STM32_Usart 模块完整示意图</a><ol><li><a href=#状态寄存器sr>状态寄存器(SR)</a></li><li><a href=#配置寄存器cr>配置寄存器(CR)</a></li><li><a href=#波特率寄存器brr>波特率寄存器(BRR)</a><ol><li><a href=#波特率的定义>波特率的定义</a></li></ol></li></ol></li><li><a href=#双缓冲与连续发送>双缓冲与连续发送</a><ol><li><a href=#双缓冲与连续发送概述>双缓冲与连续发送概述</a></li><li><a href=#stm32f103-双缓冲技术实现>STM32F103 双缓冲技术实现</a></li></ol></li><li><a href=#stm32标准库usart的编程实现>STM32标准库Usart的编程实现</a><ol><li><a href=#基础5大接口>基础5大接口</a></li><li><a href=#usart_init接口>USART_Init接口</a></li><li><a href=#usart_cmd接口>USART_Cmd接口</a></li><li><a href=#usart_senddata接口>USART_SendData接口</a></li><li><a href=#usart_receivedata接口>USART_ReceiveData接口</a></li><li><a href=#usart_getflagstatus接口>USART_GetFlagStatus接口</a></li></ol></li></ol></nav></div></section></div></div></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/%E9%82%A3%E6%97%B6%E6%88%91%E4%BB%AC%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%9B%B8%E9%81%87usart-1/><img src=https://tuchuang.liushuiyu.cn/img/Usart_post_cover.webp loading=lazy alt="Featured image of post 那时我们第一次相遇：USART 1"></a></div><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/p/%E9%82%A3%E6%97%B6%E6%88%91%E4%BB%AC%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%9B%B8%E9%81%87usart-1/>那时我们第一次相遇：USART 1</a></h2></div><footer class=article-time><header class=article-category><a href=/categories/%E4%BB%A3%E7%A0%81%E7%BC%96%E7%A8%8B/>代码编程</a></header><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2025-1-6</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 3 分钟</time></div></footer></div></header><section class=article-content><h2 id=usart通信简易原理图>Usart通信简易原理图</h2><img src=https://tuchuang.liushuiyu.cn/img/image-20250105172816-ltdpdzx.webp style=zoom:150%><ul><li>GND 供地是为了平衡电压基准，使得双方共用一套电压标准，用于评判高低电压。</li><li>Tx ：发送数据 Rx：接收数据</li></ul><h2 id=数据的串并转换>数据的串并转换</h2><h3 id=stm32-的串并转化寄存器>STM32 的串并转化寄存器</h3><p><img src=https://tuchuang.liushuiyu.cn/img/image-20250106202849-l2ex87r.webp alt=image style=zoom:150%>​</p><ul><li>寄存器 TDR 实现将并行数据转换为串行数据。</li><li>寄存器 RDR 实现串行数据转换为并行数据。</li></ul><h3 id=串并数据的详细解释>串并数据的详细解释</h3><p><img src=https://tuchuang.liushuiyu.cn/img/image-20250106201019-g40kzlz.webp alt=image style=zoom:150%>​</p><ul><li>串行数据是指数据以一个接一个的方式在时间上连续传输，也就是说，数据位是按顺序逐个发送的。这种方式通常用于长距离传输，因为它可以减少所需的线缆数量。</li><li>并行数据则是指数据的多个位在同一时刻通过多条通道同时传输，这种方式在短距离传输中效率较高，但由于受限于线路数量和信号干扰，通常不适合长距离通信。</li></ul><h2 id=stm32_usart-模块完整示意图>STM32_Usart 模块完整示意图</h2><p><img src=https://tuchuang.liushuiyu.cn/img/image-20250106170147-po6k7k8.webp alt=image style=zoom:150%>​</p><h3 id=状态寄存器sr>状态寄存器(SR)</h3><ul><li><p>SR 寄存器用于指示 USART 的当前状态，包括是否有数据可接收、发送缓冲区是否为空等。</p></li><li><p>重要位：</p><ul><li>RXNE（Receive Data Register Not Empty）：接收数据寄存器(RDR)非空，表示有数据接收。</li><li>TXE（Transmit Data Register Empty）：发送数据寄存器(TDR)为空，表示可以发送数据。</li><li>TC（Transmit Complete）：发送完成 TDR空&&移位寄存器空。</li><li>ORE（Overrun Error）：接收溢出错误，表示接收的数据被覆盖。</li><li>FE（Framing Error）：帧错误，表示接收到的帧不正确。</li><li>PE（Parity Error）：奇偶校验错误标志位</li><li>NE（Noise Error）：噪声错误标志位</li></ul></li></ul><h3 id=配置寄存器cr>配置寄存器(CR)</h3><div class=table-wrapper><table><thead><tr><th>序号</th><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>UE (USART Enable)</td><td>启用 USART 外设，必须设置此位才能开始通信。</td></tr><tr><td>1</td><td>TE (Transmitter Enable)</td><td>启用发送器，允许数据发送。</td></tr><tr><td>2</td><td>RE (Receiver Enable)</td><td>启用接收器，允许数据接收。</td></tr><tr><td>3</td><td>R/W (Receiver/Transmit)</td><td>设置为 1 时，选择到接收模式，设置为 0 时，选择到发送模式。</td></tr><tr><td>4</td><td>M (Word Length)</td><td>数据位长度（0=8 位，1=9 位）。</td></tr><tr><td>5</td><td>WAKE (Wake-up method)</td><td>唤醒选择（0=普通模式，1=地址模式）。</td></tr><tr><td>6</td><td>PCE (Parity Control)</td><td>奇偶校验使能（0=禁用，1=启用）。</td></tr><tr><td>7</td><td>PS (Parity Selection)</td><td>奇偶校验选择（0=偶校验，1=奇校验）。</td></tr><tr><td>8</td><td>PEIE (PE Interrupt Enable)</td><td>奇偶校验错误中断使能。</td></tr><tr><td>9</td><td>TXEIE (TX Interrupt Enable)</td><td>发送数据寄存器空中断使能。</td></tr><tr><td>10</td><td>RXNEIE (RX Interrupt Enable)</td><td>接收数据寄存器非空中断使能。</td></tr><tr><td>11</td><td>TEIE (Transmission Error Interrupt Enable)</td><td>发送错误中断使能。</td></tr><tr><td>12</td><td>LBDIE (LIN Break Detection Interrupt Enable)</td><td>LIN 中断使能。</td></tr><tr><td>13</td><td>CTSIE (CTS Interrupt Enable)</td><td>清除发送中断使能。</td></tr><tr><td>14</td><td>CBM (Character Match)</td><td>字符匹配模式（用在 LIN 模式下）。</td></tr><tr><td>15</td><td>OVER8 (Oversampling)</td><td>过采样模式选择（0=16 倍过采样，1=8 倍过采样）。</td></tr></tbody></table></div><p><img src=https://tuchuang.liushuiyu.cn/img/image-20250106172304-oj6745a.webp alt=image style=zoom:150%>​</p><ul><li><p>CR 寄存器主要用于<em><strong>数据帧</strong></em>的配置，数据帧通常由<em><strong>起始位</strong></em>(1 bit)+ <em><strong>数据位</strong></em>(8~9 bit)+ <em><strong>停止位</strong></em>(0.5、1、1.5、2 bit)构成。</p></li><li><p>M - 数据位长度</p></li><li><p>PCE - 奇偶校验使能</p></li><li><p>PS - 奇偶选择</p></li><li><p>STOP - 停止位长度</p><ul><li>STOP: 00 ~ 1 位</li><li>STOP: 01 ~ 0.5 位</li><li>STOP: 10 ~ 2 位</li><li>STOP: 11 ~ 1.5 位</li></ul></li><li><p>TEX - 发送开关</p></li><li><p>REX - 接收开关</p></li><li><p>UE - Usart 使能</p><ul><li>UE: 0 Usart 禁止</li><li>UE: 1 Usart 使能</li></ul></li></ul><h3 id=波特率寄存器brr>波特率寄存器(BRR)</h3><h4 id=波特率的定义>波特率的定义</h4><p><em><strong>波特率：每秒传输码元的个数</strong></em></p><h5 id=brr-寄存器位数解释>BRR 寄存器位数解释</h5><p><img src=https://tuchuang.liushuiyu.cn/img/image-20250106173254-j99cwkq.webp alt=image style=zoom:150%>​</p><h2 id=双缓冲与连续发送>双缓冲与连续发送</h2><h3 id=双缓冲与连续发送概述>双缓冲与连续发送概述</h3><ol><li><p><strong>双缓冲</strong>：</p><ul><li>在 USART 中，双缓冲通常指的是使用两个缓冲区来存储待发送的数据。这样，当一个缓冲区正在发送数据时，另一个缓冲区可以准备下一个发送数据，确保数据的连续性。</li><li>例如，一个缓冲区用于存放正在发送的数据，另一个缓冲区用于接收新的数据，避免因发送延迟而导致数据丢失。</li></ul></li><li><p><strong>连续发送</strong>：</p><ul><li>连续发送是指在没有人为的干预下，USART 能够不断地从缓冲区中读取数据进行发送。这意味着能够在短时间内快速发送多个数据字节，特别适合于需要实时传输大量数据的应用。</li><li>在 STM32F103 中，利用 USART 的发送中断和 DMA（直接内存访问）可以实现高效的连续发送。</li></ul></li></ol><h3 id=stm32f103-双缓冲技术实现>STM32F103 双缓冲技术实现</h3><ol><li><p>发送和接收过程中都有着两个缓冲区，第一缓冲区：TDR/RDR 第二缓冲区：移位寄存器</p><ul><li>第一层发送缓冲：通过判断 TXE 标志位（TXE=1,TDR 为空，TXE=0，TDR 不为空）来决定是否将数据写入到 TDR 寄存器当中。</li><li>第二层发送缓冲：TDR 将数据写入到移位寄存器中，移位寄存器进行串并转换。</li><li>第一层接收缓冲：通过判断 RXEN 标志位（RXEN=1,RDR 不为空，RXEN=0，RDR 不为空）来决定是否将数据写入到移位寄存器当中。</li><li>第二层发送缓冲：移位寄存器实现串并转换将数据写入到RDR寄存器当中 。</li></ul></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-C data-lang=C><span class=line><span class=ln> 1</span><span class=cl><span class=c1>//基于寄存器开发的伪代码
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1>//数据的单个发送
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=c1></span><span class=k>while</span><span class=p>(</span><span class=nl>TXE</span><span class=p>:</span><span class=o>=</span> <span class=mi>0</span><span class=p>);</span><span class=c1>//等待TDR寄存器为空
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1></span><span class=nl>TDR</span><span class=p>:</span> <span class=n>data</span><span class=p>;</span> <span class=c1>//将数据写入TDR寄存器当中
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1></span><span class=k>while</span><span class=p>(</span><span class=n>TC</span><span class=o>==</span><span class=mi>0</span><span class=p>);</span><span class=c1>//等待全部数据发送完毕
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=c1>//数据的连续发送
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=c1></span><span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>	<span class=k>while</span><span class=p>(</span><span class=nl>TXE</span><span class=p>:</span><span class=o>=</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>	<span class=nl>TDR</span><span class=p>:</span> <span class=n>data</span><span class=p>;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=k>while</span><span class=p>(</span><span class=n>TC</span><span class=o>==</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=c1>//数据的接收
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=c1></span><span class=k>while</span><span class=p>(</span><span class=nl>RXEN</span><span class=p>:</span><span class=o>=</span> <span class=mi>0</span><span class=p>);</span><span class=c1>//当接收移位寄存器没有数据时，代表数据已经完整写入RDR中
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=c1></span><span class=nl>a</span><span class=p>:</span> <span class=n>RDR</span><span class=p>;</span> <span class=c1>//通过变量读取RDR寄存器中的数据
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=c1>//连续接收多个数据
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>arr</span><span class=p>[</span><span class=n>MAXSIZE</span><span class=p>];</span>
</span></span><span class=line><span class=ln>20</span><span class=cl><span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>MAXSIZE</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=ln>21</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>	<span class=k>while</span><span class=p>(</span><span class=nl>RXEN</span><span class=p>:</span><span class=o>=</span> <span class=mi>0</span><span class=p>);</span><span class=c1>//当接收移位寄存器没有数据时，代表数据已经完整写入RDR中
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=c1></span>	<span class=n>arr</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>:</span> <span class=n>RDR</span><span class=p>;</span> <span class=c1>//通过变量读取RDR寄存器中的数据
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><h2 id=stm32标准库usart的编程实现>STM32标准库Usart的编程实现</h2><h3 id=基础5大接口>基础5大接口</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>1</span><span class=cl><span class=kt>void</span> <span class=nf>USART_Init</span><span class=p>(</span><span class=err>…</span><span class=p>);</span><span class=c1>// 初始化(帧格式、波特率)
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>USART_Cmd</span><span class=p>(</span><span class=err>…</span><span class=p>);</span><span class=c1>// 总开关
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>USART_SendData</span><span class=p>(</span><span class=err>…</span><span class=p>);</span><span class=c1>//写TDR寄存器
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1></span><span class=kt>uint16_t</span> <span class=nf>USART_ReceiveData</span><span class=p>(</span><span class=err>…</span><span class=p>);</span><span class=c1>//读RDR寄存器
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=c1></span><span class=n>FlagStatus</span> <span class=nf>USART_GetFlagStatus</span><span class=p>(</span><span class=err>…</span><span class=p>);</span><span class=c1>// 读标志位
</span></span></span></code></pre></div><h3 id=usart_init接口>USART_Init接口</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=c1>// @简介：串口初始化
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1>// @参数：USARTx-选择要操作的串口，可以是USART1,USART2,USART3,UART4或USART5
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1>// @参数：USART_InitStruct-初始化参数，USART_IinitTypeDef结构体指针类型
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=c1></span><span class=k>typedef</span> <span class=k>struct</span> <span class=n>USART_InitTypeDef</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>  <span class=kt>uint32_t</span> <span class=n>USART_BaudRate</span><span class=p>;</span>            <span class=cm>/*!&lt; 此成员配置 USART 通信的波特率。*/</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>                                       
</span></span><span class=line><span class=ln> 8</span><span class=cl>  <span class=kt>uint16_t</span> <span class=n>USART_WordLength</span><span class=p>;</span>          <span class=cm>/*!&lt; 指定在帧中传输或接收的数据位数。
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=cm>                                           此参数可以是 @ref USART_Word_Length 的一个值 */</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=kt>uint16_t</span> <span class=n>USART_StopBits</span><span class=p>;</span>            <span class=cm>/*!&lt; 指定传输的停止位数。
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=cm>                                           此参数可以是 @ref USART_Stop_Bits 的一个值 */</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>  <span class=kt>uint16_t</span> <span class=n>USART_Parity</span><span class=p>;</span>              <span class=cm>/*!&lt; 指定奇偶校验模式。
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=cm>                                           此参数可以是 @ref USART_Parity 的一个值。
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=cm>                                           @note 当启用奇偶校验时，计算出的奇偶校验位会插入到传输数据的最高有效位（当字										   长设置为 9 位数据时为第 9 位；当字长设置为 8 位数据时为第 8 位）。 */</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>
</span></span><span class=line><span class=ln>18</span><span class=cl>  <span class=kt>uint16_t</span> <span class=n>USART_Mode</span><span class=p>;</span>                <span class=cm>/*!&lt; 指定接收或发送模式是否启用或禁用。
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=cm>                                           此参数可以是 @ref USART_Mode 的一个值 */</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>  <span class=kt>uint16_t</span> <span class=n>USART_HardwareFlowControl</span><span class=p>;</span> <span class=cm>/*!&lt; 指定硬件流控制模式是否启用或禁用。
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=cm>                                           此参数可以是 @ref USART_Hardware_Flow_Control 的一个值 */</span>
</span></span><span class=line><span class=ln>23</span><span class=cl><span class=p>}</span><span class=n>USART_InitTypeDef</span><span class=p>;</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=kt>void</span> <span class=nf>USART_Init</span><span class=p>(</span><span class=n>USART_TypeDef</span><span class=o>*</span> <span class=n>USARTx</span><span class=p>,</span> <span class=n>USART_InitTypeDef</span><span class=o>*</span> <span class=n>USART_InitStruct</span><span class=p>);</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl><span class=n>USART_InitTypeDef</span> <span class=n>USARTInitStruct</span><span class=p>;</span><span class=c1>//创建结构体变量
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>29</span><span class=cl><span class=c1>//为变量结构体成员赋值
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=c1></span><span class=n>USARTInitStruct</span><span class=p>.</span><span class=n>USART_WordLength</span><span class=o>=</span> <span class=n>xxx</span><span class=p>;</span> 
</span></span><span class=line><span class=ln>31</span><span class=cl><span class=n>USARTInitStruct</span><span class=p>.</span><span class=n>USART_Parity</span><span class=o>=</span><span class=n>xxx</span><span class=p>;</span>
</span></span><span class=line><span class=ln>32</span><span class=cl><span class=n>USARTInitStruct</span><span class=p>.</span><span class=n>USART_StopBits</span><span class=o>=</span><span class=n>xxx</span><span class=p>;</span>
</span></span><span class=line><span class=ln>33</span><span class=cl><span class=n>USARTInitStruct</span><span class=p>.</span><span class=n>USART_Mode</span><span class=o>=</span><span class=n>xxx</span><span class=p>;</span>
</span></span><span class=line><span class=ln>34</span><span class=cl><span class=n>USARTInitStruct</span><span class=p>.</span><span class=n>USART_BaudRate</span><span class=o>=</span><span class=n>xxx</span><span class=p>;</span> <span class=cm>/*!&lt; 此成员配置 USART 通信的波特率。*/</span>
</span></span><span class=line><span class=ln>35</span><span class=cl><span class=n>USARTInitStruct</span><span class=p>.</span><span class=n>USART_HardwareFlowControl</span><span class=o>=</span><span class=n>xxx</span><span class=p>;</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>
</span></span><span class=line><span class=ln>37</span><span class=cl><span class=nf>USART_Init</span><span class=p>(</span><span class=n>USARTx</span><span class=p>,</span><span class=o>&amp;</span><span class=n>USARTInitStruct</span><span class=p>);</span><span class=c1>//调用Init接口
</span></span></span></code></pre></div><h3 id=usart_cmd接口>USART_Cmd接口</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>1</span><span class=cl><span class=c1>// @简介：控制USART总开关的断开和闭合
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=c1>// @参数：USARTx-选择要操作的串口，可以是USART1,USART2,USART3,UART4或USART5
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1>// @参数：NewState-开关状态，ENABLE -闭合，DISABLE -断开
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>USART_Cmd</span><span class=p>(</span><span class=n>USART_TypeDef</span><span class=o>*</span> <span class=n>USARTx</span><span class=p>,</span> <span class=n>FunctionalStateNewState</span><span class=p>);</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=nf>USART_Cmd</span><span class=p>(</span><span class=n>USART1</span><span class=p>,</span> <span class=n>ENABLE</span><span class=p>);</span> <span class=c1>// 闭合USART1开关
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=c1></span><span class=nf>USART_Cmd</span><span class=p>(</span><span class=n>USART1</span><span class=p>,</span> <span class=n>DISABLE</span><span class=p>);</span> <span class=c1>// 断开USART1开关
</span></span></span></code></pre></div><h3 id=usart_senddata接口>USART_SendData接口</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-C data-lang=C><span class=line><span class=ln>1</span><span class=cl><span class=c1>// @简介：向TDR写数据
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=c1>// @参数：USARTx-选择要操作的串口，可以是USART1,USART2,USART3,UART4或USART5
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1>// @参数：Data -要写入的数据
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>USART_SendData</span><span class=p>(</span><span class=n>USART_TypeDef</span><span class=o>*</span> <span class=n>USARTx</span><span class=p>,</span> <span class=kt>uint16_t</span> <span class=n>Data</span><span class=p>);</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=nf>USART_SendData</span><span class=p>(</span><span class=n>USART1</span><span class=p>,</span> <span class=mh>0x5a</span><span class=p>);</span> <span class=c1>// 发送0x5a
</span></span></span></code></pre></div><h3 id=usart_receivedata接口>USART_ReceiveData接口</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>1</span><span class=cl><span class=c1>// @简介：从RDR读取数据
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=c1>// @参数：USARTx-选择要操作的串口，可以是USART1,USART2,USART3,UART4或USART5
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1>// @返回值：读取到的数据
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1></span><span class=kt>uint16_t</span> <span class=nf>USART_ReceiveData</span><span class=p>(</span><span class=n>USART_TypeDef</span><span class=o>*</span> <span class=n>USARTx</span><span class=p>);</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=kt>uint8_t</span> <span class=nl>a</span><span class=p>:</span> <span class=nf>USART_ReceiveData</span><span class=p>(</span><span class=n>USART1</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=usart_getflagstatus接口>USART_GetFlagStatus接口</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=c1>// @简介：向TDR写数据
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1>// @参数：USARTx-选择要操作的串口，可以是USART1,USART2,USART3,UART4或USART5
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1>// @参数：USART_Flag-标志位名称。
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=c1>//可以是USART_FLAG_TXE，USART_FLAG_RXNE，USART_FLAG_ORE，USART_FLAG_TC，USART_FLAG_PE，
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1>//USART_FLAG_PE，USART_FLAG_FE，USART_FLAG_NE
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1>// @返回值：标志位状态，SET -1， RESET -0
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=c1></span><span class=n>FlagStatus</span> <span class=nf>USART_GetFlagStatus</span><span class=p>(</span><span class=n>USART_TypeDef</span><span class=o>*</span> <span class=n>USARTx</span><span class=p>,</span> <span class=kt>uint16_t</span> <span class=n>USART_Flag</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=k>while</span><span class=p>(</span><span class=nf>USART_GetFlagStatus</span><span class=p>(</span><span class=n>USART1</span><span class=p>,</span><span class=n>USART_FLAG_TXE</span><span class=p>)</span><span class=o>==</span><span class=n>RESET</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=k>while</span><span class=p>(</span><span class=nf>USART_GetFlagStatus</span><span class=p>(</span><span class=n>USART1</span><span class=p>,</span><span class=n>USART_FLAG_RXNE</span><span class=p>)</span><span class=o>==</span><span class=n>RESET</span><span class=p>);</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=k>if</span><span class=p>(</span><span class=nf>USART_GetFlagStatus</span><span class=p>(</span><span class=n>USART1</span><span class=p>,</span><span class=n>USART_FLAG_PE</span><span class=p>)</span><span class=o>==</span><span class=n>SET</span><span class=p>){}</span>
</span></span></code></pre></div></section><div class=post-reward data-html2canvas-ignore><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label><div class=qr-code><label class=qr-code-image for=reward><img class=image src=https://tuchuang.liushuiyu.cn/img/wxzf.webp>
<span>微信打赏</span>
</label><label class=qr-code-image for=reward><img class=image src=https://tuchuang.liushuiyu.cn/img/zfbzf.webp>
<span>支付宝打赏</span></label></div></div><footer class=article-footer><section class=article-tags><a href=/tags/%E5%8D%95%E7%89%87%E6%9C%BA/>单片机</a>
<a href=/tags/stm32/>STM32</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class="article-card has-image"><a href=/p/stm32-io%E8%BE%93%E5%87%BA%E4%B8%8E%E8%BE%93%E5%85%A5%E4%B8%80/><div class=article-image><img src=https://tuchuang.liushuiyu.cn/img/%E5%8D%95%E7%89%87%E6%9C%BA.jpg loading=lazy data-key data-hash=https://tuchuang.liushuiyu.cn/img/%E5%8D%95%E7%89%87%E6%9C%BA.jpg></div><div class=article-details><h2 class=article-title>STM32-IO输出与输入（一）</h2></div></a></article><article class="article-card has-image"><a href=/p/c%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8--%E5%B7%A5%E5%85%B7%E9%93%BE/><div class=article-image><img src=https://tuchuang.liushuiyu.cn/img/C%E8%AF%AD%E8%A8%80%E5%B7%A5%E5%85%B7%E9%93%BE.png loading=lazy data-key data-hash=https://tuchuang.liushuiyu.cn/img/C%E8%AF%AD%E8%A8%80%E5%B7%A5%E5%85%B7%E9%93%BE.png></div><div class=article-details><h2 class=article-title>C语言入门--工具链</h2></div></a></article><article class="article-card has-image"><a href=/p/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0---%E5%8F%98%E9%87%8F%E4%B8%8E%E7%A9%BA%E6%93%8D%E4%BD%9C/><div class=article-image><img src=https://tuchuang.liushuiyu.cn/img/py1.jpg loading=lazy data-key data-hash=https://tuchuang.liushuiyu.cn/img/py1.jpg></div><div class=article-details><h2 class=article-title>python学习笔记---变量与空操作</h2></div></a></article><article class="article-card has-image"><a href=/p/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0---%E5%88%A4%E6%96%AD%E5%BE%AA%E7%8E%AF%E8%AF%AD%E6%B3%95/><div class=article-image><img src=https://tuchuang.liushuiyu.cn/img/py2.jpg loading=lazy data-key data-hash=https://tuchuang.liushuiyu.cn/img/py2.jpg></div><div class=article-details><h2 class=article-title>python学习笔记---判断循环语法</h2></div></a></article></div></div></aside><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script src=https://blog.liushuiyu.cn/background/sakura.js></script><style>#TableOfContents>ul,ol{ul, ol { display: none; } .open { display: block; }}</style><script>function initTocHide(){let e=document.querySelector(".widget--toc");if(!e)return;window.addEventListener("scroll",function(){let t=document.querySelector(".active-class");if(!t)return;let n=document.querySelectorAll(".open");n.length>0&&n.forEach(e=>{e.classList.remove("open")}),t.children.length>1&&t.children[1].classList.add("open");let e=t.parentElement;do e.classList.add("open"),e=e.parentElement.parentElement;while(e!==0[0]&&(e.localName==="ul"||e.localName==="ol"))})}initTocHide()</script><style>footer.site-footer{width:100%;position:relative;bottom:0;padding:20px 10px;font-size:1.3rem;font-weight:600;line-height:1.75;color:var(--card-text-color-secondary);background-color:var(--footer-bg);box-shadow:0 -3px 1px -3px var(--card-text-color-main);padding:10px;user-select:none}.footer-info{display:grid;grid-template-columns:1fr auto}.right-footer{text-align:left;display:flex;align-items:right}footer.site-footer a{font-size:15px;color:var(--card-text-color-main);transition:color .2s ease-in-out;margin-inline:15px}.copyright{font-size:15px;color:var(--card-text-color-main) !important;transition:color .2s ease-in-out;margin-inline:15px}</style><div style=display:flex;justify-content:center;align-items:center;flex-direction:column;margin-top:60px;color:var(--card-text-color-main);margin:30px></div><footer class=site-footer><div class=footer-info><div class=left-footer><section class=copyright>&copy;
2024 -
2025 liushuiyu</section></div><section class=totalcount>发表了9篇文章 ·
总计2.08k字</section></div></footer></body></html>