<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£\r1. C++ä¿¡å· â†’ QMLæ§½å‡½æ•°\rC++éƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)\r1// loginmanager.h 2class LoginManager : public QObject 3{ 4 Q_OBJECT 5public: 6 explicit LoginManager(QObject *parent = nullptr); 7 8 Q_INVOKABLE void attemptLogin(const QString &amp;username, const QString &amp;password); 9 10signals: 11 void loginResult(bool success, const QString &amp;message); 12}; 13 14// loginmanager.cpp å®ç°attemptLogin 15void LoginManager::attemptLogin(const QString &amp;username, const QString &amp;password) 16{ 17 // éªŒè¯é€»è¾‘... 18 bool success = (username == "admin" && password == "password"); 19 QString message = success ? "ç™»å½•æˆåŠŸ" : "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"; 20 21 // å‘å‡ºä¿¡å· 22 emit loginResult(success, message); 23} 24 25// æ³¨å†Œåˆ°QML 26qmlRegisterType<LoginManager>("MyApp", 1, 0, "LoginManager"); QMLéƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼\r1import QtQuick 2.15 2import MyApp 1.0 3 4Item { 5 LoginManager { 6 id: loginManager 7 8 // è¯­æ³•ç³–ï¼šç›´æ¥ä½¿ç”¨on+ä¿¡å·å 9 onLoginResult: function(success, message) { 10 if (success) { 11 statusText.text = "æ¬¢è¿å›æ¥!"; 12 statusText.color = "green"; 13 } else { 14 statusText.text = message; 15 statusText.color = "red"; 16 } 17 } 18 } 19 20 Button { 21 text: "ç™»å½•" 22 onClicked: { 23\t//è°ƒç”¨C++ æš´éœ²çš„ Q_INVOKABLE attemptLogin æ–¹æ³• 24 loginManager.attemptLogin(usernameField.text, passwordField.text); 25 } 26 } 27 28 Text { 29 id: statusText 30 text: "è¯·ç™»å½•" 31 } 32} QMLéƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼\r1import QtQuick 2.15 2import MyApp 1.0 3 4Item { 5 LoginManager { 6 id: loginManager 7 } 8 9 // å®šä¹‰å¤„ç†å‡½æ•° 10 function handleLoginResult(success, message) { 11 if (success) { 12 statusText.text = "æ¬¢è¿å›æ¥!"; 13 statusText.color = "green"; 14 } else { 15 statusText.text = message; 16 statusText.color = "red"; 17 } 18 } 19 20 // æ˜¾å¼è¿æ¥ä¿¡å·å’Œæ§½ 21 Component.onCompleted: { 22\t//å°†C++çš„ä¿¡å·ä¸qmlè‡ªå·±å®šä¹‰å¤„ç†å‡½æ•°å…³è” 23 loginManager.loginResult.connect(handleLoginResult); 24 } 25 26 Button { 27 text: "ç™»å½•" 28 onClicked: { 29 loginManager.attemptLogin(usernameField.text, passwordField.text); 30 } 31 } 32 33 Text { 34 id: statusText 35 text: "è¯·ç™»å½•" 36 } 37} 2. QMLä¿¡å· â†’ C++æ§½å‡½æ•°\rQMLéƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)\r1import QtQuick 2.15 2 3Item { 4 id: root 5 6 // å®šä¹‰QMLä¿¡å· 7 signal userAction(string action, var data) 8 9 Button { 10 text: "å‘é€æ•°æ®" 11 onClicked: { 12 // è§¦å‘ä¿¡å· 13 root.userAction("submit", { 14 username: usernameField.text, 15 timestamp: new Date().toISOString() 16 }); 17 } 18 } 19} C++éƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼\r1// datahandler.h 2class DataHandler : public QObject 3{ 4 Q_OBJECT 5 6public: 7 explicit DataHandler(QObject *parent = nullptr); 8 9 // è®¾ç½®QMLæ ¹å¯¹è±¡ 10 void setRootObject(QObject *root); 11 12public slots: 13 // å¤„ç†QMLä¿¡å·çš„æ§½å‡½æ•° 14 void handleUserAction(const QString &amp;action, const QVariant &amp;data); 15}; 16 17// datahandler.cpp 18void DataHandler::setRootObject(QObject *root) 19{ 20 if (!root) return; 21 22 // ä½¿ç”¨QObject::connectçš„è¯­æ³•ç³–å½¢å¼ 23 // è‡ªåŠ¨è¿æ¥åŒåä¿¡å·å’Œæ§½ 24 QObject::connect(root, SIGNAL(userAction(QString,QVariant)), 25 this, SLOT(handleUserAction(QString,QVariant))); 26} 27 28void DataHandler::handleUserAction(const QString &amp;action, const QVariant &amp;data) 29{ 30 qDebug() << "æ”¶åˆ°ç”¨æˆ·æ“ä½œ:" << action; 31 if (data.canConvert<QVariantMap>()) { 32 QVariantMap dataMap = data.toMap(); 33 qDebug() << "ç”¨æˆ·å:" << dataMap["username"].toString(); 34 qDebug() << "æ—¶é—´æˆ³:" << dataMap["timestamp"].toString(); 35 } 36} C++éƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼\r1// datahandler.h 2class DataHandler : public QObject 3{ 4 Q_OBJECT 5 6public: 7 explicit DataHandler(QObject *parent = nullptr); 8 9 // è®¾ç½®QMLæ ¹å¯¹è±¡ 10 void setRootObject(QObject *root); 11 12public slots: 13 // å¤„ç†QMLä¿¡å·çš„æ§½å‡½æ•° 14 void handleUserAction(const QString &amp;action, const QVariant &amp;data); 15}; 16 17// datahandler.cpp 18void DataHandler::setRootObject(QObject *root) 19{ 20 if (!root) return; 21 22 // æ˜¾å¼connectæ–¹å¼ 23 connect(root, SIGNAL(userAction(QString,QVariant)), 24 this, SLOT(handleUserAction(QString,QVariant))); 25 26 // æˆ–ä½¿ç”¨æ–°è¯­æ³•ï¼ˆéœ€è¦å‡½æ•°æŒ‡é’ˆè½¬æ¢ï¼‰ 27 /* 28 connect(root, &amp;QObject::destroyed, this, [this](){ 29 qDebug() << "QMLæ ¹å¯¹è±¡å·²é”€æ¯"; 30 }); 31 */ 32} 33 34void DataHandler::handleUserAction(const QString &amp;action, const QVariant &amp;data) 35{ 36 qDebug() << "æ”¶åˆ°ç”¨æˆ·æ“ä½œ:" << action; 37 if (data.canConvert<QVariantMap>()) { 38 QVariantMap dataMap = data.toMap(); 39 qDebug() << "ç”¨æˆ·å:" << dataMap["username"].toString(); 40 qDebug() << "æ—¶é—´æˆ³:" << dataMap["timestamp"].toString(); 41 } 42} å®ç°ç»†èŠ‚å¯¹æ¯”\rè¯­æ³•ç³–æ–¹å¼\rC++ä¿¡å· â†’ QMLæ§½:\n'><title>è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£</title><link rel=canonical href=https://blog.liushuiyu.cn/p/%E8%AF%AD%E6%B3%95%E7%B3%96-vs-connect-%E5%AE%9E%E7%8E%B0%E5%AF%B9%E6%AF%94%E8%AF%A6%E8%A7%A3/><link rel=stylesheet href=/scss/style.min.7a0c894777fce8962c7d0108df15161da8ccc325a0cf385ad9e4663de7525b26.css><meta property='og:title' content="è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£"><meta property='og:description' content='è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£\r1. C++ä¿¡å· â†’ QMLæ§½å‡½æ•°\rC++éƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)\r1// loginmanager.h 2class LoginManager : public QObject 3{ 4 Q_OBJECT 5public: 6 explicit LoginManager(QObject *parent = nullptr); 7 8 Q_INVOKABLE void attemptLogin(const QString &amp;username, const QString &amp;password); 9 10signals: 11 void loginResult(bool success, const QString &amp;message); 12}; 13 14// loginmanager.cpp å®ç°attemptLogin 15void LoginManager::attemptLogin(const QString &amp;username, const QString &amp;password) 16{ 17 // éªŒè¯é€»è¾‘... 18 bool success = (username == "admin" && password == "password"); 19 QString message = success ? "ç™»å½•æˆåŠŸ" : "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"; 20 21 // å‘å‡ºä¿¡å· 22 emit loginResult(success, message); 23} 24 25// æ³¨å†Œåˆ°QML 26qmlRegisterType<LoginManager>("MyApp", 1, 0, "LoginManager"); QMLéƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼\r1import QtQuick 2.15 2import MyApp 1.0 3 4Item { 5 LoginManager { 6 id: loginManager 7 8 // è¯­æ³•ç³–ï¼šç›´æ¥ä½¿ç”¨on+ä¿¡å·å 9 onLoginResult: function(success, message) { 10 if (success) { 11 statusText.text = "æ¬¢è¿å›æ¥!"; 12 statusText.color = "green"; 13 } else { 14 statusText.text = message; 15 statusText.color = "red"; 16 } 17 } 18 } 19 20 Button { 21 text: "ç™»å½•" 22 onClicked: { 23\t//è°ƒç”¨C++ æš´éœ²çš„ Q_INVOKABLE attemptLogin æ–¹æ³• 24 loginManager.attemptLogin(usernameField.text, passwordField.text); 25 } 26 } 27 28 Text { 29 id: statusText 30 text: "è¯·ç™»å½•" 31 } 32} QMLéƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼\r1import QtQuick 2.15 2import MyApp 1.0 3 4Item { 5 LoginManager { 6 id: loginManager 7 } 8 9 // å®šä¹‰å¤„ç†å‡½æ•° 10 function handleLoginResult(success, message) { 11 if (success) { 12 statusText.text = "æ¬¢è¿å›æ¥!"; 13 statusText.color = "green"; 14 } else { 15 statusText.text = message; 16 statusText.color = "red"; 17 } 18 } 19 20 // æ˜¾å¼è¿æ¥ä¿¡å·å’Œæ§½ 21 Component.onCompleted: { 22\t//å°†C++çš„ä¿¡å·ä¸qmlè‡ªå·±å®šä¹‰å¤„ç†å‡½æ•°å…³è” 23 loginManager.loginResult.connect(handleLoginResult); 24 } 25 26 Button { 27 text: "ç™»å½•" 28 onClicked: { 29 loginManager.attemptLogin(usernameField.text, passwordField.text); 30 } 31 } 32 33 Text { 34 id: statusText 35 text: "è¯·ç™»å½•" 36 } 37} 2. QMLä¿¡å· â†’ C++æ§½å‡½æ•°\rQMLéƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)\r1import QtQuick 2.15 2 3Item { 4 id: root 5 6 // å®šä¹‰QMLä¿¡å· 7 signal userAction(string action, var data) 8 9 Button { 10 text: "å‘é€æ•°æ®" 11 onClicked: { 12 // è§¦å‘ä¿¡å· 13 root.userAction("submit", { 14 username: usernameField.text, 15 timestamp: new Date().toISOString() 16 }); 17 } 18 } 19} C++éƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼\r1// datahandler.h 2class DataHandler : public QObject 3{ 4 Q_OBJECT 5 6public: 7 explicit DataHandler(QObject *parent = nullptr); 8 9 // è®¾ç½®QMLæ ¹å¯¹è±¡ 10 void setRootObject(QObject *root); 11 12public slots: 13 // å¤„ç†QMLä¿¡å·çš„æ§½å‡½æ•° 14 void handleUserAction(const QString &amp;action, const QVariant &amp;data); 15}; 16 17// datahandler.cpp 18void DataHandler::setRootObject(QObject *root) 19{ 20 if (!root) return; 21 22 // ä½¿ç”¨QObject::connectçš„è¯­æ³•ç³–å½¢å¼ 23 // è‡ªåŠ¨è¿æ¥åŒåä¿¡å·å’Œæ§½ 24 QObject::connect(root, SIGNAL(userAction(QString,QVariant)), 25 this, SLOT(handleUserAction(QString,QVariant))); 26} 27 28void DataHandler::handleUserAction(const QString &amp;action, const QVariant &amp;data) 29{ 30 qDebug() << "æ”¶åˆ°ç”¨æˆ·æ“ä½œ:" << action; 31 if (data.canConvert<QVariantMap>()) { 32 QVariantMap dataMap = data.toMap(); 33 qDebug() << "ç”¨æˆ·å:" << dataMap["username"].toString(); 34 qDebug() << "æ—¶é—´æˆ³:" << dataMap["timestamp"].toString(); 35 } 36} C++éƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼\r1// datahandler.h 2class DataHandler : public QObject 3{ 4 Q_OBJECT 5 6public: 7 explicit DataHandler(QObject *parent = nullptr); 8 9 // è®¾ç½®QMLæ ¹å¯¹è±¡ 10 void setRootObject(QObject *root); 11 12public slots: 13 // å¤„ç†QMLä¿¡å·çš„æ§½å‡½æ•° 14 void handleUserAction(const QString &amp;action, const QVariant &amp;data); 15}; 16 17// datahandler.cpp 18void DataHandler::setRootObject(QObject *root) 19{ 20 if (!root) return; 21 22 // æ˜¾å¼connectæ–¹å¼ 23 connect(root, SIGNAL(userAction(QString,QVariant)), 24 this, SLOT(handleUserAction(QString,QVariant))); 25 26 // æˆ–ä½¿ç”¨æ–°è¯­æ³•ï¼ˆéœ€è¦å‡½æ•°æŒ‡é’ˆè½¬æ¢ï¼‰ 27 /* 28 connect(root, &amp;QObject::destroyed, this, [this](){ 29 qDebug() << "QMLæ ¹å¯¹è±¡å·²é”€æ¯"; 30 }); 31 */ 32} 33 34void DataHandler::handleUserAction(const QString &amp;action, const QVariant &amp;data) 35{ 36 qDebug() << "æ”¶åˆ°ç”¨æˆ·æ“ä½œ:" << action; 37 if (data.canConvert<QVariantMap>()) { 38 QVariantMap dataMap = data.toMap(); 39 qDebug() << "ç”¨æˆ·å:" << dataMap["username"].toString(); 40 qDebug() << "æ—¶é—´æˆ³:" << dataMap["timestamp"].toString(); 41 } 42} å®ç°ç»†èŠ‚å¯¹æ¯”\rè¯­æ³•ç³–æ–¹å¼\rC++ä¿¡å· â†’ QMLæ§½:\n'><meta property='og:url' content='https://blog.liushuiyu.cn/p/%E8%AF%AD%E6%B3%95%E7%B3%96-vs-connect-%E5%AE%9E%E7%8E%B0%E5%AF%B9%E6%AF%94%E8%AF%A6%E8%A7%A3/'><meta property='og:site_name' content='liushuiyuã®Blog'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='ç¬”è®°'><meta property='article:tag' content='C++'><meta property='article:tag' content='QT'><meta property='article:published_time' content='2025-08-30T20:26:16+08:00'><meta property='article:modified_time' content='2025-08-30T20:26:16+08:00'><meta property='og:image' content='https://tuchuang.liushuiyu.cn/img/c-qml-logo20250830.webp'><meta name=twitter:title content="è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£"><meta name=twitter:description content='è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£\r1. C++ä¿¡å· â†’ QMLæ§½å‡½æ•°\rC++éƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)\r1// loginmanager.h 2class LoginManager : public QObject 3{ 4 Q_OBJECT 5public: 6 explicit LoginManager(QObject *parent = nullptr); 7 8 Q_INVOKABLE void attemptLogin(const QString &amp;username, const QString &amp;password); 9 10signals: 11 void loginResult(bool success, const QString &amp;message); 12}; 13 14// loginmanager.cpp å®ç°attemptLogin 15void LoginManager::attemptLogin(const QString &amp;username, const QString &amp;password) 16{ 17 // éªŒè¯é€»è¾‘... 18 bool success = (username == "admin" && password == "password"); 19 QString message = success ? "ç™»å½•æˆåŠŸ" : "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"; 20 21 // å‘å‡ºä¿¡å· 22 emit loginResult(success, message); 23} 24 25// æ³¨å†Œåˆ°QML 26qmlRegisterType<LoginManager>("MyApp", 1, 0, "LoginManager"); QMLéƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼\r1import QtQuick 2.15 2import MyApp 1.0 3 4Item { 5 LoginManager { 6 id: loginManager 7 8 // è¯­æ³•ç³–ï¼šç›´æ¥ä½¿ç”¨on+ä¿¡å·å 9 onLoginResult: function(success, message) { 10 if (success) { 11 statusText.text = "æ¬¢è¿å›æ¥!"; 12 statusText.color = "green"; 13 } else { 14 statusText.text = message; 15 statusText.color = "red"; 16 } 17 } 18 } 19 20 Button { 21 text: "ç™»å½•" 22 onClicked: { 23\t//è°ƒç”¨C++ æš´éœ²çš„ Q_INVOKABLE attemptLogin æ–¹æ³• 24 loginManager.attemptLogin(usernameField.text, passwordField.text); 25 } 26 } 27 28 Text { 29 id: statusText 30 text: "è¯·ç™»å½•" 31 } 32} QMLéƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼\r1import QtQuick 2.15 2import MyApp 1.0 3 4Item { 5 LoginManager { 6 id: loginManager 7 } 8 9 // å®šä¹‰å¤„ç†å‡½æ•° 10 function handleLoginResult(success, message) { 11 if (success) { 12 statusText.text = "æ¬¢è¿å›æ¥!"; 13 statusText.color = "green"; 14 } else { 15 statusText.text = message; 16 statusText.color = "red"; 17 } 18 } 19 20 // æ˜¾å¼è¿æ¥ä¿¡å·å’Œæ§½ 21 Component.onCompleted: { 22\t//å°†C++çš„ä¿¡å·ä¸qmlè‡ªå·±å®šä¹‰å¤„ç†å‡½æ•°å…³è” 23 loginManager.loginResult.connect(handleLoginResult); 24 } 25 26 Button { 27 text: "ç™»å½•" 28 onClicked: { 29 loginManager.attemptLogin(usernameField.text, passwordField.text); 30 } 31 } 32 33 Text { 34 id: statusText 35 text: "è¯·ç™»å½•" 36 } 37} 2. QMLä¿¡å· â†’ C++æ§½å‡½æ•°\rQMLéƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)\r1import QtQuick 2.15 2 3Item { 4 id: root 5 6 // å®šä¹‰QMLä¿¡å· 7 signal userAction(string action, var data) 8 9 Button { 10 text: "å‘é€æ•°æ®" 11 onClicked: { 12 // è§¦å‘ä¿¡å· 13 root.userAction("submit", { 14 username: usernameField.text, 15 timestamp: new Date().toISOString() 16 }); 17 } 18 } 19} C++éƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼\r1// datahandler.h 2class DataHandler : public QObject 3{ 4 Q_OBJECT 5 6public: 7 explicit DataHandler(QObject *parent = nullptr); 8 9 // è®¾ç½®QMLæ ¹å¯¹è±¡ 10 void setRootObject(QObject *root); 11 12public slots: 13 // å¤„ç†QMLä¿¡å·çš„æ§½å‡½æ•° 14 void handleUserAction(const QString &amp;action, const QVariant &amp;data); 15}; 16 17// datahandler.cpp 18void DataHandler::setRootObject(QObject *root) 19{ 20 if (!root) return; 21 22 // ä½¿ç”¨QObject::connectçš„è¯­æ³•ç³–å½¢å¼ 23 // è‡ªåŠ¨è¿æ¥åŒåä¿¡å·å’Œæ§½ 24 QObject::connect(root, SIGNAL(userAction(QString,QVariant)), 25 this, SLOT(handleUserAction(QString,QVariant))); 26} 27 28void DataHandler::handleUserAction(const QString &amp;action, const QVariant &amp;data) 29{ 30 qDebug() << "æ”¶åˆ°ç”¨æˆ·æ“ä½œ:" << action; 31 if (data.canConvert<QVariantMap>()) { 32 QVariantMap dataMap = data.toMap(); 33 qDebug() << "ç”¨æˆ·å:" << dataMap["username"].toString(); 34 qDebug() << "æ—¶é—´æˆ³:" << dataMap["timestamp"].toString(); 35 } 36} C++éƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼\r1// datahandler.h 2class DataHandler : public QObject 3{ 4 Q_OBJECT 5 6public: 7 explicit DataHandler(QObject *parent = nullptr); 8 9 // è®¾ç½®QMLæ ¹å¯¹è±¡ 10 void setRootObject(QObject *root); 11 12public slots: 13 // å¤„ç†QMLä¿¡å·çš„æ§½å‡½æ•° 14 void handleUserAction(const QString &amp;action, const QVariant &amp;data); 15}; 16 17// datahandler.cpp 18void DataHandler::setRootObject(QObject *root) 19{ 20 if (!root) return; 21 22 // æ˜¾å¼connectæ–¹å¼ 23 connect(root, SIGNAL(userAction(QString,QVariant)), 24 this, SLOT(handleUserAction(QString,QVariant))); 25 26 // æˆ–ä½¿ç”¨æ–°è¯­æ³•ï¼ˆéœ€è¦å‡½æ•°æŒ‡é’ˆè½¬æ¢ï¼‰ 27 /* 28 connect(root, &amp;QObject::destroyed, this, [this](){ 29 qDebug() << "QMLæ ¹å¯¹è±¡å·²é”€æ¯"; 30 }); 31 */ 32} 33 34void DataHandler::handleUserAction(const QString &amp;action, const QVariant &amp;data) 35{ 36 qDebug() << "æ”¶åˆ°ç”¨æˆ·æ“ä½œ:" << action; 37 if (data.canConvert<QVariantMap>()) { 38 QVariantMap dataMap = data.toMap(); 39 qDebug() << "ç”¨æˆ·å:" << dataMap["username"].toString(); 40 qDebug() << "æ—¶é—´æˆ³:" << dataMap["timestamp"].toString(); 41 } 42} å®ç°ç»†èŠ‚å¯¹æ¯”\rè¯­æ³•ç³–æ–¹å¼\rC++ä¿¡å· â†’ QMLæ§½:\n'><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://tuchuang.liushuiyu.cn/img/c-qml-logo20250830.webp'></head><body class=article-page style=display:flex;flex-direction:column><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><l1 class=site-name><a href=/>liushuiyuã®Blog</a></l1></header><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äº</span></a></li></ol><ol class=right-menu><a href=https://inde.lsyblog.live/ target=_blank class=travelling-button><li id=travelling><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-train"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11 5c6.634.0 10.853 3.11 10.996 7.754L22 13a3 3 0 01-3 3H3a1 1 0 01-1-1V6a1 1 0 011-1zM7 7H4v3h3zm4 0H9v3h3V7.026A19 19 0 0011 7m3.001.257L14 10h5.04c-.979-1.337-2.689-2.306-5.039-2.743M21 18a1 1 0 010 2H3a1 1 0 010-2z"/></svg></li></a><li id=dark-mode-toggle><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-moon"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 1.992a10 10 0 109.236 13.838c.341-.82-.476-1.644-1.298-1.31A6.5 6.5.0 0113.074 3.733l.077-.08c.551-.63.113-1.653-.758-1.653h-.266l-.068-.006-.06-.002z"/></svg></li></ol></aside><div class="container main-container flex on-phone--column extended"><aside class=right-sidebar><div class=sticky-container><div class=author-sticky><div class=widget><div class=author><figure class=site-avatar><a href=/about/><img src=/img/avatar.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=about-site-name><a href=/about/>liushuiyu</a></h1><h2 class=about-site-description>é‚£å¹´åˆ†å¼€çš„å¤ªä»“ä¿ƒ<br>æˆ‘æ¬ ä½ ä¸€å¥è¯</h2><ol class=menu-social><li><img src=https://tuchuang.liushuiyu.cn/img/Wechatlogo.png alt=GitHub style=width:24px;height:24px></li><li><img src=https://tuchuang.liushuiyu.cn/img/QQlogo.png alt=GitHub style=width:24px;height:24px></li></ol></div></div></div><style>.author{background:var(--author-background)}.author{display:flex;justify-content:center;align-content:center;padding:0;border:none;height:300px}.author{border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);transition:.3s;position:relative;overflow:hidden;padding:1rem;display:flex;gap:8px;flex-direction:column;align-items:center}</style><style>.site-avatar{position:relative;margin:0;width:80px;height:80px;flex-shrink:0;margin-inline:auto;user-select:none}.site-avatar img{border-radius:50%;position:relative;width:80px;height:80px;user-select:none}.site-avatar .emoji{position:absolute;width:25px;height:25px;line-height:25px;border-radius:100%;bottom:0;right:0;text-align:center;font-size:15px;background-color:var(--card-background);box-shadow:30px}.site-meta{display:flex;flex-direction:column;gap:10px;justify-content:center;margin-inline:auto;align-items:center;user-select:none}.about-site-name{color:#ecf0f1 !important;margin:0;font-size:1.8rem;margin-top:10px;user-select:none}.about-site-name a{color:#ecf0f1 !important}.about-site-description{margin-left:15px;color:rgba(255,255,255,.7);font-weight:400;margin-top:0;font-size:1.6rem;user-select:none;text-align:center}.menu-social svg{stroke:rgba(255,255,255,.7)}</style></div><div class=toc-sticky><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#1-cä¿¡å·--qmlæ§½å‡½æ•°>1. C++ä¿¡å· â†’ QMLæ§½å‡½æ•°</a><ol><li><a href=#céƒ¨åˆ†-ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨>C++éƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)</a></li><li><a href=#qmléƒ¨åˆ†---è¯­æ³•ç³–æ–¹å¼>QMLéƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼</a></li><li><a href=#qmléƒ¨åˆ†---æ˜¾å¼connectæ–¹å¼>QMLéƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼</a></li></ol></li><li><a href=#2-qmlä¿¡å·--cæ§½å‡½æ•°>2. QMLä¿¡å· â†’ C++æ§½å‡½æ•°</a><ol><li><a href=#qmléƒ¨åˆ†-ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨>QMLéƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)</a></li><li><a href=#céƒ¨åˆ†---è¯­æ³•ç³–æ–¹å¼>C++éƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼</a></li><li><a href=#céƒ¨åˆ†---æ˜¾å¼connectæ–¹å¼>C++éƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼</a></li></ol></li><li><a href=#å®ç°ç»†èŠ‚å¯¹æ¯”>å®ç°ç»†èŠ‚å¯¹æ¯”</a><ol><li><a href=#è¯­æ³•ç³–æ–¹å¼>è¯­æ³•ç³–æ–¹å¼</a></li><li><a href=#æ˜¾å¼connectæ–¹å¼>æ˜¾å¼connectæ–¹å¼</a></li></ol></li><li><a href=#æ€§èƒ½å’Œä½¿ç”¨åœºæ™¯åˆ†æ>æ€§èƒ½å’Œä½¿ç”¨åœºæ™¯åˆ†æ</a><ol><li><a href=#è¯­æ³•ç³–ä¼˜åŠ¿>è¯­æ³•ç³–ä¼˜åŠ¿</a></li><li><a href=#æ˜¾å¼connectä¼˜åŠ¿>æ˜¾å¼connectä¼˜åŠ¿</a></li></ol></li><li><a href=#æ€»ç»“>æ€»ç»“</a></li></ol></nav></div></section></div></div></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/%E8%AF%AD%E6%B3%95%E7%B3%96-vs-connect-%E5%AE%9E%E7%8E%B0%E5%AF%B9%E6%AF%94%E8%AF%A6%E8%A7%A3/><img src=https://tuchuang.liushuiyu.cn/img/c-qml-logo20250830.webp loading=lazy alt="Featured image of post è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£"></a></div><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/p/%E8%AF%AD%E6%B3%95%E7%B3%96-vs-connect-%E5%AE%9E%E7%8E%B0%E5%AF%B9%E6%AF%94%E8%AF%A6%E8%A7%A3/>è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£</a></h2></div><footer class=article-time><header class=article-category><a href=/categories/%E4%BB%A3%E7%A0%81%E7%BC%96%E7%A8%8B/>ä»£ç ç¼–ç¨‹</a></header><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2025-8-30</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 4 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h1 id=è¯­æ³•ç³–-vs-connect-å®ç°å¯¹æ¯”è¯¦è§£>è¯­æ³•ç³– vs connect() å®ç°å¯¹æ¯”è¯¦è§£</h1><h2 id=1-cä¿¡å·--qmlæ§½å‡½æ•°>1. C++ä¿¡å· â†’ QMLæ§½å‡½æ•°</h2><h3 id=céƒ¨åˆ†-ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨>C++éƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln> 1</span><span class=cl><span class=c1>// loginmanager.h
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>LoginManager</span> <span class=o>:</span> <span class=k>public</span> <span class=n>QObject</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=n>Q_OBJECT</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=k>explicit</span> <span class=n>LoginManager</span><span class=p>(</span><span class=n>QObject</span> <span class=o>*</span><span class=n>parent</span> <span class=o>=</span> <span class=k>nullptr</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=n>Q_INVOKABLE</span> <span class=kt>void</span> <span class=nf>attemptLogin</span><span class=p>(</span><span class=k>const</span> <span class=n>QString</span> <span class=o>&amp;</span><span class=n>username</span><span class=p>,</span> <span class=k>const</span> <span class=n>QString</span> <span class=o>&amp;</span><span class=n>password</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=nl>signals</span><span class=p>:</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=kt>void</span> <span class=n>loginResult</span><span class=p>(</span><span class=kt>bool</span> <span class=n>success</span><span class=p>,</span> <span class=k>const</span> <span class=n>QString</span> <span class=o>&amp;</span><span class=n>message</span><span class=p>);</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=c1>// loginmanager.cpp  å®ç°attemptLogin
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=c1></span><span class=kt>void</span> <span class=n>LoginManager</span><span class=o>::</span><span class=n>attemptLogin</span><span class=p>(</span><span class=k>const</span> <span class=n>QString</span> <span class=o>&amp;</span><span class=n>username</span><span class=p>,</span> <span class=k>const</span> <span class=n>QString</span> <span class=o>&amp;</span><span class=n>password</span><span class=p>)</span>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=c1>// éªŒè¯é€»è¾‘...
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=c1></span>    <span class=kt>bool</span> <span class=n>success</span> <span class=o>=</span> <span class=p>(</span><span class=n>username</span> <span class=o>==</span> <span class=s>&#34;admin&#34;</span> <span class=o>&amp;&amp;</span> <span class=n>password</span> <span class=o>==</span> <span class=s>&#34;password&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=n>QString</span> <span class=n>message</span> <span class=o>=</span> <span class=n>success</span> <span class=o>?</span> <span class=s>&#34;ç™»å½•æˆåŠŸ&#34;</span> <span class=o>:</span> <span class=s>&#34;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>    
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=c1>// å‘å‡ºä¿¡å·
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=c1></span>    <span class=n>emit</span> <span class=nf>loginResult</span><span class=p>(</span><span class=n>success</span><span class=p>,</span> <span class=n>message</span><span class=p>);</span>
</span></span><span class=line><span class=ln>23</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl><span class=c1>// æ³¨å†Œåˆ°QML
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=c1></span><span class=n>qmlRegisterType</span><span class=o>&lt;</span><span class=n>LoginManager</span><span class=o>&gt;</span><span class=p>(</span><span class=s>&#34;MyApp&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=s>&#34;LoginManager&#34;</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=qmléƒ¨åˆ†---è¯­æ³•ç³–æ–¹å¼>QMLéƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-qml data-lang=qml><span class=line><span class=ln> 1</span><span class=cl><span class=kr>import</span> <span class=nx>QtQuick</span> <span class=mf>2.15</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=kr>import</span> <span class=nx>MyApp</span> <span class=mf>1.0</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=nx>Item</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=nx>LoginManager</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=kd>id: loginManager</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>        
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=c1>// è¯­æ³•ç³–ï¼šç›´æ¥ä½¿ç”¨on+ä¿¡å·å
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=c1></span>        <span class=k>onLoginResult:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>success</span><span class=p>,</span> <span class=nx>message</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>success</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>                <span class=nx>statusText</span><span class=p>.</span><span class=nx>text</span> <span class=o>=</span> <span class=s2>&#34;æ¬¢è¿å›æ¥!&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>                <span class=nx>statusText</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=s2>&#34;green&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>                <span class=nx>statusText</span><span class=p>.</span><span class=nx>text</span> <span class=o>=</span> <span class=nx>message</span><span class=p>;</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>                <span class=nx>statusText</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=s2>&#34;red&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=nx>Button</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>        <span class=k>text:</span> <span class=s2>&#34;ç™»å½•&#34;</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=k>onClicked:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>			<span class=c1>//è°ƒç”¨C++ æš´éœ²çš„ Q_INVOKABLE attemptLogin æ–¹æ³•
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=c1></span>            <span class=nx>loginManager</span><span class=p>.</span><span class=nx>attemptLogin</span><span class=p>(</span><span class=nx>usernameField</span><span class=p>.</span><span class=nx>text</span><span class=p>,</span> <span class=nx>passwordField</span><span class=p>.</span><span class=nx>text</span><span class=p>);</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>    
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=nx>Text</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>        <span class=kd>id: statusText</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>        <span class=k>text:</span> <span class=s2>&#34;è¯·ç™»å½•&#34;</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>32</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=qmléƒ¨åˆ†---æ˜¾å¼connectæ–¹å¼>QMLéƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-qml data-lang=qml><span class=line><span class=ln> 1</span><span class=cl><span class=kr>import</span> <span class=nx>QtQuick</span> <span class=mf>2.15</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=kr>import</span> <span class=nx>MyApp</span> <span class=mf>1.0</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=nx>Item</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=nx>LoginManager</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>        <span class=kd>id: loginManager</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=c1>// å®šä¹‰å¤„ç†å‡½æ•°
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=c1></span>    <span class=kd>function</span> <span class=nx>handleLoginResult</span><span class=p>(</span><span class=nx>success</span><span class=p>,</span> <span class=nx>message</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>success</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>            <span class=nx>statusText</span><span class=p>.</span><span class=nx>text</span> <span class=o>=</span> <span class=s2>&#34;æ¬¢è¿å›æ¥!&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>            <span class=nx>statusText</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=s2>&#34;green&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>            <span class=nx>statusText</span><span class=p>.</span><span class=nx>text</span> <span class=o>=</span> <span class=nx>message</span><span class=p>;</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>            <span class=nx>statusText</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=s2>&#34;red&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=c1>// æ˜¾å¼è¿æ¥ä¿¡å·å’Œæ§½
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=c1></span>    <span class=k>Component.onCompleted:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>		<span class=c1>//å°†C++çš„ä¿¡å·ä¸qmlè‡ªå·±å®šä¹‰å¤„ç†å‡½æ•°å…³è”
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=c1></span>        <span class=nx>loginManager</span><span class=p>.</span><span class=nx>loginResult</span><span class=p>.</span><span class=nx>connect</span><span class=p>(</span><span class=nx>handleLoginResult</span><span class=p>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>    
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=nx>Button</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>        <span class=k>text:</span> <span class=s2>&#34;ç™»å½•&#34;</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>        <span class=k>onClicked:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>            <span class=nx>loginManager</span><span class=p>.</span><span class=nx>attemptLogin</span><span class=p>(</span><span class=nx>usernameField</span><span class=p>.</span><span class=nx>text</span><span class=p>,</span> <span class=nx>passwordField</span><span class=p>.</span><span class=nx>text</span><span class=p>);</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    
</span></span><span class=line><span class=ln>33</span><span class=cl>    <span class=nx>Text</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>        <span class=kd>id: statusText</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>        <span class=k>text:</span> <span class=s2>&#34;è¯·ç™»å½•&#34;</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>37</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=2-qmlä¿¡å·--cæ§½å‡½æ•°>2. QMLä¿¡å· â†’ C++æ§½å‡½æ•°</h2><h3 id=qmléƒ¨åˆ†-ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨>QMLéƒ¨åˆ† (ä¸¤ç§è¿æ¥æ–¹å¼å…±ç”¨)</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-qml data-lang=qml><span class=line><span class=ln> 1</span><span class=cl><span class=kr>import</span> <span class=nx>QtQuick</span> <span class=mf>2.15</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=nx>Item</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kd>id: root</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=c1>// å®šä¹‰QMLä¿¡å·
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=c1></span>    <span class=nx>signal</span> <span class=nx>userAction</span><span class=p>(</span><span class=nx>string</span> <span class=nx>action</span><span class=p>,</span> <span class=kd>var</span> <span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=nx>Button</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=k>text:</span> <span class=s2>&#34;å‘é€æ•°æ®&#34;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=k>onClicked:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>            <span class=c1>// è§¦å‘ä¿¡å·
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=c1></span>            <span class=nx>root</span><span class=p>.</span><span class=nx>userAction</span><span class=p>(</span><span class=s2>&#34;submit&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>                <span class=k>username:</span> <span class=nx>usernameField</span><span class=p>.</span><span class=nx>text</span><span class=p>,</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>                <span class=k>timestamp:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>()</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=céƒ¨åˆ†---è¯­æ³•ç³–æ–¹å¼>C++éƒ¨åˆ† - è¯­æ³•ç³–æ–¹å¼</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln> 1</span><span class=cl><span class=c1>// datahandler.h
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>DataHandler</span> <span class=o>:</span> <span class=k>public</span> <span class=n>QObject</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=n>Q_OBJECT</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=k>explicit</span> <span class=n>DataHandler</span><span class=p>(</span><span class=n>QObject</span> <span class=o>*</span><span class=n>parent</span> <span class=o>=</span> <span class=k>nullptr</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=c1>// è®¾ç½®QMLæ ¹å¯¹è±¡
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=c1></span>    <span class=kt>void</span> <span class=nf>setRootObject</span><span class=p>(</span><span class=n>QObject</span> <span class=o>*</span><span class=n>root</span><span class=p>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=k>public</span> <span class=nl>slots</span><span class=p>:</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=c1>// å¤„ç†QMLä¿¡å·çš„æ§½å‡½æ•°
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=c1></span>    <span class=kt>void</span> <span class=n>handleUserAction</span><span class=p>(</span><span class=k>const</span> <span class=n>QString</span> <span class=o>&amp;</span><span class=n>action</span><span class=p>,</span> <span class=k>const</span> <span class=n>QVariant</span> <span class=o>&amp;</span><span class=n>data</span><span class=p>);</span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=c1>// datahandler.cpp
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=c1></span><span class=kt>void</span> <span class=n>DataHandler</span><span class=o>::</span><span class=n>setRootObject</span><span class=p>(</span><span class=n>QObject</span> <span class=o>*</span><span class=n>root</span><span class=p>)</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>root</span><span class=p>)</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=c1>// ä½¿ç”¨QObject::connectçš„è¯­æ³•ç³–å½¢å¼
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=c1></span>    <span class=c1>// è‡ªåŠ¨è¿æ¥åŒåä¿¡å·å’Œæ§½
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=c1></span>    <span class=n>QObject</span><span class=o>::</span><span class=n>connect</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>SIGNAL</span><span class=p>(</span><span class=n>userAction</span><span class=p>(</span><span class=n>QString</span><span class=p>,</span><span class=n>QVariant</span><span class=p>)),</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>                    <span class=k>this</span><span class=p>,</span> <span class=n>SLOT</span><span class=p>(</span><span class=n>handleUserAction</span><span class=p>(</span><span class=n>QString</span><span class=p>,</span><span class=n>QVariant</span><span class=p>)));</span>
</span></span><span class=line><span class=ln>26</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>
</span></span><span class=line><span class=ln>28</span><span class=cl><span class=kt>void</span> <span class=n>DataHandler</span><span class=o>::</span><span class=n>handleUserAction</span><span class=p>(</span><span class=k>const</span> <span class=n>QString</span> <span class=o>&amp;</span><span class=n>action</span><span class=p>,</span> <span class=k>const</span> <span class=n>QVariant</span> <span class=o>&amp;</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=ln>29</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=n>qDebug</span><span class=p>()</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;æ”¶åˆ°ç”¨æˆ·æ“ä½œ:&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>action</span><span class=p>;</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>data</span><span class=p>.</span><span class=n>canConvert</span><span class=o>&lt;</span><span class=n>QVariantMap</span><span class=o>&gt;</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>        <span class=n>QVariantMap</span> <span class=n>dataMap</span> <span class=o>=</span> <span class=n>data</span><span class=p>.</span><span class=n>toMap</span><span class=p>();</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>        <span class=n>qDebug</span><span class=p>()</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;ç”¨æˆ·å:&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>dataMap</span><span class=p>[</span><span class=s>&#34;username&#34;</span><span class=p>].</span><span class=n>toString</span><span class=p>();</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>        <span class=n>qDebug</span><span class=p>()</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;æ—¶é—´æˆ³:&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>dataMap</span><span class=p>[</span><span class=s>&#34;timestamp&#34;</span><span class=p>].</span><span class=n>toString</span><span class=p>();</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>36</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=céƒ¨åˆ†---æ˜¾å¼connectæ–¹å¼>C++éƒ¨åˆ† - æ˜¾å¼connectæ–¹å¼</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=ln> 1</span><span class=cl><span class=c1>// datahandler.h
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>DataHandler</span> <span class=o>:</span> <span class=k>public</span> <span class=n>QObject</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=n>Q_OBJECT</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=k>explicit</span> <span class=n>DataHandler</span><span class=p>(</span><span class=n>QObject</span> <span class=o>*</span><span class=n>parent</span> <span class=o>=</span> <span class=k>nullptr</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=c1>// è®¾ç½®QMLæ ¹å¯¹è±¡
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=c1></span>    <span class=kt>void</span> <span class=nf>setRootObject</span><span class=p>(</span><span class=n>QObject</span> <span class=o>*</span><span class=n>root</span><span class=p>);</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=k>public</span> <span class=nl>slots</span><span class=p>:</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=c1>// å¤„ç†QMLä¿¡å·çš„æ§½å‡½æ•°
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=c1></span>    <span class=kt>void</span> <span class=n>handleUserAction</span><span class=p>(</span><span class=k>const</span> <span class=n>QString</span> <span class=o>&amp;</span><span class=n>action</span><span class=p>,</span> <span class=k>const</span> <span class=n>QVariant</span> <span class=o>&amp;</span><span class=n>data</span><span class=p>);</span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=c1>// datahandler.cpp
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=c1></span><span class=kt>void</span> <span class=n>DataHandler</span><span class=o>::</span><span class=n>setRootObject</span><span class=p>(</span><span class=n>QObject</span> <span class=o>*</span><span class=n>root</span><span class=p>)</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>root</span><span class=p>)</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=c1>// æ˜¾å¼connectæ–¹å¼
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=c1></span>    <span class=n>connect</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>SIGNAL</span><span class=p>(</span><span class=n>userAction</span><span class=p>(</span><span class=n>QString</span><span class=p>,</span><span class=n>QVariant</span><span class=p>)),</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>            <span class=k>this</span><span class=p>,</span> <span class=n>SLOT</span><span class=p>(</span><span class=n>handleUserAction</span><span class=p>(</span><span class=n>QString</span><span class=p>,</span><span class=n>QVariant</span><span class=p>)));</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>            
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=c1>// æˆ–ä½¿ç”¨æ–°è¯­æ³•ï¼ˆéœ€è¦å‡½æ•°æŒ‡é’ˆè½¬æ¢ï¼‰
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=c1></span>    <span class=cm>/*
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=cm>    connect(root, &amp;QObject::destroyed, this, [this](){
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=cm>        qDebug() &lt;&lt; &#34;QMLæ ¹å¯¹è±¡å·²é”€æ¯&#34;;
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=cm>    });
</span></span></span><span class=line><span class=ln>31</span><span class=cl><span class=cm>    */</span>
</span></span><span class=line><span class=ln>32</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl><span class=kt>void</span> <span class=n>DataHandler</span><span class=o>::</span><span class=n>handleUserAction</span><span class=p>(</span><span class=k>const</span> <span class=n>QString</span> <span class=o>&amp;</span><span class=n>action</span><span class=p>,</span> <span class=k>const</span> <span class=n>QVariant</span> <span class=o>&amp;</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=ln>35</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=n>qDebug</span><span class=p>()</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;æ”¶åˆ°ç”¨æˆ·æ“ä½œ:&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>action</span><span class=p>;</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>data</span><span class=p>.</span><span class=n>canConvert</span><span class=o>&lt;</span><span class=n>QVariantMap</span><span class=o>&gt;</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>        <span class=n>QVariantMap</span> <span class=n>dataMap</span> <span class=o>=</span> <span class=n>data</span><span class=p>.</span><span class=n>toMap</span><span class=p>();</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>        <span class=n>qDebug</span><span class=p>()</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;ç”¨æˆ·å:&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>dataMap</span><span class=p>[</span><span class=s>&#34;username&#34;</span><span class=p>].</span><span class=n>toString</span><span class=p>();</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>        <span class=n>qDebug</span><span class=p>()</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;æ—¶é—´æˆ³:&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>dataMap</span><span class=p>[</span><span class=s>&#34;timestamp&#34;</span><span class=p>].</span><span class=n>toString</span><span class=p>();</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>42</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=å®ç°ç»†èŠ‚å¯¹æ¯”>å®ç°ç»†èŠ‚å¯¹æ¯”</h2><h3 id=è¯­æ³•ç³–æ–¹å¼>è¯­æ³•ç³–æ–¹å¼</h3><ol><li><p><strong>C++ä¿¡å· â†’ QMLæ§½</strong>:</p><ul><li>QMLå¼•æ“åœ¨<strong>è§£æQMLæ–‡ä»¶æ—¶</strong>è¯†åˆ«<code>onXxx</code>å±æ€§</li><li>è‡ªåŠ¨ç”ŸæˆJavaScriptå‡½æ•°ä½œä¸ºæ§½</li><li>åœ¨å¯¹è±¡åˆ›å»ºå®Œæˆåç«‹å³å»ºç«‹è¿æ¥</li><li><strong>æ— éœ€æ‰‹åŠ¨ç¼–å†™connectä»£ç </strong></li></ul></li><li><p><strong>QMLä¿¡å· â†’ C++æ§½</strong>:</p><ul><li>åœ¨C++ä¸­ä½¿ç”¨æ—§å¼SIGNAL/SLOTå®è¯­æ³•</li><li>è‡ªåŠ¨å¤„ç†å‚æ•°ç±»å‹è½¬æ¢</li><li>æ¯”æ˜¾å¼connectæ›´ç®€æ´ï¼Œä½†ç¼–è¯‘æ—¶æ£€æŸ¥æ›´å¼±</li></ul></li></ol><h3 id=æ˜¾å¼connectæ–¹å¼>æ˜¾å¼connectæ–¹å¼</h3><ol><li><p><strong>C++ä¿¡å· â†’ QMLæ§½</strong>:</p><ul><li>éœ€è¦å•ç‹¬å®šä¹‰å¤„ç†å‡½æ•°</li><li>åœ¨<code>Component.onCompleted</code>ä¸­æ‰‹åŠ¨è¿æ¥</li><li>å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¿æ¥/æ–­å¼€</li><li>æ›´çµæ´»ï¼Œä½†ä»£ç æ›´å†—é•¿</li></ul></li><li><p><strong>QMLä¿¡å· â†’ C++æ§½</strong>:</p><ul><li>ä½¿ç”¨æ ‡å‡†<code>connect</code>å‡½æ•°</li><li>éœ€è¦æ˜ç¡®æŒ‡å®šä¿¡å·å’Œæ§½</li><li>å¯ä»¥ä½¿ç”¨æ–°å¼è¯­æ³•ï¼ˆå‡½æ•°æŒ‡é’ˆï¼‰æˆ–æ—§å¼è¯­æ³•ï¼ˆå®ï¼‰</li><li>ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥æ›´å¼ºï¼ˆæ–°å¼è¯­æ³•ï¼‰</li></ul></li></ol><h2 id=æ€§èƒ½å’Œä½¿ç”¨åœºæ™¯åˆ†æ>æ€§èƒ½å’Œä½¿ç”¨åœºæ™¯åˆ†æ</h2><h3 id=è¯­æ³•ç³–ä¼˜åŠ¿>è¯­æ³•ç³–ä¼˜åŠ¿</h3><ul><li><strong>ä»£ç æ›´ç®€æ´ç›´è§‚</strong></li><li><strong>QMLå¼•æ“å¯èƒ½è¿›è¡Œä¼˜åŒ–</strong>ï¼ˆå†…éƒ¨å®ç°æ›´é«˜æ•ˆï¼‰</li><li><strong>é€‚åˆå›ºå®šçš„ã€æ°¸ä¹…çš„è¿æ¥</strong></li><li><strong>å‡å°‘é”™è¯¯å¯èƒ½æ€§</strong>ï¼ˆä¸ä¼šæ‹¼å†™é”™è¯¯connectå‚æ•°ï¼‰</li></ul><h3 id=æ˜¾å¼connectä¼˜åŠ¿>æ˜¾å¼connectä¼˜åŠ¿</h3><ul><li><strong>åŠ¨æ€æ§åˆ¶è¿æ¥ç”Ÿå‘½å‘¨æœŸ</strong></li><li><strong>æ¡ä»¶æ€§è¿æ¥</strong>ï¼ˆæ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦è¿æ¥ï¼‰</li><li><strong>å¤šä¸ªå¤„ç†å™¨</strong>ï¼ˆä¸€ä¸ªä¿¡å·å¯ä»¥è¿æ¥åˆ°å¤šä¸ªä¸åŒå‡½æ•°ï¼‰</li><li><strong>ä¿¡å·è½¬å‘</strong>ï¼ˆå¯ä»¥è¿æ¥ä¿¡å·åˆ°ä¿¡å·ï¼‰</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-qml data-lang=qml><span class=line><span class=ln> 1</span><span class=cl><span class=c1>// æ˜¾å¼connectçš„çµæ´»æ€§ç¤ºä¾‹
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1></span><span class=k>Component.onCompleted:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>settings</span><span class=p>.</span><span class=nx>debugMode</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>        <span class=nx>dataSource</span><span class=p>.</span><span class=nx>dataChanged</span><span class=p>.</span><span class=nx>connect</span><span class=p>(</span><span class=nx>logDataChange</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>settings</span><span class=p>.</span><span class=nx>notificationsEnabled</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=nx>dataSource</span><span class=p>.</span><span class=nx>dataChanged</span><span class=p>.</span><span class=nx>connect</span><span class=p>(</span><span class=nx>showNotification</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=c1>// ä¿¡å·è½¬å‘
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=c1></span>    <span class=nx>dataSource</span><span class=p>.</span><span class=nx>dataChanged</span><span class=p>.</span><span class=nx>connect</span><span class=p>(</span><span class=nx>root</span><span class=p>.</span><span class=nx>onDataUpdated</span><span class=p>);</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=c1>// åŠ¨æ€æ–­å¼€è¿æ¥
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>disableLogging</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=nx>dataSource</span><span class=p>.</span><span class=nx>dataChanged</span><span class=p>.</span><span class=nx>disconnect</span><span class=p>(</span><span class=nx>logDataChange</span><span class=p>);</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=æ€»ç»“>æ€»ç»“</h2><ol><li><strong>è¯­æ³•ç³–æœ¬è´¨ä¸Šå°±æ˜¯ç®€åŒ–ç‰ˆçš„connect</strong>ï¼Œåº•å±‚å®ç°ç›¸ä¼¼</li><li><strong>ä¸¤ç§æ–¹å¼æ€§èƒ½å·®å¼‚ä¸å¤§</strong>ï¼Œä¸»è¦åŒºåˆ«åœ¨äºçµæ´»æ€§å’Œä»£ç ç®€æ´æ€§</li><li><strong>ç®€å•å›ºå®šè¿æ¥ç”¨è¯­æ³•ç³–</strong>ï¼Œå¤æ‚åŠ¨æ€è¿æ¥ç”¨æ˜¾å¼connect</li><li><strong>ä¸è®ºå“ªç§æ–¹å¼ï¼ŒC++å’ŒQMLçš„äº¤äº’éƒ½éœ€è¦é€šè¿‡Qtå…ƒå¯¹è±¡ç³»ç»Ÿå’ŒJSå¼•æ“æ¡¥æ¥</strong></li></ol></section><div class=post-reward data-html2canvas-ignore><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>èµèµæ”¯æŒ</label><div class=qr-code><label class=qr-code-image for=reward><img class=image src=https://tuchuang.liushuiyu.cn/img/wxzf.webp>
<span>å¾®ä¿¡æ‰“èµ</span>
</label><label class=qr-code-image for=reward><img class=image src=https://tuchuang.liushuiyu.cn/img/zfbzf.webp>
<span>æ”¯ä»˜å®æ‰“èµ</span></label></div></div><footer class=article-footer><section class=article-tags><a href=/tags/%E7%AC%94%E8%AE%B0/>ç¬”è®°</a>
<a href=/tags/c++/>C++</a>
<a href=/tags/qt/>QT</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class="article-card has-image"><a href=/p/c-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88unique_ptr%E4%B8%8Emake_unique/><div class=article-image><img src=https://tuchuang.liushuiyu.cn/img/ptr-logo20250901.webp loading=lazy data-key data-hash=https://tuchuang.liushuiyu.cn/img/ptr-logo20250901.webp></div><div class=article-details><h2 class=article-title>C++æ™ºèƒ½æŒ‡é’ˆunique_ptrâ€‹ä¸make_unique</h2></div></a></article><article class="article-card has-image"><a href=/p/c-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%8E%E6%8B%B7%E8%B4%9D%E6%8E%A7%E5%88%B6%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/><div class=article-image><img src=https://tuchuang.liushuiyu.cn/img/copy-logo20250831.webp loading=lazy data-key data-hash=https://tuchuang.liushuiyu.cn/img/copy-logo20250831.webp></div><div class=article-details><h2 class=article-title>C++æ„é€ å‡½æ•°ä¸æ‹·è´æ§åˆ¶å®Œå…¨æŒ‡å—</h2></div></a></article><article class="article-card has-image"><a href=/p/gitignore%E7%AC%94%E8%AE%B0/><div class=article-image><img src=https://tuchuang.liushuiyu.cn/img/git-management20250830.webp loading=lazy data-key data-hash=https://tuchuang.liushuiyu.cn/img/git-management20250830.webp></div><div class=article-details><h2 class=article-title>gitignoreç¬”è®°</h2></div></a></article><article class="article-card has-image"><a href=/p/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0---%E5%8F%98%E9%87%8F%E4%B8%8E%E7%A9%BA%E6%93%8D%E4%BD%9C/><div class=article-image><img src=https://tuchuang.liushuiyu.cn/img/py1.jpg loading=lazy data-key data-hash=https://tuchuang.liushuiyu.cn/img/py1.jpg></div><div class=article-details><h2 class=article-title>pythonå­¦ä¹ ç¬”è®°---å˜é‡ä¸ç©ºæ“ä½œ</h2></div></a></article><article class="article-card has-image"><a href=/p/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0---%E5%88%A4%E6%96%AD%E5%BE%AA%E7%8E%AF%E8%AF%AD%E6%B3%95/><div class=article-image><img src=https://tuchuang.liushuiyu.cn/img/py2.jpg loading=lazy data-key data-hash=https://tuchuang.liushuiyu.cn/img/py2.jpg></div><div class=article-details><h2 class=article-title>pythonå­¦ä¹ ç¬”è®°---åˆ¤æ–­å¾ªç¯è¯­æ³•</h2></div></a></article></div></div></aside><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script src=https://blog.liushuiyu.cn/background/sakura.js></script><style>#TableOfContents>ul,ol{ul, ol { display: none; } .open { display: block; }}</style><script>function initTocHide(){let e=document.querySelector(".widget--toc");if(!e)return;window.addEventListener("scroll",function(){let t=document.querySelector(".active-class");if(!t)return;let n=document.querySelectorAll(".open");n.length>0&&n.forEach(e=>{e.classList.remove("open")}),t.children.length>1&&t.children[1].classList.add("open");let e=t.parentElement;do e.classList.add("open"),e=e.parentElement.parentElement;while(e!==0[0]&&(e.localName==="ul"||e.localName==="ol"))})}initTocHide()</script><style>footer.site-footer{width:100%;position:relative;bottom:0;padding:20px 10px;font-size:1.3rem;font-weight:600;line-height:1.75;color:var(--card-text-color-secondary);background-color:var(--footer-bg);box-shadow:0 -3px 1px -3px var(--card-text-color-main);padding:10px;user-select:none}.footer-info{display:grid;grid-template-columns:1fr auto}.right-footer{text-align:left;display:flex;align-items:right}footer.site-footer a{font-size:15px;color:var(--card-text-color-main);transition:color .2s ease-in-out;margin-inline:15px}.copyright{font-size:15px;color:var(--card-text-color-main) !important;transition:color .2s ease-in-out;margin-inline:15px}</style><div style=display:flex;justify-content:center;align-items:center;flex-direction:column;margin-top:60px;color:var(--card-text-color-main);margin:30px></div><footer class=site-footer><div class=footer-info><div class=left-footer><section class=copyright>&copy;
2024 -
2025 liushuiyu</section></div><section class=totalcount>å‘è¡¨äº†13ç¯‡æ–‡ç«  Â·
æ€»è®¡4.13kå­—</section></div></footer></body></html>